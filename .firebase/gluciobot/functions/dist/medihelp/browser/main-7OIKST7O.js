import{A as Tn,a as W,b as Qe,c as df,d as S,e as AA,f as hf,g as SA,h as xA,i as RA,j as L_,k as MA,l as Kl,m as j_,n as ff,o as PA,p as NA,q as B_,r as ct,s as bo,t as Fr,u as pf,v as kA,w as Ql,x as OA,y as VA,z as Ri}from"./chunk-5I67OYDG.js";var FA=null;var U_=1,$_=Symbol("SIGNAL");function Ge(n){let e=FA;return FA=n,e}var LA={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function nF(n){if(!(G_(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===U_)){if(!n.producerMustRecompute(n)&&!q_(n)){n.dirty=!1,n.lastCleanEpoch=U_;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=U_}}function jA(n){return n&&(n.nextProducerIndex=0),Ge(n)}function BA(n,e){if(Ge(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(G_(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)z_(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function q_(n){gf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(nF(t),r!==t.version))return!0}return!1}function UA(n){if(gf(n),G_(n))for(let e=0;e<n.producerNode.length;e++)z_(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function z_(n,e){if(rF(n),gf(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)z_(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];gf(i),i.producerIndexOfThis[r]=e}}function G_(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function gf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function rF(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function iF(){throw new Error}var sF=iF;function $A(n){sF=n}function fe(n){return typeof n=="function"}function Va(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var mf=Va(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Co(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var mt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(fe(r))try{r()}catch(s){e=s instanceof mf?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{qA(s)}catch(o){e=e??[],o instanceof mf?e=[...e,...o.errors]:e.push(o)}}if(e)throw new mf(e)}}add(e){var t;if(e&&e!==this)if(this.closed)qA(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Co(t,e)}remove(e){let{_finalizers:t}=this;t&&Co(t,e),e instanceof n&&e._removeParent(this)}};mt.EMPTY=(()=>{let n=new mt;return n.closed=!0,n})();var H_=mt.EMPTY;function yf(n){return n instanceof mt||n&&"closed"in n&&fe(n.remove)&&fe(n.add)&&fe(n.unsubscribe)}function qA(n){fe(n)?n():n.unsubscribe()}var Er={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Fa={setTimeout(n,e,...t){let{delegate:r}=Fa;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Fa;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function _f(n){Fa.setTimeout(()=>{let{onUnhandledError:e}=Er;if(e)e(n);else throw n})}function Yl(){}var zA=W_("C",void 0,void 0);function GA(n){return W_("E",void 0,n)}function HA(n){return W_("N",n,void 0)}function W_(n,e,t){return{kind:n,value:e,error:t}}var Ao=null;function La(n){if(Er.useDeprecatedSynchronousErrorHandling){let e=!Ao;if(e&&(Ao={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ao;if(Ao=null,t)throw r}}else n()}function WA(n){Er.useDeprecatedSynchronousErrorHandling&&Ao&&(Ao.errorThrown=!0,Ao.error=n)}var So=class extends mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,yf(e)&&e.add(this)):this.destination=uF}static create(e,t,r){return new Mi(e,t,r)}next(e){this.isStopped?Q_(HA(e),this):this._next(e)}error(e){this.isStopped?Q_(GA(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Q_(zA,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},oF=Function.prototype.bind;function K_(n,e){return oF.call(n,e)}var Y_=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){vf(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){vf(r)}else vf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){vf(t)}}},Mi=class extends So{constructor(e,t,r){super();let i;if(fe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Er.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&K_(e.next,s),error:e.error&&K_(e.error,s),complete:e.complete&&K_(e.complete,s)}):i=e}this.destination=new Y_(i)}};function vf(n){Er.useDeprecatedSynchronousErrorHandling?WA(n):_f(n)}function aF(n){throw n}function Q_(n,e){let{onStoppedNotification:t}=Er;t&&Fa.setTimeout(()=>t(n,e))}var uF={closed:!0,next:Yl,error:aF,complete:Yl};var ja=typeof Symbol=="function"&&Symbol.observable||"@@observable";function pn(n){return n}function wf(...n){return J_(n)}function J_(n){return n.length===0?pn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ve=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=lF(t)?t:new Mi(t,r,i);return La(()=>{let{operator:o,source:u}=this;s.add(o?o.call(s,u):u?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=KA(r),new r((i,s)=>{let o=new Mi({next:u=>{try{t(u)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ja](){return this}pipe(...t){return J_(t)(this)}toPromise(t){return t=KA(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function KA(n){var e;return(e=n??Er.Promise)!==null&&e!==void 0?e:Promise}function cF(n){return n&&fe(n.next)&&fe(n.error)&&fe(n.complete)}function lF(n){return n&&n instanceof So||cF(n)&&yf(n)}function X_(n){return fe(n?.lift)}function Ie(n){return e=>{if(X_(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ee(n,e,t,r,i){return new Z_(n,e,t,r,i)}var Z_=class extends So{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(u){try{t(u)}catch(c){e.error(c)}}:super._next,this._error=i?function(u){try{i(u)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ba(){return Ie((n,e)=>{let t=null;n._refCount++;let r=Ee(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ua=class extends ve{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,X_(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new mt;let t=this.getSubject();e.add(this.source.subscribe(Ee(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=mt.EMPTY)}return e}refCount(){return Ba()(this)}};var QA=Va(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var yt=(()=>{class n extends ve{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new If(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new QA}next(t){La(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){La(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){La(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?H_:(this.currentObservers=null,s.push(t),new mt(()=>{this.currentObservers=null,Co(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ve;return t.source=this,t}}return n.create=(e,t)=>new If(e,t),n})(),If=class extends yt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:H_}};var Xt=class extends yt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Jl={now(){return(Jl.delegate||Date).now()},delegate:void 0};var Ef=class extends yt{constructor(e=1/0,t=1/0,r=Jl){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),u=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)u=c;u&&r.splice(0,u+1)}}};var Tf=class extends mt{constructor(e,t){super()}schedule(e,t=0){return this}};var Xl={setInterval(n,e,...t){let{delegate:r}=Xl;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Xl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var $a=class extends Tf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Xl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Xl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Co(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var qa=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};qa.now=Jl.now;var za=class extends qa{constructor(e,t=qa.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Zl=new za($a);var Df=class extends $a{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var bf=class extends za{};var ev=new bf(Df);var gn=new ve(n=>n.complete());function YA(n){return n&&fe(n.schedule)}function tv(n){return n[n.length-1]}function Cf(n){return fe(tv(n))?n.pop():void 0}function Lr(n){return YA(tv(n))?n.pop():void 0}function JA(n,e){return typeof tv(n)=="number"?n.pop():e}var Af=n=>n&&typeof n.length=="number"&&typeof n!="function";function Sf(n){return fe(n?.then)}function xf(n){return fe(n[ja])}function Rf(n){return Symbol.asyncIterator&&fe(n?.[Symbol.asyncIterator])}function Mf(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function dF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Pf=dF();function Nf(n){return fe(n?.[Pf])}function kf(n){return SA(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield hf(t.read());if(i)return yield hf(void 0);yield yield hf(r)}}finally{t.releaseLock()}})}function Of(n){return fe(n?.getReader)}function rt(n){if(n instanceof ve)return n;if(n!=null){if(xf(n))return hF(n);if(Af(n))return fF(n);if(Sf(n))return pF(n);if(Rf(n))return XA(n);if(Nf(n))return gF(n);if(Of(n))return mF(n)}throw Mf(n)}function hF(n){return new ve(e=>{let t=n[ja]();if(fe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fF(n){return new ve(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function pF(n){return new ve(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,_f)})}function gF(n){return new ve(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function XA(n){return new ve(e=>{yF(n,e).catch(t=>e.error(t))})}function mF(n){return XA(kf(n))}function yF(n,e){var t,r,i,s;return AA(this,void 0,void 0,function*(){try{for(t=xA(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Dn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Vn(n,e=0){return Ie((t,r)=>{t.subscribe(Ee(r,i=>Dn(r,n,()=>r.next(i),e),()=>Dn(r,n,()=>r.complete(),e),i=>Dn(r,n,()=>r.error(i),e)))})}function zn(n,e=0){return Ie((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function ZA(n,e){return rt(n).pipe(zn(e),Vn(e))}function eS(n,e){return rt(n).pipe(zn(e),Vn(e))}function tS(n,e){return new ve(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function nS(n,e){return new ve(t=>{let r;return Dn(t,e,()=>{r=n[Pf](),Dn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>fe(r?.return)&&r.return()})}function Vf(n,e){if(!n)throw new Error("Iterable cannot be null");return new ve(t=>{Dn(t,e,()=>{let r=n[Symbol.asyncIterator]();Dn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function rS(n,e){return Vf(kf(n),e)}function iS(n,e){if(n!=null){if(xf(n))return ZA(n,e);if(Af(n))return tS(n,e);if(Sf(n))return eS(n,e);if(Rf(n))return Vf(n,e);if(Nf(n))return nS(n,e);if(Of(n))return rS(n,e)}throw Mf(n)}function xe(n,e){return e?iS(n,e):rt(n)}function ie(...n){let e=Lr(n);return xe(n,e)}function Ga(n,e){let t=fe(n)?n:()=>n,r=i=>i.error(t());return new ve(e?i=>e.schedule(r,0,i):r)}function nv(n){return!!n&&(n instanceof ve||fe(n.lift)&&fe(n.subscribe))}var Pi=Va(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function se(n,e){return Ie((t,r)=>{let i=0;t.subscribe(Ee(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:_F}=Array;function vF(n,e){return _F(e)?n(...e):n(e)}function Ff(n){return se(e=>vF(n,e))}var{isArray:wF}=Array,{getPrototypeOf:IF,prototype:EF,keys:TF}=Object;function Lf(n){if(n.length===1){let e=n[0];if(wF(e))return{args:e,keys:null};if(DF(e)){let t=TF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function DF(n){return n&&typeof n=="object"&&IF(n)===EF}function jf(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ed(...n){let e=Lr(n),t=Cf(n),{args:r,keys:i}=Lf(n);if(r.length===0)return xe([],e);let s=new ve(bF(r,e,i?o=>jf(i,o):pn));return t?s.pipe(Ff(t)):s}function bF(n,e,t=pn){return r=>{sS(e,()=>{let{length:i}=n,s=new Array(i),o=i,u=i;for(let c=0;c<i;c++)sS(e,()=>{let d=xe(n[c],e),f=!1;d.subscribe(Ee(r,g=>{s[c]=g,f||(f=!0,u--),u||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function sS(n,e,t){n?Dn(t,n,e):e()}function oS(n,e,t,r,i,s,o,u){let c=[],d=0,f=0,g=!1,v=()=>{g&&!c.length&&!d&&e.complete()},D=R=>d<r?A(R):c.push(R),A=R=>{s&&e.next(R),d++;let x=!1;rt(t(R,f++)).subscribe(Ee(e,k=>{i?.(k),s?D(k):e.next(k)},()=>{x=!0},void 0,()=>{if(x)try{for(d--;c.length&&d<r;){let k=c.shift();o?Dn(e,o,()=>A(k)):A(k)}v()}catch(k){e.error(k)}}))};return n.subscribe(Ee(e,D,()=>{g=!0,v()})),()=>{u?.()}}function Dt(n,e,t=1/0){return fe(e)?Dt((r,i)=>se((s,o)=>e(r,s,i,o))(rt(n(r,i))),t):(typeof e=="number"&&(t=e),Ie((r,i)=>oS(r,i,n,t)))}function as(n=1/0){return Dt(pn,n)}function aS(){return as(1)}function Ha(...n){return aS()(xe(n,Lr(n)))}function Bf(n){return new ve(e=>{rt(n()).subscribe(e)})}function rv(...n){let e=Cf(n),{args:t,keys:r}=Lf(n),i=new ve(s=>{let{length:o}=t;if(!o){s.complete();return}let u=new Array(o),c=o,d=o;for(let f=0;f<o;f++){let g=!1;rt(t[f]).subscribe(Ee(s,v=>{g||(g=!0,d--),u[f]=v},()=>c--,void 0,()=>{(!c||!g)&&(d||s.next(r?jf(r,u):u),s.complete())}))}});return e?i.pipe(Ff(e)):i}function iv(...n){let e=Lr(n),t=JA(n,1/0),r=n;return r.length?r.length===1?rt(r[0]):as(t)(xe(r,e)):gn}function qt(n,e){return Ie((t,r)=>{let i=0;t.subscribe(Ee(r,s=>n.call(e,s,i++)&&r.next(s)))})}function us(n){return Ie((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Ee(t,void 0,void 0,o=>{s=rt(n(o,us(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function uS(n,e,t,r,i){return(s,o)=>{let u=t,c=e,d=0;s.subscribe(Ee(o,f=>{let g=d++;c=u?n(c,f,g):(u=!0,f),r&&o.next(c)},i&&(()=>{u&&o.next(c),o.complete()})))}}function xo(n,e){return fe(e)?Dt(n,e,1):Dt(n,1)}function cs(n){return Ie((e,t)=>{let r=!1;e.subscribe(Ee(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ni(n){return n<=0?()=>gn:Ie((e,t)=>{let r=0;e.subscribe(Ee(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function sv(n){return se(()=>n)}function Uf(n,e=pn){return n=n??CF,Ie((t,r)=>{let i,s=!0;t.subscribe(Ee(r,o=>{let u=e(o);(s||!n(i,u))&&(s=!1,i=u,r.next(o))}))})}function CF(n,e){return n===e}function $f(n=AF){return Ie((e,t)=>{let r=!1;e.subscribe(Ee(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function AF(){return new Pi}function td(n){return Ie((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Gn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?qt((i,s)=>n(i,s,r)):pn,Ni(1),t?cs(e):$f(()=>new Pi))}function Wa(n){return n<=0?()=>gn:Ie((e,t)=>{let r=[];e.subscribe(Ee(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ov(n,e){let t=arguments.length>=2;return r=>r.pipe(n?qt((i,s)=>n(i,s,r)):pn,Wa(1),t?cs(e):$f(()=>new Pi))}function Ka(){return Ie((n,e)=>{let t,r=!1;n.subscribe(Ee(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function ls(n,e){return Ie(uS(n,e,arguments.length>=2,!0))}function cS(n={}){let{connector:e=()=>new yt,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,u,c,d=0,f=!1,g=!1,v=()=>{u?.unsubscribe(),u=void 0},D=()=>{v(),o=c=void 0,f=g=!1},A=()=>{let R=o;D(),R?.unsubscribe()};return Ie((R,x)=>{d++,!g&&!f&&v();let k=c=c??e();x.add(()=>{d--,d===0&&!g&&!f&&(u=av(A,i))}),k.subscribe(x),!o&&d>0&&(o=new Mi({next:j=>k.next(j),error:j=>{g=!0,v(),u=av(D,t,j),k.error(j)},complete:()=>{f=!0,v(),u=av(D,r),k.complete()}}),rt(R).subscribe(o))})(s)}}function av(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Mi({next:()=>{r.unsubscribe(),n()}});return rt(e(...t)).subscribe(r)}function qf(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,cS({connector:()=>new Ef(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ds(...n){let e=Lr(n);return Ie((t,r)=>{(e?Ha(n,t,e):Ha(n,t)).subscribe(r)})}function pt(n,e){return Ie((t,r)=>{let i=null,s=0,o=!1,u=()=>o&&!i&&r.complete();t.subscribe(Ee(r,c=>{i?.unsubscribe();let d=0,f=s++;rt(n(c,f)).subscribe(i=Ee(r,g=>r.next(e?e(c,g,f,d++):g),()=>{i=null,u()}))},()=>{o=!0,u()}))})}function zf(n,e){return fe(e)?pt(()=>n,e):pt(()=>n)}function uv(n){return Ie((e,t)=>{rt(n).subscribe(Ee(t,()=>t.complete(),Yl)),!t.closed&&e.subscribe(t)})}function Vt(n,e,t){let r=fe(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ie((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let u=!0;i.subscribe(Ee(s,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),s.next(c)},()=>{var c;u=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var d;u=!1,(d=r.error)===null||d===void 0||d.call(r,c),s.error(c)},()=>{var c,d;u&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):pn}var SF="https://g.co/ng/security#xss",ee=class extends Error{constructor(e,t){super(hw(e,t)),this.code=e}};function hw(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function pd(n){return{toString:n}.toString()}var Gf="__parameters__";function xF(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function KS(n,e,t){return pd(()=>{let r=xF(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return u.annotation=o,u;function u(c,d,f){let g=c.hasOwnProperty(Gf)?c[Gf]:Object.defineProperty(c,Gf,{value:[]})[Gf];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Zt=globalThis;function Xe(n){for(let e in n)if(n[e]===Xe)return e;throw Error("Could not find renamed property on target object.")}function RF(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function yn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(yn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function lS(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var MF=Xe({__forward_ref__:Xe});function $o(n){return n.__forward_ref__=$o,n.toString=function(){return yn(this())},n}function mn(n){return QS(n)?n():n}function QS(n){return typeof n=="function"&&n.hasOwnProperty(MF)&&n.__forward_ref__===$o}function te(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Lt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Tp(n){return dS(n,JS)||dS(n,XS)}function YS(n){return Tp(n)!==null}function dS(n,e){return n.hasOwnProperty(e)?n[e]:null}function PF(n){let e=n&&(n[JS]||n[XS]);return e||null}function hS(n){return n&&(n.hasOwnProperty(fS)||n.hasOwnProperty(NF))?n[fS]:null}var JS=Xe({\u0275prov:Xe}),fS=Xe({\u0275inj:Xe}),XS=Xe({ngInjectableDef:Xe}),NF=Xe({ngInjectorDef:Xe}),Y=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=te({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ZS(n){return n&&!!n.\u0275providers}var kF=Xe({\u0275cmp:Xe}),OF=Xe({\u0275dir:Xe}),VF=Xe({\u0275pipe:Xe}),FF=Xe({\u0275mod:Xe}),ep=Xe({\u0275fac:Xe}),nd=Xe({__NG_ELEMENT_ID__:Xe}),pS=Xe({__NG_ENV_ID__:Xe});function fw(n){return typeof n=="string"?n:n==null?"":String(n)}function LF(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():fw(n)}function jF(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ee(-200,n)}function pw(n,e){throw new ee(-201,!1)}var Te=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Te||{}),Dv;function ex(){return Dv}function bn(n){let e=Dv;return Dv=n,e}function tx(n,e,t){let r=Tp(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Te.Optional)return null;if(e!==void 0)return e;pw(n,"Injector")}var BF={},id=BF,bv="__NG_DI_FLAG__",tp="ngTempTokenPath",UF="ngTokenPath",$F=/\n/gm,qF="\u0275",gS="__source",Za;function zF(){return Za}function hs(n){let e=Za;return Za=n,e}function GF(n,e=Te.Default){if(Za===void 0)throw new ee(-203,!1);return Za===null?tx(n,void 0,e):Za.get(n,e&Te.Optional?null:void 0,e)}function B(n,e=Te.Default){return(ex()||GF)(mn(n),e)}function G(n,e=Te.Default){return B(n,Dp(e))}function Dp(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Cv(n){let e=[];for(let t=0;t<n.length;t++){let r=mn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ee(900,!1);let i,s=Te.Default;for(let o=0;o<r.length;o++){let u=r[o],c=HF(u);typeof c=="number"?c===-1?i=u.token:s|=c:i=u}e.push(B(i,s))}else e.push(B(r))}return e}function nx(n,e){return n[bv]=e,n.prototype[bv]=e,n}function HF(n){return n[bv]}function WF(n,e,t,r){let i=n[tp];throw e[gS]&&i.unshift(e[gS]),n.message=KF(`
`+n.message,i,t,r),n[UF]=i,n[tp]=null,n}function KF(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==qF?n.slice(2):n;let i=yn(e);if(Array.isArray(e))i=e.map(yn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let u=e[o];s.push(o+":"+(typeof u=="string"?JSON.stringify(u):yn(u)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace($F,`
  `)}`}var cu=nx(KS("Optional"),8);var gw=nx(KS("SkipSelf"),4);function No(n,e){let t=n.hasOwnProperty(ep);return t?n[ep]:null}function mw(n,e){n.forEach(t=>Array.isArray(t)?mw(t,e):e(t))}function rx(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function np(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function QF(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function YF(n,e,t){let r=gd(n,e);return r>=0?n[r|1]=t:(r=~r,QF(n,r,e,t)),r}function cv(n,e){let t=gd(n,e);if(t>=0)return n[t|1]}function gd(n,e){return JF(n,e,1)}function JF(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var tu={},Hn=[],nu=new Y(""),ix=new Y("",-1),sx=new Y(""),rp=class{get(e,t=id){if(t===id){let r=new Error(`NullInjectorError: No provider for ${yn(e)}!`);throw r.name="NullInjectorError",r}return t}},ox=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ox||{}),Ur=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ur||{}),Fn=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Fn||{});function XF(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Av(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],u=t[r++];n.setAttribute(e,o,u,s)}else{let s=i,o=t[++r];eL(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function ZF(n){return n===3||n===4||n===6}function eL(n){return n.charCodeAt(0)===64}function sd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?mS(n,t,i,null,e[++r]):mS(n,t,i,null,null))}}return n}function mS(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let u=n[s++];if(typeof u=="number"){if(u===e){o=-1;break}else if(u>e){o=s-1;break}}}for(;s<n.length;){let u=n[s];if(typeof u=="number")break;if(u===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var ax="ng-template";function tL(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&XF(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(yw(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function yw(n){return n.type===4&&n.value!==ax}function nL(n,e,t){let r=n.type===4&&!t?ax:n.value;return e===r}function rL(n,e,t){let r=4,i=n.attrs,s=i!==null?oL(i):0,o=!1;for(let u=0;u<e.length;u++){let c=e[u];if(typeof c=="number"){if(!o&&!Tr(r)&&!Tr(c))return!1;if(o&&Tr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!nL(n,c,t)||c===""&&e.length===1){if(Tr(r))return!1;o=!0}}else if(r&8){if(i===null||!tL(n,i,c,t)){if(Tr(r))return!1;o=!0}}else{let d=e[++u],f=iL(c,i,yw(n),t);if(f===-1){if(Tr(r))return!1;o=!0;continue}if(d!==""){let g;if(f>s?g="":g=i[f+1].toLowerCase(),r&2&&d!==g){if(Tr(r))return!1;o=!0}}}}return Tr(r)||o}function Tr(n){return(n&1)===0}function iL(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let u=e[++i];for(;typeof u=="string";)u=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return aL(e,n)}function sL(n,e,t=!1){for(let r=0;r<e.length;r++)if(rL(n,e[r],t))return!0;return!1}function oL(n){for(let e=0;e<n.length;e++){let t=n[e];if(ZF(t))return e}return n.length}function aL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function yS(n,e){return n?":not("+e.trim()+")":e}function uL(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let u=n[++t];i+="["+o+(u.length>0?'="'+u+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Tr(o)&&(e+=yS(s,i),i=""),r=o,s=s||!Tr(r);t++}return i!==""&&(e+=yS(s,i)),e}function cL(n){return n.map(uL).join(",")}function lL(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Tr(i))break;i=s}r++}return{attrs:e,classes:t}}function Kr(n){return pd(()=>{let e=fx(n),t=Qe(W({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ox.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ur.Emulated,styles:n.styles||Hn,_:null,schemas:n.schemas||null,tView:null,id:""});px(t);let r=n.dependencies;return t.directiveDefs=vS(r,!1),t.pipeDefs=vS(r,!0),t.id=fL(t),t})}function dL(n){return ps(n)||cx(n)}function hL(n){return n!==null}function jt(n){return pd(()=>({type:n.type,bootstrap:n.bootstrap||Hn,declarations:n.declarations||Hn,imports:n.imports||Hn,exports:n.exports||Hn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function _S(n,e){if(n==null)return tu;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,u=Fn.None;Array.isArray(i)?(u=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=u!==Fn.None?[r,u]:r,e[s]=o):t[s]=r}return t}function rn(n){return pd(()=>{let e=fx(n);return px(e),e})}function ux(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function ps(n){return n[kF]||null}function cx(n){return n[OF]||null}function lx(n){return n[VF]||null}function dx(n){let e=ps(n)||cx(n)||lx(n);return e!==null?e.standalone:!1}function hx(n,e){let t=n[FF]||null;if(!t&&e===!0)throw new Error(`Type ${yn(n)} does not have '\u0275mod' property.`);return t}function fx(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||tu,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Hn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:_S(n.inputs,e),outputs:_S(n.outputs),debugInfo:null}}function px(n){n.features?.forEach(e=>e(n))}function vS(n,e){if(!n)return null;let t=e?lx:dL;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(hL)}function fL(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function pL(...n){return{\u0275providers:gx(!0,n),\u0275fromNgModule:!0}}function gx(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return mw(e,o=>{let u=o;Sv(u,s,[],r)&&(i||=[],i.push(u))}),i!==void 0&&mx(i,s),t}function mx(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];_w(i,s=>{e(s,r)})}}function Sv(n,e,t,r){if(n=mn(n),!n)return!1;let i=null,s=hS(n),o=!s&&ps(n);if(!s&&!o){let c=n.ngModule;if(s=hS(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let u=r.has(i);if(o){if(u)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of c)Sv(d,e,t,r)}}else if(s){if(s.imports!=null&&!u){r.add(i);let d;try{mw(s.imports,f=>{Sv(f,e,t,r)&&(d||=[],d.push(f))})}finally{}d!==void 0&&mx(d,e)}if(!u){let d=No(i)||(()=>new i);e({provide:i,useFactory:d,deps:Hn},i),e({provide:sx,useValue:i,multi:!0},i),e({provide:nu,useValue:()=>B(i),multi:!0},i)}let c=s.providers;if(c!=null&&!u){let d=n;_w(c,f=>{e(f,d)})}}else return!1;return i!==n&&n.providers!==void 0}function _w(n,e){for(let t of n)ZS(t)&&(t=t.\u0275providers),Array.isArray(t)?_w(t,e):e(t)}var gL=Xe({provide:String,useValue:Xe});function yx(n){return n!==null&&typeof n=="object"&&gL in n}function mL(n){return!!(n&&n.useExisting)}function yL(n){return!!(n&&n.useFactory)}function ru(n){return typeof n=="function"}function _L(n){return!!n.useClass}var bp=new Y(""),Qf={},vL={},lv;function vw(){return lv===void 0&&(lv=new rp),lv}var Cn=class{},od=class extends Cn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Rv(e,o=>this.processProvider(o)),this.records.set(ix,Qa(void 0,this)),i.has("environment")&&this.records.set(Cn,Qa(void 0,this));let s=this.records.get(bp);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(sx,Hn,Te.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ge(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ge(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=hs(this),r=bn(void 0),i;try{return e()}finally{hs(t),bn(r)}}get(e,t=id,r=Te.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(pS))return e[pS](this);r=Dp(r);let i,s=hs(this),o=bn(void 0);try{if(!(r&Te.SkipSelf)){let c=this.records.get(e);if(c===void 0){let d=DL(e)&&Tp(e);d&&this.injectableDefInScope(d)?c=Qa(xv(e),Qf):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let u=r&Te.Self?vw():this.parent;return t=r&Te.Optional&&t===id?null:t,u.get(e,t)}catch(u){if(u.name==="NullInjectorError"){if((u[tp]=u[tp]||[]).unshift(yn(e)),s)throw u;return WF(u,e,"R3InjectorError",this.source)}else throw u}finally{bn(o),hs(s)}}resolveInjectorInitializers(){let e=Ge(null),t=hs(this),r=bn(void 0),i;try{let s=this.get(nu,Hn,Te.Self);for(let o of s)o()}finally{hs(t),bn(r),Ge(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(yn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(e){e=mn(e);let t=ru(e)?e:mn(e&&e.provide),r=IL(e);if(!ru(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Qa(void 0,Qf,!0),i.factory=()=>Cv(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ge(null);try{return t.value===Qf&&(t.value=vL,t.value=t.factory()),typeof t.value=="object"&&t.value&&TL(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ge(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=mn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function xv(n){let e=Tp(n),t=e!==null?e.factory:No(n);if(t!==null)return t;if(n instanceof Y)throw new ee(204,!1);if(n instanceof Function)return wL(n);throw new ee(204,!1)}function wL(n){if(n.length>0)throw new ee(204,!1);let t=PF(n);return t!==null?()=>t.factory(n):()=>new n}function IL(n){if(yx(n))return Qa(void 0,n.useValue);{let e=_x(n);return Qa(e,Qf)}}function _x(n,e,t){let r;if(ru(n)){let i=mn(n);return No(i)||xv(i)}else if(yx(n))r=()=>mn(n.useValue);else if(yL(n))r=()=>n.useFactory(...Cv(n.deps||[]));else if(mL(n))r=()=>B(mn(n.useExisting));else{let i=mn(n&&(n.useClass||n.provide));if(EL(n))r=()=>new i(...Cv(n.deps));else return No(i)||xv(i)}return r}function Qa(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function EL(n){return!!n.deps}function TL(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function DL(n){return typeof n=="function"||typeof n=="object"&&n instanceof Y}function Rv(n,e){for(let t of n)Array.isArray(t)?Rv(t,e):t&&ZS(t)?Rv(t.\u0275providers,e):e(t)}function Vi(n,e){n instanceof od&&n.assertNotDestroyed();let t,r=hs(n),i=bn(void 0);try{return e()}finally{hs(r),bn(i)}}function vx(){return ex()!==void 0||zF()!=null}function bL(n){if(!vx())throw new ee(-203,!1)}function CL(n){let e=Zt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function AL(n){return typeof n=="function"}var Fi=0,be=1,le=2,nn=3,Dr=4,br=5,ip=6,ad=7,$r=8,iu=9,qr=10,Ft=11,ud=12,wS=13,lu=14,zr=15,Cp=16,Ya=17,su=18,Ap=19,wx=20,fs=21,dv=22,ko=23,Gr=25,Ix=1;var Oo=7,sp=8,op=9,Wn=10,ww=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ww||{});function Mo(n){return Array.isArray(n)&&typeof n[Ix]=="object"}function Li(n){return Array.isArray(n)&&n[Ix]===!0}function Ex(n){return(n.flags&4)!==0}function Sp(n){return n.componentOffset>-1}function Iw(n){return(n.flags&1)===1}function gs(n){return!!n.template}function SL(n){return(n[le]&512)!==0}var Mv=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Tx(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function qo(){return Dx}function Dx(n){return n.type.prototype.ngOnChanges&&(n.setInput=RL),xL}qo.ngInherit=!0;function xL(){let n=Cx(this),e=n?.current;if(e){let t=n.previous;if(t===tu)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function RL(n,e,t,r,i){let s=this.declaredInputs[r],o=Cx(n)||ML(n,{previous:tu,current:null}),u=o.current||(o.current={}),c=o.previous,d=c[s];u[s]=new Mv(d&&d.currentValue,t,c===tu),Tx(n,e,i,t)}var bx="__ngSimpleChanges__";function Cx(n){return n[bx]||null}function ML(n,e){return n[bx]=e}var IS=null;var jr=function(n,e,t){IS?.(n,e,t)},PL="svg",NL="math",kL=!1;function OL(){return kL}function Hr(n){for(;Array.isArray(n);)n=n[Fi];return n}function Ax(n,e){return Hr(e[n])}function Kn(n,e){return Hr(e[n.index])}function Sx(n,e){return n.data[e]}function VL(n,e){return n[e]}function ys(n,e){let t=e[n];return Mo(t)?t:t[Fi]}function Ew(n){return(n[le]&128)===128}function FL(n){return Li(n[nn])}function ap(n,e){return e==null?null:n[e]}function xx(n){n[Ya]=0}function LL(n){n[le]&1024||(n[le]|=1024,Ew(n)&&cd(n))}function jL(n,e){for(;n>0;)e=e[lu],n--;return e}function Tw(n){return!!(n[le]&9216||n[ko]?.dirty)}function Pv(n){n[qr].changeDetectionScheduler?.notify(1),Tw(n)?cd(n):n[le]&64&&(OL()?(n[le]|=1024,cd(n)):n[qr].changeDetectionScheduler?.notify())}function cd(n){n[qr].changeDetectionScheduler?.notify();let e=ld(n);for(;e!==null&&!(e[le]&8192||(e[le]|=8192,!Ew(e)));)e=ld(e)}function Rx(n,e){if((n[le]&256)===256)throw new ee(911,!1);n[fs]===null&&(n[fs]=[]),n[fs].push(e)}function BL(n,e){if(n[fs]===null)return;let t=n[fs].indexOf(e);t!==-1&&n[fs].splice(t,1)}function ld(n){let e=n[nn];return Li(e)?e[nn]:e}var Se={lFrame:Fx(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function UL(){return Se.lFrame.elementDepthCount}function $L(){Se.lFrame.elementDepthCount++}function qL(){Se.lFrame.elementDepthCount--}function Mx(){return Se.bindingsEnabled}function zL(){return Se.skipHydrationRootTNode!==null}function GL(n){return Se.skipHydrationRootTNode===n}function HL(){Se.skipHydrationRootTNode=null}function it(){return Se.lFrame.lView}function An(){return Se.lFrame.tView}function Ln(){let n=Px();for(;n!==null&&n.type===64;)n=n.parent;return n}function Px(){return Se.lFrame.currentTNode}function WL(){let n=Se.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function md(n,e){let t=Se.lFrame;t.currentTNode=n,t.isParent=e}function Nx(){return Se.lFrame.isParent}function KL(){Se.lFrame.isParent=!1}function QL(){let n=Se.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function YL(n){return Se.lFrame.bindingIndex=n}function xp(){return Se.lFrame.bindingIndex++}function JL(n){let e=Se.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function XL(){return Se.lFrame.inI18n}function ZL(n,e){let t=Se.lFrame;t.bindingIndex=t.bindingRootIndex=n,Nv(e)}function e2(){return Se.lFrame.currentDirectiveIndex}function Nv(n){Se.lFrame.currentDirectiveIndex=n}function t2(n){let e=Se.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function kx(n){Se.lFrame.currentQueryIndex=n}function n2(n){let e=n[be];return e.type===2?e.declTNode:e.type===1?n[br]:null}function Ox(n,e,t){if(t&Te.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&Te.Host);)if(i=n2(s),i===null||(s=s[lu],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Se.lFrame=Vx();return r.currentTNode=e,r.lView=n,!0}function Dw(n){let e=Vx(),t=n[be];Se.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Vx(){let n=Se.lFrame,e=n===null?null:n.child;return e===null?Fx(n):e}function Fx(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Lx(){let n=Se.lFrame;return Se.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var jx=Lx;function bw(){let n=Lx();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function r2(n){return(Se.lFrame.contextLView=jL(n,Se.lFrame.contextLView))[$r]}function du(){return Se.lFrame.selectedIndex}function Vo(n){Se.lFrame.selectedIndex=n}function Cw(){let n=Se.lFrame;return Sx(n.tView,n.selectedIndex)}function i2(){return Se.lFrame.currentNamespace}var Bx=!0;function Aw(){return Bx}function Sw(n){Bx=n}function s2(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Dx(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function xw(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:u,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),u&&((n.contentHooks??=[]).push(t,u),(n.contentCheckHooks??=[]).push(t,u)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function Yf(n,e,t){Ux(n,e,3,t)}function Jf(n,e,t,r){(n[le]&3)===t&&Ux(n,e,t,r)}function hv(n,e){let t=n[le];(t&3)===e&&(t&=16383,t+=1,n[le]=t)}function Ux(n,e,t,r){let i=r!==void 0?n[Ya]&65535:0,s=r??-1,o=e.length-1,u=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(u=e[c],r!=null&&u>=r)break}else e[c]<0&&(n[Ya]+=65536),(u<s||s==-1)&&(o2(n,t,e,c),n[Ya]=(n[Ya]&4294901760)+c+2),c++}function ES(n,e){jr(4,n,e);let t=Ge(null);try{e.call(n)}finally{Ge(t),jr(5,n,e)}}function o2(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],u=n[o];i?n[le]>>14<n[Ya]>>16&&(n[le]&3)===e&&(n[le]+=16384,ES(u,s)):ES(u,s)}var eu=-1,Fo=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function a2(n){return n instanceof Fo}function u2(n){return(n.flags&8)!==0}function c2(n){return(n.flags&16)!==0}function $x(n){return n!==eu}function up(n){return n&32767}function l2(n){return n>>16}function cp(n,e){let t=l2(n),r=e;for(;t>0;)r=r[lu],t--;return r}var kv=!0;function lp(n){let e=kv;return kv=n,e}var d2=256,qx=d2-1,zx=5,h2=0,Br={};function f2(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(nd)&&(r=t[nd]),r==null&&(r=t[nd]=h2++);let i=r&qx,s=1<<i;e.data[n+(i>>zx)]|=s}function dp(n,e){let t=Gx(n,e);if(t!==-1)return t;let r=e[be];r.firstCreatePass&&(n.injectorIndex=e.length,fv(r.data,n),fv(e,null),fv(r.blueprint,null));let i=Rw(n,e),s=n.injectorIndex;if($x(i)){let o=up(i),u=cp(i,e),c=u[be].data;for(let d=0;d<8;d++)e[s+d]=u[o+d]|c[o+d]}return e[s+8]=i,s}function fv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Gx(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Rw(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Yx(i),r===null)return eu;if(t++,i=i[lu],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return eu}function Ov(n,e,t){f2(n,e,t)}function Hx(n,e,t){if(t&Te.Optional||n!==void 0)return n;pw(e,"NodeInjector")}function Wx(n,e,t,r){if(t&Te.Optional&&r===void 0&&(r=null),!(t&(Te.Self|Te.Host))){let i=n[iu],s=bn(void 0);try{return i?i.get(e,r,t&Te.Optional):tx(e,r,t&Te.Optional)}finally{bn(s)}}return Hx(r,e,t)}function Kx(n,e,t,r=Te.Default,i){if(n!==null){if(e[le]&2048&&!(r&Te.Self)){let o=_2(n,e,t,r,Br);if(o!==Br)return o}let s=Qx(n,e,t,r,Br);if(s!==Br)return s}return Wx(e,t,r,i)}function Qx(n,e,t,r,i){let s=m2(t);if(typeof s=="function"){if(!Ox(e,n,r))return r&Te.Host?Hx(i,t,r):Wx(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&Te.Optional))pw(t);else return o}finally{jx()}}else if(typeof s=="number"){let o=null,u=Gx(n,e),c=eu,d=r&Te.Host?e[zr][br]:null;for((u===-1||r&Te.SkipSelf)&&(c=u===-1?Rw(n,e):e[u+8],c===eu||!DS(r,!1)?u=-1:(o=e[be],u=up(c),e=cp(c,e)));u!==-1;){let f=e[be];if(TS(s,u,f.data)){let g=p2(u,e,t,o,r,d);if(g!==Br)return g}c=e[u+8],c!==eu&&DS(r,e[be].data[u+8]===d)&&TS(s,u,e)?(o=f,u=up(c),e=cp(c,e)):u=-1}}return i}function p2(n,e,t,r,i,s){let o=e[be],u=o.data[n+8],c=r==null?Sp(u)&&kv:r!=o&&(u.type&3)!==0,d=i&Te.Host&&s===u,f=g2(u,o,t,c,d);return f!==null?ou(e,o,f,u):Br}function g2(n,e,t,r,i){let s=n.providerIndexes,o=e.data,u=s&1048575,c=n.directiveStart,d=n.directiveEnd,f=s>>20,g=r?u:u+f,v=i?u+f:d;for(let D=g;D<v;D++){let A=o[D];if(D<c&&t===A||D>=c&&A.type===t)return D}if(i){let D=o[c];if(D&&gs(D)&&D.type===t)return c}return null}function ou(n,e,t,r){let i=n[t],s=e.data;if(a2(i)){let o=i;o.resolving&&jF(LF(s[t]));let u=lp(o.canSeeViewProviders);o.resolving=!0;let c,d=o.injectImpl?bn(o.injectImpl):null,f=Ox(n,r,Te.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&s2(t,s[t],e)}finally{d!==null&&bn(d),lp(u),o.resolving=!1,jx()}}return i}function m2(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(nd)?n[nd]:void 0;return typeof e=="number"?e>=0?e&qx:y2:e}function TS(n,e,t){let r=1<<n;return!!(t[e+(n>>zx)]&r)}function DS(n,e){return!(n&Te.Self)&&!(n&Te.Host&&e)}var Po=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Kx(this._tNode,this._lView,e,Dp(r),t)}};function y2(){return new Po(Ln(),it())}function hu(n){return pd(()=>{let e=n.prototype.constructor,t=e[ep]||Vv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[ep]||Vv(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Vv(n){return QS(n)?()=>{let e=Vv(mn(n));return e&&e()}:No(n)}function _2(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[le]&2048&&!(o[le]&512);){let u=Qx(s,o,t,r|Te.Self,Br);if(u!==Br)return u;let c=s.parent;if(!c){let d=o[wx];if(d){let f=d.get(t,Br,r);if(f!==Br)return f}c=Yx(o),o=o[lu]}s=c}return i}function Yx(n){let e=n[be],t=e.type;return t===2?e.declTNode:t===1?n[br]:null}function bS(n,e=null,t=null,r){let i=Jx(n,e,t,r);return i.resolveInjectorInitializers(),i}function Jx(n,e=null,t=null,r,i=new Set){let s=[t||Hn,pL(n)];return r=r||(typeof n=="object"?void 0:yn(n)),new od(s,e||vw(),r||null,i)}var Cr=(()=>{class n{static{this.THROW_IF_NOT_FOUND=id}static{this.NULL=new rp}static create(t,r){if(Array.isArray(t))return bS({name:""},r,t,"");{let i=t.name??"";return bS({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=te({token:n,providedIn:"any",factory:()=>B(ix)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var v2="ngOriginalError";function pv(n){return n[v2]}var Wr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&pv(e);for(;t&&pv(t);)t=pv(t);return t||null}},Xx=new Y("",{providedIn:"root",factory:()=>G(Wr).handleError.bind(void 0)}),Mw=(()=>{class n{static{this.__NG_ELEMENT_ID__=w2}static{this.__NG_ENV_ID__=t=>t}}return n})(),Fv=class extends Mw{constructor(e){super(),this._lView=e}onDestroy(e){return Rx(this._lView,e),()=>BL(this._lView,e)}};function w2(){return new Fv(it())}function I2(){return Rp(Ln(),it())}function Rp(n,e){return new zo(Kn(n,e))}var zo=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=I2}}return n})();var Lv=class extends yt{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,vx()&&(this.destroyRef=G(Mw,{optional:!0})??void 0)}emit(e){let t=Ge(null);try{super.next(e)}finally{Ge(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=gv(s),i&&(i=gv(i)),o&&(o=gv(o)));let u=super.subscribe({next:i,error:s,complete:o});return e instanceof mt&&e.add(u),u}};function gv(n){return e=>{setTimeout(n,void 0,e)}}var bt=Lv;function Zx(n){return(n.flags&128)===128}var eR=new Map,E2=0;function T2(){return E2++}function D2(n){eR.set(n[Ap],n)}function b2(n){eR.delete(n[Ap])}var CS="__ngContext__";function Lo(n,e){Mo(e)?(n[CS]=e[Ap],D2(e)):n[CS]=e}function tR(n){return rR(n[ud])}function nR(n){return rR(n[Dr])}function rR(n){for(;n!==null&&!Li(n);)n=n[Dr];return n}var jv;function iR(n){jv=n}function C2(){if(jv!==void 0)return jv;if(typeof document<"u")return document;throw new ee(210,!1)}var Mp=new Y("",{providedIn:"root",factory:()=>A2}),A2="ng",Pw=new Y(""),Sn=new Y("",{providedIn:"platform",factory:()=>"unknown"});var Nw=new Y("",{providedIn:"root",factory:()=>C2().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var S2="h",x2="b";var R2=()=>null;function kw(n,e,t=!1){return R2(n,e,t)}var sR=!1,M2=new Y("",{providedIn:"root",factory:()=>sR});var Bv=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${SF})`}};function Ow(n){return n instanceof Bv?n.changingThisBreaksApplicationSecurity:n}function oR(n){return n instanceof Function?n():n}function P2(n){return(n??G(Cr)).get(Sn)==="browser"}var ki=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ki||{}),N2;function Vw(n,e){return N2(n,e)}function Ja(n,e,t,r,i){if(r!=null){let s,o=!1;Li(r)?s=r:Mo(r)&&(o=!0,r=r[Fi]);let u=Hr(r);n===0&&t!==null?i==null?dR(e,t,u):hp(e,t,u,i||null,!0):n===1&&t!==null?hp(e,t,u,i||null,!0):n===2?Y2(e,u,o):n===3&&e.destroyNode(u),s!=null&&X2(e,n,s,t,i)}}function k2(n,e){return n.createText(e)}function O2(n,e,t){n.setValue(e,t)}function aR(n,e,t){return n.createElement(e,t)}function V2(n,e){uR(n,e),e[Fi]=null,e[br]=null}function F2(n,e,t,r,i,s){r[Fi]=i,r[br]=e,Pp(n,r,t,1,i,s)}function uR(n,e){e[qr].changeDetectionScheduler?.notify(1),Pp(n,e,e[Ft],2,null,null)}function L2(n){let e=n[ud];if(!e)return mv(n[be],n);for(;e;){let t=null;if(Mo(e))t=e[ud];else{let r=e[Wn];r&&(t=r)}if(!t){for(;e&&!e[Dr]&&e!==n;)Mo(e)&&mv(e[be],e),e=e[nn];e===null&&(e=n),Mo(e)&&mv(e[be],e),t=e&&e[Dr]}e=t}}function j2(n,e,t,r){let i=Wn+r,s=t.length;r>0&&(t[i-1][Dr]=e),r<s-Wn?(e[Dr]=t[i],rx(t,Wn+r,e)):(t.push(e),e[Dr]=null),e[nn]=t;let o=e[Cp];o!==null&&t!==o&&B2(o,e);let u=e[su];u!==null&&u.insertView(n),Pv(e),e[le]|=128}function B2(n,e){let t=n[op],i=e[nn][nn][zr];e[zr]!==i&&(n[le]|=ww.HasTransplantedViews),t===null?n[op]=[e]:t.push(e)}function cR(n,e){let t=n[op],r=t.indexOf(e);t.splice(r,1)}function Uv(n,e){if(n.length<=Wn)return;let t=Wn+e,r=n[t];if(r){let i=r[Cp];i!==null&&i!==n&&cR(i,r),e>0&&(n[t-1][Dr]=r[Dr]);let s=np(n,Wn+e);V2(r[be],r);let o=s[su];o!==null&&o.detachView(s[be]),r[nn]=null,r[Dr]=null,r[le]&=-129}return r}function lR(n,e){if(!(e[le]&256)){let t=e[Ft];t.destroyNode&&Pp(n,e,t,3,null,null),L2(e)}}function mv(n,e){if(e[le]&256)return;let t=Ge(null);try{e[le]&=-129,e[le]|=256,e[ko]&&UA(e[ko]),$2(n,e),U2(n,e),e[be].type===1&&e[Ft].destroy();let r=e[Cp];if(r!==null&&Li(e[nn])){r!==e[nn]&&cR(r,e);let i=e[su];i!==null&&i.detachView(n)}b2(e)}finally{Ge(t)}}function U2(n,e){let t=n.cleanup,r=e[ad];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[ad]=null);let i=e[fs];if(i!==null){e[fs]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function $2(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Fo)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let u=i[s[o]],c=s[o+1];jr(4,u,c);try{c.call(u)}finally{jr(5,u,c)}}else{jr(4,i,s);try{s.call(i)}finally{jr(5,i,s)}}}}}function q2(n,e,t){return z2(n,e.parent,t)}function z2(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[Fi];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Ur.None||s===Ur.Emulated)return null}return Kn(r,t)}}function hp(n,e,t,r,i){n.insertBefore(e,t,r,i)}function dR(n,e,t){n.appendChild(e,t)}function AS(n,e,t,r,i){r!==null?hp(n,e,t,r,i):dR(n,e,t)}function G2(n,e,t,r){n.removeChild(e,t,r)}function Fw(n,e){return n.parentNode(e)}function H2(n,e){return n.nextSibling(e)}function W2(n,e,t){return Q2(n,e,t)}function K2(n,e,t){return n.type&40?Kn(n,t):null}var Q2=K2,SS;function Lw(n,e,t,r){let i=q2(n,r,e),s=e[Ft],o=r.parent||e[br],u=W2(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)AS(s,i,t[c],u,!1);else AS(s,i,t,u,!1);SS!==void 0&&SS(s,r,e,t,i)}function Xf(n,e){if(e!==null){let t=e.type;if(t&3)return Kn(e,n);if(t&4)return $v(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Xf(n,r);{let i=n[e.index];return Li(i)?$v(-1,i):Hr(i)}}else{if(t&32)return Vw(e,n)()||Hr(n[e.index]);{let r=hR(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ld(n[zr]);return Xf(i,r)}else return Xf(n,e.next)}}}return null}function hR(n,e){if(e!==null){let r=n[zr][br],i=e.projection;return r.projection[i]}return null}function $v(n,e){let t=Wn+n+1;if(t<e.length){let r=e[t],i=r[be].firstChild;if(i!==null)return Xf(r,i)}return e[Oo]}function Y2(n,e,t){let r=Fw(n,e);r&&G2(n,r,e,t)}function jw(n,e,t,r,i,s,o){for(;t!=null;){let u=r[t.index],c=t.type;if(o&&e===0&&(u&&Lo(Hr(u),r),t.flags|=2),(t.flags&32)!==32)if(c&8)jw(n,e,t.child,r,i,s,!1),Ja(e,n,i,u,s);else if(c&32){let d=Vw(t,r),f;for(;f=d();)Ja(e,n,i,f,s);Ja(e,n,i,u,s)}else c&16?J2(n,e,r,t,i,s):Ja(e,n,i,u,s);t=o?t.projectionNext:t.next}}function Pp(n,e,t,r,i,s){jw(t,r,n.firstChild,e,i,s,!1)}function J2(n,e,t,r,i,s){let o=t[zr],c=o[br].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let f=c[d];Ja(e,n,i,f,s)}else{let d=c,f=o[nn];Zx(r)&&(d.flags|=128),jw(n,e,d,f,i,s,!0)}}function X2(n,e,t,r,i){let s=t[Oo],o=Hr(t);s!==o&&Ja(e,n,r,s,i);for(let u=Wn;u<t.length;u++){let c=t[u];Pp(c[be],c,n,e,r,s)}}function Z2(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:ki.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ki.Important),n.setStyle(t,r,i,s))}}function ej(n,e,t){n.setAttribute(e,"style",t)}function fR(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function pR(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Av(n,e,r),i!==null&&fR(n,e,i),s!==null&&ej(n,e,s)}var Go={};function lt(n=1){gR(An(),it(),du()+n,!1)}function gR(n,e,t,r){if(!r)if((e[le]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Yf(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Jf(e,s,0,t)}Vo(t)}function De(n,e=Te.Default){let t=it();if(t===null)return B(n,e);let r=Ln();return Kx(r,t,mn(n),e)}function mR(){let n="invalid";throw new Error(n)}function yR(n,e,t,r,i,s){let o=Ge(null);try{let u=null;i&Fn.SignalBased&&(u=e[r][$_]),u!==null&&u.transformFn!==void 0&&(s=u.transformFn(s)),i&Fn.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,u,s,t,r):Tx(e,u,r,s)}finally{Ge(o)}}function tj(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Vo(~i);else{let s=i,o=t[++r],u=t[++r];ZL(o,s);let c=e[s];u(2,c)}}}finally{Vo(-1)}}function Np(n,e,t,r,i,s,o,u,c,d,f){let g=e.blueprint.slice();return g[Fi]=i,g[le]=r|4|128|8|64,(d!==null||n&&n[le]&2048)&&(g[le]|=2048),xx(g),g[nn]=g[lu]=n,g[$r]=t,g[qr]=o||n&&n[qr],g[Ft]=u||n&&n[Ft],g[iu]=c||n&&n[iu]||null,g[br]=s,g[Ap]=T2(),g[ip]=f,g[wx]=d,g[zr]=e.type==2?n[zr]:g,g}function kp(n,e,t,r,i){let s=n.data[e];if(s===null)s=nj(n,e,t,r,i),XL()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=WL();s.injectorIndex=o===null?-1:o.injectorIndex}return md(s,!0),s}function nj(n,e,t,r,i){let s=Px(),o=Nx(),u=o?s:s&&s.parent,c=n.data[e]=aj(n,u,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function _R(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function vR(n,e,t,r,i){let s=du(),o=r&2;try{Vo(-1),o&&e.length>Gr&&gR(n,e,Gr,!1),jr(o?2:0,i),t(r,i)}finally{Vo(s),jr(o?3:1,i)}}function wR(n,e,t){if(Ex(e)){let r=Ge(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let u=n.data[o];if(u.contentQueries){let c=t[o];u.contentQueries(1,c,o)}}}finally{Ge(r)}}}function IR(n,e,t){Mx()&&(fj(n,e,t,Kn(t,e)),(t.flags&64)===64&&AR(n,e,t))}function ER(n,e,t=Kn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],u=o===-1?t(e,n):n[o];n[i++]=u}}}function TR(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Bw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Bw(n,e,t,r,i,s,o,u,c,d,f){let g=Gr+r,v=g+i,D=rj(g,v),A=typeof d=="function"?d():d;return D[be]={type:n,blueprint:D,template:t,queries:null,viewQuery:u,declTNode:e,data:D.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:A,incompleteFirstPass:!1,ssrId:f}}function rj(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Go);return t}function ij(n,e,t,r){let s=r.get(M2,sR)||t===Ur.ShadowDom,o=n.selectRootElement(e,s);return sj(o),o}function sj(n){oj(n)}var oj=()=>null;function aj(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,u=0;return zL()&&(u|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:u,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function xS(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let u,c=Fn.None;Array.isArray(o)?(u=o[0],c=o[1]):u=o;let d=s;if(i!==null){if(!i.hasOwnProperty(s))continue;d=i[s]}n===0?RS(r,t,d,u,c):RS(r,t,d,u)}return r}function RS(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function uj(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,u=[],c=null,d=null;for(let f=r;f<i;f++){let g=s[f],v=t?t.get(g):null,D=v?v.inputs:null,A=v?v.outputs:null;c=xS(0,g.inputs,f,c,D),d=xS(1,g.outputs,f,d,A);let R=c!==null&&o!==null&&!yw(e)?Dj(c,f,o):null;u.push(R)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=u,e.inputs=c,e.outputs=d}function cj(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function DR(n,e,t,r,i,s,o,u){let c=Kn(e,t),d=e.inputs,f;!u&&d!=null&&(f=d[r])?(Uw(n,t,f,r,i),Sp(e)&&lj(t,e.index)):e.type&3?(r=cj(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function lj(n,e){let t=ys(e,n);t[le]&16||(t[le]|=64)}function bR(n,e,t,r){if(Mx()){let i=r===null?null:{"":-1},s=gj(n,t),o,u;s===null?o=u=null:[o,u]=s,o!==null&&CR(n,e,t,o,i,u),i&&mj(t,r,i)}t.mergedAttrs=sd(t.mergedAttrs,t.attrs)}function CR(n,e,t,r,i,s){for(let d=0;d<r.length;d++)Ov(dp(t,e),n,r[d].type);_j(t,n.data.length,r.length);for(let d=0;d<r.length;d++){let f=r[d];f.providersResolver&&f.providersResolver(f)}let o=!1,u=!1,c=_R(n,e,r.length,null);for(let d=0;d<r.length;d++){let f=r[d];t.mergedAttrs=sd(t.mergedAttrs,f.hostAttrs),vj(n,t,e,c,f),yj(c,f,i),f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let g=f.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!u&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),c++}uj(n,t,s)}function dj(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let u=~e.index;hj(o)!=u&&o.push(u),o.push(t,r,s)}}function hj(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function fj(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;Sp(t)&&wj(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||dp(t,e),Lo(r,e);let o=t.initialInputs;for(let u=i;u<s;u++){let c=n.data[u],d=ou(e,n,u,t);if(Lo(d,e),o!==null&&Tj(e,u-i,d,c,t,o),gs(c)){let f=ys(t.index,e);f[$r]=ou(e,n,u,t)}}}function AR(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=e2();try{Vo(s);for(let u=r;u<i;u++){let c=n.data[u],d=e[u];Nv(u),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&pj(c,d)}}finally{Vo(-1),Nv(o)}}function pj(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function gj(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(sL(e,o.selectors,!1))if(r||(r=[]),gs(o))if(o.findHostDirectiveDefs!==null){let u=[];i=i||new Map,o.findHostDirectiveDefs(o,u,i),r.unshift(...u,o);let c=u.length;qv(n,e,c)}else r.unshift(o),qv(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function qv(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function mj(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new ee(-301,!1);r.push(e[i],s)}}}function yj(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;gs(e)&&(t[""]=n)}}function _j(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function vj(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=No(i.type,!0)),o=new Fo(s,gs(i),De);n.blueprint[r]=o,t[r]=o,dj(n,e,r,_R(n,t,i.hostVars,Go),i)}function wj(n,e,t){let r=Kn(e,n),i=TR(t),s=n[qr].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let u=Op(n,Np(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=u}function Ij(n,e,t,r,i,s){let o=Kn(n,e);Ej(e[Ft],o,s,n.value,t,r,i)}function Ej(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let u=o==null?fw(s):o(s,r||"",i);n.setAttribute(e,i,u,t)}}function Tj(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let u=0;u<o.length;){let c=o[u++],d=o[u++],f=o[u++],g=o[u++];yR(r,t,c,d,f,g)}}function Dj(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let u=0;u<o.length;u+=3)if(o[u]===e){r.push(s,o[u+1],o[u+2],t[i+1]);break}}i+=2}return r}function SR(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function xR(n,e){let t=n.contentQueries;if(t!==null){let r=Ge(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let u=n.data[o];kx(s),u.contentQueries(2,e[o],o)}}}finally{Ge(r)}}}function Op(n,e){return n[ud]?n[wS][Dr]=e:n[ud]=e,n[wS]=e,e}function zv(n,e,t){kx(0);let r=Ge(null);try{e(n,t)}finally{Ge(r)}}function bj(n){return n[ad]||(n[ad]=[])}function Cj(n){return n.cleanup||(n.cleanup=[])}function RR(n,e){let t=n[iu],r=t?t.get(Wr,null):null;r&&r.handleError(e)}function Uw(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],u=t[s++],c=t[s++],d=e[o],f=n.data[o];yR(f,d,r,u,c,i)}}function Aj(n,e,t){let r=Ax(e,n);O2(n[Ft],r,t)}function Sj(n,e){let t=ys(e,n),r=t[be];xj(r,t);let i=t[Fi];i!==null&&t[ip]===null&&(t[ip]=kw(i,t[iu])),$w(r,t,t[$r])}function xj(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function $w(n,e,t){Dw(e);try{let r=n.viewQuery;r!==null&&zv(1,r,t);let i=n.template;i!==null&&vR(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[su]?.finishViewCreation(n),n.staticContentQueries&&xR(n,e),n.staticViewQueries&&zv(2,n.viewQuery,t);let s=n.components;s!==null&&Rj(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[le]&=-5,bw()}}function Rj(n,e){for(let t=0;t<e.length;t++)Sj(n,e[t])}function Mj(n,e,t,r){let i=Ge(null);try{let s=e.tView,u=n[le]&4096?4096:16,c=Np(n,s,t,u,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[Cp]=d;let f=n[su];return f!==null&&(c[su]=f.createEmbeddedView(s)),$w(s,c,t),c}finally{Ge(i)}}function MS(n,e){return!e||e.firstChild===null||Zx(n)}function Pj(n,e,t,r=!0){let i=e[be];if(j2(i,e,n,t),r){let o=$v(t,n),u=e[Ft],c=Fw(u,n[Oo]);c!==null&&F2(i,n[br],u,e,c,o)}let s=e[ip];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function fp(n,e,t,r,i=!1){for(;t!==null;){let s=e[t.index];s!==null&&r.push(Hr(s)),Li(s)&&Nj(s,r);let o=t.type;if(o&8)fp(n,e,t.child,r);else if(o&32){let u=Vw(t,e),c;for(;c=u();)r.push(c)}else if(o&16){let u=hR(e,t);if(Array.isArray(u))r.push(...u);else{let c=ld(e[zr]);fp(c[be],c,u,r,!0)}}t=i?t.projectionNext:t.next}return r}function Nj(n,e){for(let t=Wn;t<n.length;t++){let r=n[t],i=r[be].firstChild;i!==null&&fp(r[be],r,i,e)}n[Oo]!==n[Fi]&&e.push(n[Oo])}var MR=[];function kj(n){return n[ko]??Oj(n)}function Oj(n){let e=MR.pop()??Object.create(Fj);return e.lView=n,e}function Vj(n){n.lView[ko]!==n&&(n.lView=null,MR.push(n))}var Fj=Qe(W({},LA),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{cd(n.lView)},consumerOnSignalRead(){this.lView[ko]=this}}),PR=100;function NR(n,e=!0,t=0){let r=n[qr],i=r.rendererFactory,s=!1;s||i.begin?.();try{Lj(n,t)}catch(o){throw e&&RR(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Lj(n,e){Gv(n,e);let t=0;for(;Tw(n);){if(t===PR)throw new ee(103,!1);t++,Gv(n,1)}}function jj(n,e,t,r){let i=e[le];if((i&256)===256)return;let s=!1;!s&&e[qr].inlineEffectRunner?.flush(),Dw(e);let o=null,u=null;!s&&Bj(n)&&(u=kj(e),o=jA(u));try{xx(e),YL(n.bindingStartIndex),t!==null&&vR(n,e,t,2,r);let c=(i&3)===3;if(!s)if(c){let g=n.preOrderCheckHooks;g!==null&&Yf(e,g,null)}else{let g=n.preOrderHooks;g!==null&&Jf(e,g,0,null),hv(e,0)}if(Uj(e),kR(e,0),n.contentQueries!==null&&xR(n,e),!s)if(c){let g=n.contentCheckHooks;g!==null&&Yf(e,g)}else{let g=n.contentHooks;g!==null&&Jf(e,g,1),hv(e,1)}tj(n,e);let d=n.components;d!==null&&VR(e,d,0);let f=n.viewQuery;if(f!==null&&zv(2,f,r),!s)if(c){let g=n.viewCheckHooks;g!==null&&Yf(e,g)}else{let g=n.viewHooks;g!==null&&Jf(e,g,2),hv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[dv]){for(let g of e[dv])g();e[dv]=null}s||(e[le]&=-73)}catch(c){throw cd(e),c}finally{u!==null&&(BA(u,o),Vj(u)),bw()}}function Bj(n){return n.type!==2}function kR(n,e){for(let t=tR(n);t!==null;t=nR(t))for(let r=Wn;r<t.length;r++){let i=t[r];OR(i,e)}}function Uj(n){for(let e=tR(n);e!==null;e=nR(e)){if(!(e[le]&ww.HasTransplantedViews))continue;let t=e[op];for(let r=0;r<t.length;r++){let i=t[r],s=i[nn];LL(i)}}}function $j(n,e,t){let r=ys(e,n);OR(r,t)}function OR(n,e){Ew(n)&&Gv(n,e)}function Gv(n,e){let r=n[be],i=n[le],s=n[ko],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&q_(s)),s&&(s.dirty=!1),n[le]&=-9217,o)jj(r,n,r.template,n[$r]);else if(i&8192){kR(n,1);let u=r.components;u!==null&&VR(n,u,1)}}function VR(n,e,t){for(let r=0;r<e.length;r++)$j(n,e[r],t)}function qw(n){for(n[qr].changeDetectionScheduler?.notify();n;){n[le]|=64;let e=ld(n);if(SL(n)&&!e)return n;n=e}return null}var jo=class{get rootNodes(){let e=this._lView,t=e[be];return fp(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[$r]}set context(e){this._lView[$r]=e}get destroyed(){return(this._lView[le]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[nn];if(Li(e)){let t=e[sp],r=t?t.indexOf(this):-1;r>-1&&(Uv(e,r),np(t,r))}this._attachedToViewContainer=!1}lR(this._lView[be],this._lView)}onDestroy(e){Rx(this._lView,e)}markForCheck(){qw(this._cdRefInjectingView||this._lView)}detach(){this._lView[le]&=-129}reattach(){Pv(this._lView),this._lView[le]|=128}detectChanges(){this._lView[le]|=1024,NR(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,uR(this._lView[be],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e,Pv(this._lView)}},Vp=(()=>{class n{static{this.__NG_ELEMENT_ID__=Gj}}return n})(),qj=Vp,zj=class extends qj{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Mj(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new jo(i)}};function Gj(){return Hj(Ln(),it())}function Hj(n,e){return n.type&4?new zj(e,n,Rp(n,e)):null}var yJ=new RegExp(`^(\\d+)*(${x2}|${S2})*(.*)`);var Wj=()=>null;function PS(n,e){return Wj(n,e)}var pp=class{},Hv=class{},gp=class{};function Kj(n){let e=Error(`No component factory found for ${yn(n)}.`);return e[Qj]=n,e}var Qj="ngComponent";var Wv=class{resolveComponentFactory(e){throw Kj(e)}},Fp=(()=>{class n{static{this.NULL=new Wv}}return n})(),dd=class{},fu=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>Yj()}}return n})();function Yj(){let n=it(),e=Ln(),t=ys(e.index,n);return(Mo(t)?t:n)[Ft]}var Jj=(()=>{class n{static{this.\u0275prov=te({token:n,providedIn:"root",factory:()=>null})}}return n})(),yv={};var NS=new Set;function zw(n){NS.has(n)||(NS.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function kS(...n){}function Xj(){let n=typeof Zt.requestAnimationFrame=="function",e=Zt[n?"requestAnimationFrame":"setTimeout"],t=Zt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var Re=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bt(!1),this.onMicrotaskEmpty=new bt(!1),this.onStable=new bt(!1),this.onError=new bt(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=Xj().nativeRequestAnimationFrame,tB(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ee(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Zj,kS,kS);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Zj={};function Gw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function eB(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Zt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Kv(n),n.isCheckStableRunning=!0,Gw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Kv(n))}function tB(n){let e=()=>{eB(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,u)=>{if(nB(u))return t.invokeTask(i,s,o,u);try{return OS(n),t.invokeTask(i,s,o,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),VS(n)}},onInvoke:(t,r,i,s,o,u,c)=>{try{return OS(n),t.invoke(i,s,o,u,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),VS(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Kv(n),Gw(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Kv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function OS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function VS(n){n._nesting--,Gw(n)}var Qv=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bt,this.onMicrotaskEmpty=new bt,this.onStable=new bt,this.onError=new bt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function nB(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}function rB(n="zone.js",e){return n==="noop"?new Qv:n==="zone.js"?new Re(e):n}var Xa=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Xa||{}),iB={destroy(){}};function Lp(n,e){!e&&bL(Lp);let t=e?.injector??G(Cr);if(!P2(t))return iB;zw("NgAfterNextRender");let r=t.get(Hw),i=r.handler??=new Jv,s=e?.phase??Xa.MixedReadWrite,o=()=>{i.unregister(c),u()},u=t.get(Mw).onDestroy(o),c=Vi(t,()=>new Yv(s,()=>{o(),n()}));return i.register(c),{destroy:o}}var Yv=class{constructor(e,t){this.phase=e,this.callbackFn=t,this.zone=G(Re),this.errorHandler=G(Wr,{optional:!0}),G(pp,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Jv=class{constructor(){this.executingCallbacks=!1,this.buckets={[Xa.EarlyRead]:new Set,[Xa.Write]:new Set,[Xa.MixedReadWrite]:new Set,[Xa.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let t of e)t.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Hw=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=te({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Xv(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let u=e[o];if(typeof u=="number")s=u;else if(s==1)i=lS(i,u);else if(s==2){let c=u,d=e[++o];r=lS(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var mp=class extends Fp{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ps(e);return new au(t,this.ngModule)}};function FS(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function sB(n){let e=n.toLowerCase();return e==="svg"?PL:e==="math"?NL:null}var Zv=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Dp(r);let i=this.injector.get(e,yv,r);return i!==yv||t===yv?i:this.parentInjector.get(e,t,r)}},au=class extends gp{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=FS(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return FS(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=cL(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=Ge(null);try{i=i||this.ngModule;let o=i instanceof Cn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let u=o?new Zv(e,o):e,c=u.get(dd,null);if(c===null)throw new ee(407,!1);let d=u.get(Jj,null),f=u.get(Hw,null),g=u.get(pp,null),v={rendererFactory:c,sanitizer:d,inlineEffectRunner:null,afterRenderEventManager:f,changeDetectionScheduler:g},D=c.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",R=r?ij(D,r,this.componentDef.encapsulation,u):aR(D,A,sB(A)),x=512;this.componentDef.signals?x|=4096:this.componentDef.onPush||(x|=16);let k=null;R!==null&&(k=kw(R,u,!0));let j=Bw(0,null,null,1,0,null,null,null,null,null,null),O=Np(null,j,null,x,null,null,v,D,u,null,k);Dw(O);let U,X;try{let $=this.componentDef,I,m=null;$.findHostDirectiveDefs?(I=[],m=new Map,$.findHostDirectiveDefs($,I,m),I.push($)):I=[$];let _=oB(O,R),w=aB(_,R,$,I,O,v,D);X=Sx(j,Gr),R&&lB(D,$,R,r),t!==void 0&&dB(X,this.ngContentSelectors,t),U=cB(w,$,I,m,O,[hB]),$w(j,O,null)}finally{bw()}return new ew(this.componentType,U,Rp(X,O),O,X)}finally{Ge(s)}}},ew=class extends Hv{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new jo(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;Uw(s[be],s,i,e,t),this.previousInputValues.set(e,t);let o=ys(this._tNode.index,s);qw(o)}}get injector(){return new Po(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function oB(n,e){let t=n[be],r=Gr;return n[r]=e,kp(t,r,2,"#host",null)}function aB(n,e,t,r,i,s,o){let u=i[be];uB(r,n,e,o);let c=null;e!==null&&(c=kw(e,i[iu]));let d=s.rendererFactory.createRenderer(e,t),f=16;t.signals?f=4096:t.onPush&&(f=64);let g=Np(i,TR(t),null,f,i[n.index],n,s,d,null,null,c);return u.firstCreatePass&&qv(u,n,r.length-1),Op(i,g),i[n.index]=g}function uB(n,e,t,r){for(let i of n)e.mergedAttrs=sd(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Xv(e,e.mergedAttrs,!0),t!==null&&pR(r,t,e))}function cB(n,e,t,r,i,s){let o=Ln(),u=i[be],c=Kn(o,i);CR(u,i,o,t,null,r);for(let f=0;f<t.length;f++){let g=o.directiveStart+f,v=ou(i,u,g,o);Lo(v,i)}AR(u,i,o),c&&Lo(c,i);let d=ou(i,u,o.directiveStart+o.componentOffset,o);if(n[$r]=i[$r]=d,s!==null)for(let f of s)f(d,e);return wR(u,o,i),d}function lB(n,e,t,r){if(r)Av(n,t,["ng-version","17.3.12"]);else{let{attrs:i,classes:s}=lL(e.selectors[0]);i&&Av(n,t,i),s&&s.length>0&&fR(n,t,s.join(" "))}}function dB(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function hB(){let n=Ln();xw(it()[be],n)}var pu=(()=>{class n{static{this.__NG_ELEMENT_ID__=fB}}return n})();function fB(){let n=Ln();return gB(n,it())}var pB=pu,FR=class extends pB{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Rp(this._hostTNode,this._hostLView)}get injector(){return new Po(this._hostTNode,this._hostLView)}get parentInjector(){let e=Rw(this._hostTNode,this._hostLView);if($x(e)){let t=cp(e,this._hostLView),r=up(e),i=t[be].data[r+8];return new Po(i,t)}else return new Po(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=LS(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Wn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=PS(this._lContainer,e.ssrId),u=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(u,i,MS(this._hostTNode,o)),u}createComponent(e,t,r,i,s){let o=e&&!AL(e),u;if(o)u=t;else{let A=t||{};u=A.index,r=A.injector,i=A.projectableNodes,s=A.environmentInjector||A.ngModuleRef}let c=o?e:new au(ps(e)),d=r||this.parentInjector;if(!s&&c.ngModule==null){let R=(o?d:this.parentInjector).get(Cn,null);R&&(s=R)}let f=ps(c.componentType??{}),g=PS(this._lContainer,f?.id??null),v=g?.firstChild??null,D=c.create(d,i,v,s);return this.insertImpl(D.hostView,u,MS(this._hostTNode,g)),D}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(FL(i)){let u=this.indexOf(e);if(u!==-1)this.detach(u);else{let c=i[nn],d=new FR(c,c[br],c[nn]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return Pj(o,i,s,r),e.attachToViewContainerRef(),rx(_v(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=LS(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Uv(this._lContainer,t);r&&(np(_v(this._lContainer),t),lR(r[be],r))}detach(e){let t=this._adjustIndex(e,-1),r=Uv(this._lContainer,t);return r&&np(_v(this._lContainer),t)!=null?new jo(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function LS(n){return n[sp]}function _v(n){return n[sp]||(n[sp]=[])}function gB(n,e){let t,r=e[n.index];return Li(r)?t=r:(t=SR(r,e,null,n),e[n.index]=t,Op(e,t)),yB(t,e,n,r),new FR(t,n,e)}function mB(n,e){let t=n[Ft],r=t.createComment(""),i=Kn(e,n),s=Fw(t,i);return hp(t,s,r,H2(t,i),!1),r}var yB=wB,_B=()=>!1;function vB(n,e,t){return _B(n,e,t)}function wB(n,e,t,r){if(n[Oo])return;let i;t.type&8?i=Hr(r):i=mB(e,t),n[Oo]=i}function IB(n){return typeof n=="function"&&n[$_]!==void 0}function LR(n){return IB(n)&&typeof n.set=="function"}function EB(n){let e=[],t=new Map;function r(i){let s=t.get(i);if(!s){let o=n(i);t.set(i,s=o.then(CB))}return s}return yp.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(d=>{i.template=d}));let u=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=u,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let d=i.styles.length,f=i.styleUrls;i.styleUrls.forEach((g,v)=>{u.push(""),o.push(r(g).then(D=>{u[d+v]=D,f.splice(f.indexOf(g),1),f.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(d=>{u.push(d),i.styleUrl=void 0}));let c=Promise.all(o).then(()=>AB(s));e.push(c)}),DB(),Promise.all(e).then(()=>{})}var yp=new Map,TB=new Set;function DB(){let n=yp;return yp=new Map,n}function bB(){return yp.size===0}function CB(n){return typeof n=="string"?n:n.text()}function AB(n){TB.delete(n)}function SB(n){return Object.getPrototypeOf(n.prototype).constructor}function ji(n){let e=SB(n.type),t=!0,r=[n];for(;e;){let i;if(gs(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ee(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Hf(n.inputs),o.inputTransforms=Hf(n.inputTransforms),o.declaredInputs=Hf(n.declaredInputs),o.outputs=Hf(n.outputs);let u=i.hostBindings;u&&NB(n,u);let c=i.viewQuery,d=i.contentQueries;if(c&&MB(n,c),d&&PB(n,d),xB(n,i),RF(n.outputs,i.outputs),gs(i)&&i.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let u=s[o];u&&u.ngInherit&&u(n),u===ji&&(t=!1)}}e=Object.getPrototypeOf(e)}RB(r)}function xB(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function RB(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=sd(i.hostAttrs,t=sd(t,i.hostAttrs))}}function Hf(n){return n===tu?{}:n===Hn?[]:n}function MB(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function PB(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function NB(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var ms=class{},hd=class{};var _p=class extends ms{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new mp(this);let i=hx(e);this._bootstrapComponents=oR(i.bootstrap),this._r3Injector=Jx(e,t,[{provide:ms,useValue:this},{provide:Fp,useValue:this.componentFactoryResolver},...r],yn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},vp=class extends hd{constructor(e){super(),this.moduleType=e}create(e){return new _p(this.moduleType,e,[])}};function kB(n,e,t){return new _p(n,e,t)}var tw=class extends ms{constructor(e){super(),this.componentFactoryResolver=new mp(this),this.instance=null;let t=new od([...e.providers,{provide:ms,useValue:this},{provide:Fp,useValue:this.componentFactoryResolver}],e.parent||vw(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function jp(n,e,t=null){return new tw({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Bp=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Xt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function jR(n){return VB(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function OB(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function VB(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function FB(n,e,t){return n[e]=t}function Bo(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function LB(n,e,t,r){let i=Bo(n,e,t);return Bo(n,e+1,r)||i}function jB(n){return(n.flags&32)===32}function BB(n,e,t,r,i,s,o,u,c){let d=e.consts,f=kp(e,n,4,o||null,ap(d,u));bR(e,t,f,ap(d,c)),xw(e,f);let g=f.tView=Bw(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return e.queries!==null&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}function yd(n,e,t,r,i,s,o,u){let c=it(),d=An(),f=n+Gr,g=d.firstCreatePass?BB(f,d,c,e,t,r,i,s,o):d.data[f];md(g,!1);let v=UB(d,c,g,n);Aw()&&Lw(d,c,v,g),Lo(v,c);let D=SR(v,c,v,g);return c[f]=D,Op(c,D),vB(D,g,c),Iw(g)&&IR(d,c,g),o!=null&&ER(c,g,u),yd}var UB=$B;function $B(n,e,t,r){return Sw(!0),e[Ft].createComment("")}function Up(n,e,t,r){let i=it(),s=xp();if(Bo(i,s,e)){let o=An(),u=Cw();Ij(u,i,n,e,t,r)}return Up}function qB(n,e,t,r){return Bo(n,xp(),t)?e+fw(t)+r:Go}function Wf(n,e){return n<<17|e<<2}function Uo(n){return n>>17&32767}function zB(n){return(n&2)==2}function GB(n,e){return n&131071|e<<17}function nw(n){return n|2}function uu(n){return(n&131068)>>2}function vv(n,e){return n&-131069|e<<2}function HB(n){return(n&1)===1}function rw(n){return n|1}function WB(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,u=Uo(o),c=uu(o);n[r]=t;let d=!1,f;if(Array.isArray(t)){let g=t;f=g[1],(f===null||gd(g,f)>0)&&(d=!0)}else f=t;if(i)if(c!==0){let v=Uo(n[u+1]);n[r+1]=Wf(v,u),v!==0&&(n[v+1]=vv(n[v+1],r)),n[u+1]=GB(n[u+1],r)}else n[r+1]=Wf(u,0),u!==0&&(n[u+1]=vv(n[u+1],r)),u=r;else n[r+1]=Wf(c,0),u===0?u=r:n[c+1]=vv(n[c+1],r),c=r;d&&(n[r+1]=nw(n[r+1])),jS(n,f,r,!0),jS(n,f,r,!1),KB(e,f,n,r,s),o=Wf(u,c),s?e.classBindings=o:e.styleBindings=o}function KB(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&gd(s,e)>=0&&(t[r+1]=rw(t[r+1]))}function jS(n,e,t,r){let i=n[t+1],s=e===null,o=r?Uo(i):uu(i),u=!1;for(;o!==0&&(u===!1||s);){let c=n[o],d=n[o+1];QB(c,e)&&(u=!0,n[o+1]=r?rw(d):nw(d)),o=r?Uo(d):uu(d)}u&&(n[t+1]=r?nw(i):rw(i))}function QB(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?gd(n,e)>=0:!1}function gu(n,e,t){let r=it(),i=xp();if(Bo(r,i,e)){let s=An(),o=Cw();DR(s,o,r,n,e,r[Ft],t,!1)}return gu}function BS(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";Uw(n,t,s[o],o,r)}function Ho(n,e){return YB(n,e,null,!0),Ho}function YB(n,e,t,r){let i=it(),s=An(),o=JL(2);if(s.firstUpdatePass&&XB(s,n,o,r),e!==Go&&Bo(i,o,e)){let u=s.data[du()];rU(s,u,i,i[Ft],n,i[o+1]=iU(e,t),r,o)}}function JB(n,e){return e>=n.expandoStartIndex}function XB(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[du()],o=JB(n,t);sU(s,r)&&e===null&&!o&&(e=!1),e=ZB(i,s,e,r),WB(i,s,e,t,o,r)}}function ZB(n,e,t,r){let i=t2(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=wv(null,n,e,t,r),t=fd(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=wv(i,n,e,t,r),s===null){let c=eU(n,e,r);c!==void 0&&Array.isArray(c)&&(c=wv(null,n,e,c[1],r),c=fd(c,e.attrs,r),tU(n,e,r,c))}else s=nU(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function eU(n,e,t){let r=t?e.classBindings:e.styleBindings;if(uu(r)!==0)return n[Uo(r)]}function tU(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Uo(i)]=r}function nU(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=fd(r,o,t)}return fd(r,e.attrs,t)}function wv(n,e,t,r,i){let s=null,o=t.directiveEnd,u=t.directiveStylingLast;for(u===-1?u=t.directiveStart:u++;u<o&&(s=e[u],r=fd(r,s.hostAttrs,i),s!==n);)u++;return n!==null&&(t.directiveStylingLast=u),r}function fd(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),YF(n,o,t?!0:e[++s]))}return n===void 0?null:n}function rU(n,e,t,r,i,s,o,u){if(!(e.type&3))return;let c=n.data,d=c[u+1],f=HB(d)?US(c,e,t,i,uu(d),o):void 0;if(!wp(f)){wp(s)||zB(d)&&(s=US(c,null,t,i,u,o));let g=Ax(du(),t);Z2(r,o,g,i,s)}}function US(n,e,t,r,i,s){let o=e===null,u;for(;i>0;){let c=n[i],d=Array.isArray(c),f=d?c[1]:c,g=f===null,v=t[i+1];v===Go&&(v=g?Hn:void 0);let D=g?cv(v,r):f===r?v:void 0;if(d&&!wp(D)&&(D=cv(c,r)),wp(D)&&(u=D,o))return u;let A=n[i+1];i=o?Uo(A):uu(A)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(u=cv(c,r))}return u}function wp(n){return n!==void 0}function iU(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=yn(Ow(n)))),n}function sU(n,e){return(n.flags&(e?8:16))!==0}function oU(n,e,t,r,i,s){let o=e.consts,u=ap(o,i),c=kp(e,n,2,r,u);return bR(e,t,c,ap(o,s)),c.attrs!==null&&Xv(c,c.attrs,!1),c.mergedAttrs!==null&&Xv(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function oe(n,e,t,r){let i=it(),s=An(),o=Gr+n,u=i[Ft],c=s.firstCreatePass?oU(o,s,i,e,t,r):s.data[o],d=aU(s,i,c,u,e,n);i[o]=d;let f=Iw(c);return md(c,!0),pR(u,d,c),!jB(c)&&Aw()&&Lw(s,i,d,c),UL()===0&&Lo(d,i),$L(),f&&(IR(s,i,c),wR(s,c,i)),r!==null&&ER(i,c),oe}function ue(){let n=Ln();Nx()?KL():(n=n.parent,md(n,!1));let e=n;GL(e)&&HL(),qL();let t=An();return t.firstCreatePass&&(xw(t,n),Ex(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&u2(e)&&BS(t,e,it(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&c2(e)&&BS(t,e,it(),e.stylesWithoutHost,!1),ue}function _s(n,e,t,r){return oe(n,e,t,r),ue(),_s}var aU=(n,e,t,r,i,s)=>(Sw(!0),aR(r,i,i2()));var Ro=void 0;function uU(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var cU=["en",[["a","p"],["AM","PM"],Ro],[["AM","PM"],Ro,Ro],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ro,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ro,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ro,"{1} 'at' {0}",Ro],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",uU],Iv={};function Qn(n){let e=lU(n),t=$S(e);if(t)return t;let r=e.split("-")[0];if(t=$S(r),t)return t;if(r==="en")return cU;throw new ee(701,!1)}function $S(n){return n in Iv||(Iv[n]=Zt.ng&&Zt.ng.common&&Zt.ng.common.locales&&Zt.ng.common.locales[n]),Iv[n]}var _t=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(_t||{});function lU(n){return n.toLowerCase().replace(/_/g,"-")}var Ip="en-US";var dU=Ip;function hU(n){typeof n=="string"&&(dU=n.toLowerCase().replace(/_/g,"-"))}function zt(n,e,t,r){let i=it(),s=An(),o=Ln();return BR(s,i,i[Ft],o,n,e,r),zt}function fU(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let u=e[ad],c=i[s+2];return u.length>c?u[c]:null}typeof o=="string"&&(s+=2)}return null}function BR(n,e,t,r,i,s,o){let u=Iw(r),d=n.firstCreatePass&&Cj(n),f=e[$r],g=bj(e),v=!0;if(r.type&3||o){let R=Kn(r,e),x=o?o(R):R,k=g.length,j=o?U=>o(Hr(U[r.index])):r.index,O=null;if(!o&&u&&(O=fU(n,e,i,r.index)),O!==null){let U=O.__ngLastListenerFn__||O;U.__ngNextListenerFn__=s,O.__ngLastListenerFn__=s,v=!1}else{s=zS(r,e,f,s,!1);let U=t.listen(x,i,s);g.push(s,U),d&&d.push(i,j,k,k+1)}}else s=zS(r,e,f,s,!1);let D=r.outputs,A;if(v&&D!==null&&(A=D[i])){let R=A.length;if(R)for(let x=0;x<R;x+=2){let k=A[x],j=A[x+1],X=e[k][j].subscribe(s),$=g.length;g.push(s,X),d&&d.push(i,r.index,$,-($+1))}}}function qS(n,e,t,r){let i=Ge(null);try{return jr(6,e,t),t(r)!==!1}catch(s){return RR(n,s),!1}finally{jr(7,e,t),Ge(i)}}function zS(n,e,t,r,i){return function s(o){if(o===Function)return r;let u=n.componentOffset>-1?ys(n.index,e):e;qw(u);let c=qS(e,t,r,o),d=s.__ngNextListenerFn__;for(;d;)c=qS(e,t,d,o)&&c,d=d.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function Ww(n=1){return r2(n)}function pU(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function me(n,e=""){let t=it(),r=An(),i=n+Gr,s=r.firstCreatePass?kp(r,i,1,e,null):r.data[i],o=gU(r,t,s,e,n);t[i]=o,Aw()&&Lw(r,t,o,s),md(s,!1)}var gU=(n,e,t,r,i)=>(Sw(!0),k2(e[Ft],r));function Wo(n){return Ko("",n,""),Wo}function Ko(n,e,t){let r=it(),i=qB(r,n,e,t);return i!==Go&&Aj(r,du(),i),Ko}function vs(n,e,t){LR(e)&&(e=e());let r=it(),i=xp();if(Bo(r,i,e)){let s=An(),o=Cw();DR(s,o,r,n,e,r[Ft],t,!1)}return vs}function Qo(n,e){let t=LR(n);return t&&n.set(e),t}function ws(n,e){let t=it(),r=An(),i=Ln();return BR(r,t,t[Ft],i,n,e),ws}function mU(n,e,t){let r=An();if(r.firstCreatePass){let i=gs(n);iw(t,r.data,r.blueprint,i,!0),iw(e,r.data,r.blueprint,i,!1)}}function iw(n,e,t,r,i){if(n=mn(n),Array.isArray(n))for(let s=0;s<n.length;s++)iw(n[s],e,t,r,i);else{let s=An(),o=it(),u=Ln(),c=ru(n)?n:mn(n.provide),d=_x(n),f=u.providerIndexes&1048575,g=u.directiveStart,v=u.providerIndexes>>20;if(ru(n)||!n.multi){let D=new Fo(d,i,De),A=Tv(c,e,i?f:f+v,g);A===-1?(Ov(dp(u,o),s,c),Ev(s,n,e.length),e.push(c),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),t.push(D),o.push(D)):(t[A]=D,o[A]=D)}else{let D=Tv(c,e,f+v,g),A=Tv(c,e,f,f+v),R=D>=0&&t[D],x=A>=0&&t[A];if(i&&!x||!i&&!R){Ov(dp(u,o),s,c);let k=vU(i?_U:yU,t.length,i,r,d);!i&&x&&(t[A].providerFactory=k),Ev(s,n,e.length,0),e.push(c),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),t.push(k),o.push(k)}else{let k=UR(t[i?A:D],d,!i&&r);Ev(s,n,D>-1?D:A,k)}!i&&r&&x&&t[A].componentProviders++}}}function Ev(n,e,t,r){let i=ru(e),s=_L(e);if(i||s){let c=(s?mn(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let f=d.indexOf(t);f===-1?d.push(t,[r,c]):d[f+1].push(r,c)}else d.push(t,c)}}}function UR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Tv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function yU(n,e,t,r){return sw(this.multi,[])}function _U(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,u=ou(t,t[be],this.providerFactory.index,r);s=u.slice(0,o),sw(i,s);for(let c=o;c<u.length;c++)s.push(u[c])}else s=[],sw(i,s);return s}function sw(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function vU(n,e,t,r,i){let s=new Fo(n,t,De);return s.multi=[],s.index=e,s.componentProviders=0,UR(s,i,r&&!t),s}function _d(n,e=[]){return t=>{t.providersResolver=(r,i)=>mU(r,i?i(n):n,e)}}var wU=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=gx(!1,t.type),i=r.length>0?jp([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=te({token:n,providedIn:"environment",factory:()=>new n(B(Cn))})}}return n})();function $R(n){zw("NgStandalone"),n.getStandaloneInjector=e=>e.get(wU).getOrCreateStandaloneInjector(n)}function IU(n,e){let t=n[e];return t===Go?void 0:t}function EU(n,e,t,r,i,s,o){let u=e+t;return LB(n,u,i,s)?FB(n,u+2,o?r.call(o,i,s):r(i,s)):IU(n,u+2)}function Kw(n,e){let t=An(),r,i=n+Gr;t.firstCreatePass?(r=TU(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=No(r.type,!0)),o,u=bn(De);try{let c=lp(!1),d=s();return lp(c),pU(t,it(),i,d),d}finally{bn(u)}}function TU(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Qw(n,e,t,r){let i=n+Gr,s=it(),o=VL(s,i);return DU(s,i)?EU(s,QL(),e,o.transform,t,r,o):o.transform(t,r)}function DU(n,e){return n[be].data[e].pure}var Kf=null;function bU(n){Kf!==null&&(n.defaultEncapsulation!==Kf.defaultEncapsulation||n.preserveWhitespaces!==Kf.preserveWhitespaces)||(Kf=n)}var Oi=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},qR=new Oi("17.3.12"),$p=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Yw=new Y(""),vd=new Y(""),qp=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Jw||(CU(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Re.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(B(Re),B(zp),B(vd))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})(),zp=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Jw?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function CU(n){Jw=n}var Jw;function Yo(n){return!!n&&typeof n.then=="function"}function zR(n){return!!n&&typeof n.subscribe=="function"}var Gp=new Y(""),GR=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=G(Gp,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(Yo(s))t.push(s);else if(zR(s)){let o=new Promise((u,c)=>{s.subscribe({complete:u,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Xw=new Y("");function AU(){$A(()=>{throw new ee(600,!1)})}function SU(n){return n.isBoundToModule}function xU(n,e,t){try{let r=t();return Yo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function HR(n,e){return Array.isArray(e)?e.reduce(HR,n):W(W({},n),e)}var mu=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=G(Xx),this.afterRenderEffectManager=G(Hw),this.externalTestViews=new Set,this.beforeRender=new yt,this.afterTick=new yt,this.componentTypes=[],this.components=[],this.isStable=G(Bp).hasPendingTasks.pipe(se(t=>!t)),this._injector=G(Cn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof gp;if(!this._injector.get(GR).done){let v=!i&&dx(t),D=!1;throw new ee(405,D)}let o;i?o=t:o=this._injector.get(Fp).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let u=SU(o)?void 0:this._injector.get(ms),c=r||o.selector,d=o.create(Cr.NULL,[],c,u),f=d.location.nativeElement,g=d.injector.get(Yw,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),Zf(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new ee(101,!1);let r=Ge(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,Ge(r)}}detectChangesInAttachedViews(t){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===PR)throw new ee(103,!1);if(t){let s=r===0;this.beforeRender.next(s);for(let{_lView:o,notifyErrorHandler:u}of this._views)RU(o,s,u)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>ow(s))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>ow(s))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Zf(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Xw,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Zf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ee(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Zf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function RU(n,e,t){!e&&!ow(n)||MU(n,t,e)}function ow(n){return Tw(n)}function MU(n,e,t){let r;t?(r=0,n[le]|=1024):n[le]&64?r=0:r=1,NR(n,e,r)}var aw=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Hp=(()=>{class n{compileModuleSync(t){return new vp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=hx(t),s=oR(i.declarations).reduce((o,u)=>{let c=ps(u);return c&&o.push(new au(c)),o},[]);return new aw(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),PU=new Y("");function NU(n,e,t){let r=new vp(t);return Promise.resolve(r)}function GS(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var kU=(()=>{class n{constructor(){this.zone=G(Re),this.applicationRef=G(mu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function OU(n){return[{provide:Re,useFactory:n},{provide:nu,multi:!0,useFactory:()=>{let e=G(kU,{optional:!0});return()=>e.initialize()}},{provide:nu,multi:!0,useFactory:()=>{let e=G(LU);return()=>{e.initialize()}}},{provide:Xx,useFactory:VU}]}function VU(){let n=G(Re),e=G(Wr);return t=>n.runOutsideAngular(()=>e.handleError(t))}function FU(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var LU=(()=>{class n{constructor(){this.subscription=new mt,this.initialized=!1,this.zone=G(Re),this.pendingTasks=G(Bp)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Re.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Re.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function jU(){return typeof $localize<"u"&&$localize.locale||Ip}var Wp=new Y("",{providedIn:"root",factory:()=>G(Wp,Te.Optional|Te.SkipSelf)||jU()});var WR=new Y(""),KR=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=rB(r?.ngZone,FU({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{let s=kB(t.moduleType,this.injector,OU(()=>i)),o=s.injector.get(Wr,null);return i.runOutsideAngular(()=>{let u=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{Zf(this._modules,s),u.unsubscribe()})}),xU(o,i,()=>{let u=s.injector.get(GR);return u.runInitializers(),u.donePromise.then(()=>{let c=s.injector.get(Wp,Ip);return hU(c||Ip),this._moduleDoBootstrap(s),s})})})}bootstrapModule(t,r=[]){let i=HR({},r);return NU(this.injector,i,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){let r=t.injector.get(mu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(r);else throw new ee(-403,!1);this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(WR,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(B(Cr))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),rd=null,QR=new Y("");function BU(n){if(rd&&!rd.get(QR,!1))throw new ee(400,!1);AU(),rd=n;let e=n.get(KR);return qU(n),e}function Zw(n,e,t=[]){let r=`Platform: ${e}`,i=new Y(r);return(s=[])=>{let o=YR();if(!o||o.injector.get(QR,!1)){let u=[...t,...s,{provide:i,useValue:!0}];n?n(u):BU(UU(u,r))}return $U(i)}}function UU(n=[],e){return Cr.create({name:e,providers:[{provide:bp,useValue:"platform"},{provide:WR,useValue:new Set([()=>rd=null])},...n]})}function $U(n){let e=YR();if(!e)throw new ee(401,!1);return e}function YR(){return rd?.get(KR)??null}function qU(n){n.get(Pw,null)?.forEach(t=>t())}function eI(){return!1}var Jo=(()=>{class n{static{this.__NG_ELEMENT_ID__=zU}}return n})();function zU(n){return GU(Ln(),it(),(n&16)===16)}function GU(n,e,t){if(Sp(n)&&!t){let r=ys(n.index,e);return new jo(r,r)}else if(n.type&47){let r=e[zr];return new jo(r,e)}return null}var uw=class{constructor(){}supports(e){return jR(e)}create(e){return new cw(e)}},HU=(n,e)=>e,cw=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||HU}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<HS(r,i,s)?t:r,u=HS(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let d=u-i,f=c-i;if(d!=f){for(let v=0;v<d;v++){let D=v<s.length?s[v]:s[v]=0,A=D+v;f<=A&&A<d&&(s[v]=D+1)}let g=o.previousIndex;s[g]=f-d}}u!==c&&e(o,u,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!jR(e))throw new ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let u=0;u<this.length;u++)s=e[u],o=this._trackByFn(u,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,u),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,u)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,OB(e,u=>{o=this._trackByFn(i,u),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,u,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,u,o,i)),Object.is(t.item,u)||this._addIdentityChange(t,u)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new lw(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ep),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ep),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},lw=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},dw=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Ep=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new dw,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function HS(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function WS(){return new tI([new uw])}var tI=(()=>{class n{static{this.\u0275prov=te({token:n,providedIn:"root",factory:WS})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||WS()),deps:[[n,new gw,new cu]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ee(901,!1)}}return n})();var JR=Zw(null,"core",[]),XR=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(B(mu))}}static{this.\u0275mod=jt({type:n})}static{this.\u0275inj=Lt({})}}return n})();function wd(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function ZR(n){let e=ps(n);if(!e)return null;let t=new au(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var sM=null;function Qr(){return sM}function oM(n){sM??=n}var ng=class{};var Rn=new Y(""),cI=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:()=>G(QU),providedIn:"platform"})}}return n})(),aM=new Y(""),QU=(()=>{class n extends cI{constructor(){super(),this._doc=G(Rn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Qr().getBaseHref(this._doc)}onPopState(t){let r=Qr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Qr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function lI(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function eM(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Ui(n){return n&&n[0]!=="?"?"?"+n:n}var Xo=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:()=>G(dI),providedIn:"root"})}}return n})(),uM=new Y(""),dI=(()=>{class n extends Xo{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??G(Rn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return lI(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ui(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ui(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ui(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(B(cI),B(uM,8))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),cM=(()=>{class n extends Xo{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=lI(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ui(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ui(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(B(cI),B(uM,8))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})(),yu=(()=>{class n{constructor(t){this._subject=new bt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=XU(eM(tM(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ui(r))}normalize(t){return n.stripTrailingSlash(JU(this._basePath,tM(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ui(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ui(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Ui}static{this.joinWithSlash=lI}static{this.stripTrailingSlash=eM}static{this.\u0275fac=function(r){return new(r||n)(B(Xo))}}static{this.\u0275prov=te({token:n,factory:()=>YU(),providedIn:"root"})}}return n})();function YU(){return new yu(B(Xo))}function JU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function tM(n){return n.replace(/\/index.html$/,"")}function XU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var _n=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(_n||{}),Ze=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Ze||{}),jn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(jn||{}),Is={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function ZU(n){return Qn(n)[_t.LocaleId]}function e$(n,e,t){let r=Qn(n),i=[r[_t.DayPeriodsFormat],r[_t.DayPeriodsStandalone]],s=Yn(i,e);return Yn(s,t)}function t$(n,e,t){let r=Qn(n),i=[r[_t.DaysFormat],r[_t.DaysStandalone]],s=Yn(i,e);return Yn(s,t)}function n$(n,e,t){let r=Qn(n),i=[r[_t.MonthsFormat],r[_t.MonthsStandalone]],s=Yn(i,e);return Yn(s,t)}function r$(n,e){let r=Qn(n)[_t.Eras];return Yn(r,e)}function Kp(n,e){let t=Qn(n);return Yn(t[_t.DateFormat],e)}function Qp(n,e){let t=Qn(n);return Yn(t[_t.TimeFormat],e)}function Yp(n,e){let r=Qn(n)[_t.DateTimeFormat];return Yn(r,e)}function sg(n,e){let t=Qn(n),r=t[_t.NumberSymbols][e];if(typeof r>"u"){if(e===Is.CurrencyDecimal)return t[_t.NumberSymbols][Is.Decimal];if(e===Is.CurrencyGroup)return t[_t.NumberSymbols][Is.Group]}return r}function lM(n){if(!n[_t.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[_t.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function i$(n){let e=Qn(n);return lM(e),(e[_t.ExtraData][2]||[]).map(r=>typeof r=="string"?nI(r):[nI(r[0]),nI(r[1])])}function s$(n,e,t){let r=Qn(n);lM(r);let i=[r[_t.ExtraData][0],r[_t.ExtraData][1]],s=Yn(i,e)||[];return Yn(s,t)||[]}function Yn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function nI(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var o$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Jp={},a$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,$i=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}($i||{}),We=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(We||{}),He=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(He||{});function u$(n,e,t,r){let i=y$(n);e=Bi(t,e)||e;let o=[],u;for(;e;)if(u=a$.exec(e),u){o=o.concat(u.slice(1));let f=o.pop();if(!f)break;e=f}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=hM(r,c),i=m$(i,r,!0));let d="";return o.forEach(f=>{let g=p$(f);d+=g?g(i,t,c):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function rg(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Bi(n,e){let t=ZU(n);if(Jp[t]??={},Jp[t][e])return Jp[t][e];let r="";switch(e){case"shortDate":r=Kp(n,jn.Short);break;case"mediumDate":r=Kp(n,jn.Medium);break;case"longDate":r=Kp(n,jn.Long);break;case"fullDate":r=Kp(n,jn.Full);break;case"shortTime":r=Qp(n,jn.Short);break;case"mediumTime":r=Qp(n,jn.Medium);break;case"longTime":r=Qp(n,jn.Long);break;case"fullTime":r=Qp(n,jn.Full);break;case"short":let i=Bi(n,"shortTime"),s=Bi(n,"shortDate");r=Xp(Yp(n,jn.Short),[i,s]);break;case"medium":let o=Bi(n,"mediumTime"),u=Bi(n,"mediumDate");r=Xp(Yp(n,jn.Medium),[o,u]);break;case"long":let c=Bi(n,"longTime"),d=Bi(n,"longDate");r=Xp(Yp(n,jn.Long),[c,d]);break;case"full":let f=Bi(n,"fullTime"),g=Bi(n,"fullDate");r=Xp(Yp(n,jn.Full),[f,g]);break}return r&&(Jp[t][e]=r),r}function Xp(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Ar(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function c$(n,e){return Ar(n,3).substring(0,e)}function Ct(n,e,t=0,r=!1,i=!1){return function(s,o){let u=l$(n,s);if((t>0||u>-t)&&(u+=t),n===We.Hours)u===0&&t===-12&&(u=12);else if(n===We.FractionalSeconds)return c$(u,e);let c=sg(o,Is.MinusSign);return Ar(u,e,c,r,i)}}function l$(n,e){switch(n){case We.FullYear:return e.getFullYear();case We.Month:return e.getMonth();case We.Date:return e.getDate();case We.Hours:return e.getHours();case We.Minutes:return e.getMinutes();case We.Seconds:return e.getSeconds();case We.FractionalSeconds:return e.getMilliseconds();case We.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function tt(n,e,t=_n.Format,r=!1){return function(i,s){return d$(i,s,n,e,t,r)}}function d$(n,e,t,r,i,s){switch(t){case He.Months:return n$(e,i,r)[n.getMonth()];case He.Days:return t$(e,i,r)[n.getDay()];case He.DayPeriods:let o=n.getHours(),u=n.getMinutes();if(s){let d=i$(e),f=s$(e,i,r),g=d.findIndex(v=>{if(Array.isArray(v)){let[D,A]=v,R=o>=D.hours&&u>=D.minutes,x=o<A.hours||o===A.hours&&u<A.minutes;if(D.hours<A.hours){if(R&&x)return!0}else if(R||x)return!0}else if(v.hours===o&&v.minutes===u)return!0;return!1});if(g!==-1)return f[g]}return e$(e,i,r)[o<12?0:1];case He.Eras:return r$(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function Zp(n){return function(e,t,r){let i=-1*r,s=sg(t,Is.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case $i.Short:return(i>=0?"+":"")+Ar(o,2,s)+Ar(Math.abs(i%60),2,s);case $i.ShortGMT:return"GMT"+(i>=0?"+":"")+Ar(o,1,s);case $i.Long:return"GMT"+(i>=0?"+":"")+Ar(o,2,s)+":"+Ar(Math.abs(i%60),2,s);case $i.Extended:return r===0?"Z":(i>=0?"+":"")+Ar(o,2,s)+":"+Ar(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}var h$=0,tg=4;function f$(n){let e=rg(n,h$,1).getDay();return rg(n,0,1+(e<=tg?tg:tg+7)-e)}function dM(n){let e=n.getDay(),t=e===0?-3:tg-e;return rg(n.getFullYear(),n.getMonth(),n.getDate()+t)}function rI(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=dM(t),o=f$(s.getFullYear()),u=s.getTime()-o.getTime();i=1+Math.round(u/6048e5)}return Ar(i,n,sg(r,Is.MinusSign))}}function eg(n,e=!1){return function(t,r){let s=dM(t).getFullYear();return Ar(s,n,sg(r,Is.MinusSign),e)}}var iI={};function p$(n){if(iI[n])return iI[n];let e;switch(n){case"G":case"GG":case"GGG":e=tt(He.Eras,Ze.Abbreviated);break;case"GGGG":e=tt(He.Eras,Ze.Wide);break;case"GGGGG":e=tt(He.Eras,Ze.Narrow);break;case"y":e=Ct(We.FullYear,1,0,!1,!0);break;case"yy":e=Ct(We.FullYear,2,0,!0,!0);break;case"yyy":e=Ct(We.FullYear,3,0,!1,!0);break;case"yyyy":e=Ct(We.FullYear,4,0,!1,!0);break;case"Y":e=eg(1);break;case"YY":e=eg(2,!0);break;case"YYY":e=eg(3);break;case"YYYY":e=eg(4);break;case"M":case"L":e=Ct(We.Month,1,1);break;case"MM":case"LL":e=Ct(We.Month,2,1);break;case"MMM":e=tt(He.Months,Ze.Abbreviated);break;case"MMMM":e=tt(He.Months,Ze.Wide);break;case"MMMMM":e=tt(He.Months,Ze.Narrow);break;case"LLL":e=tt(He.Months,Ze.Abbreviated,_n.Standalone);break;case"LLLL":e=tt(He.Months,Ze.Wide,_n.Standalone);break;case"LLLLL":e=tt(He.Months,Ze.Narrow,_n.Standalone);break;case"w":e=rI(1);break;case"ww":e=rI(2);break;case"W":e=rI(1,!0);break;case"d":e=Ct(We.Date,1);break;case"dd":e=Ct(We.Date,2);break;case"c":case"cc":e=Ct(We.Day,1);break;case"ccc":e=tt(He.Days,Ze.Abbreviated,_n.Standalone);break;case"cccc":e=tt(He.Days,Ze.Wide,_n.Standalone);break;case"ccccc":e=tt(He.Days,Ze.Narrow,_n.Standalone);break;case"cccccc":e=tt(He.Days,Ze.Short,_n.Standalone);break;case"E":case"EE":case"EEE":e=tt(He.Days,Ze.Abbreviated);break;case"EEEE":e=tt(He.Days,Ze.Wide);break;case"EEEEE":e=tt(He.Days,Ze.Narrow);break;case"EEEEEE":e=tt(He.Days,Ze.Short);break;case"a":case"aa":case"aaa":e=tt(He.DayPeriods,Ze.Abbreviated);break;case"aaaa":e=tt(He.DayPeriods,Ze.Wide);break;case"aaaaa":e=tt(He.DayPeriods,Ze.Narrow);break;case"b":case"bb":case"bbb":e=tt(He.DayPeriods,Ze.Abbreviated,_n.Standalone,!0);break;case"bbbb":e=tt(He.DayPeriods,Ze.Wide,_n.Standalone,!0);break;case"bbbbb":e=tt(He.DayPeriods,Ze.Narrow,_n.Standalone,!0);break;case"B":case"BB":case"BBB":e=tt(He.DayPeriods,Ze.Abbreviated,_n.Format,!0);break;case"BBBB":e=tt(He.DayPeriods,Ze.Wide,_n.Format,!0);break;case"BBBBB":e=tt(He.DayPeriods,Ze.Narrow,_n.Format,!0);break;case"h":e=Ct(We.Hours,1,-12);break;case"hh":e=Ct(We.Hours,2,-12);break;case"H":e=Ct(We.Hours,1);break;case"HH":e=Ct(We.Hours,2);break;case"m":e=Ct(We.Minutes,1);break;case"mm":e=Ct(We.Minutes,2);break;case"s":e=Ct(We.Seconds,1);break;case"ss":e=Ct(We.Seconds,2);break;case"S":e=Ct(We.FractionalSeconds,1);break;case"SS":e=Ct(We.FractionalSeconds,2);break;case"SSS":e=Ct(We.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Zp($i.Short);break;case"ZZZZZ":e=Zp($i.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Zp($i.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Zp($i.Long);break;default:return null}return iI[n]=e,e}function hM(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function g$(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function m$(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),s=hM(e,i);return g$(n,r*(s-i))}function y$(n){if(nM(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(u=>+u);return rg(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(o$))return _$(r)}let e=new Date(n);if(!nM(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function _$(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,u=Number(n[5]||0)-r,c=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,u,c,d),e}function nM(n){return n instanceof Date&&!isNaN(n.valueOf())}function fM(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var sI=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},pM=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new sI(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let u=r.get(s);r.move(u,o),rM(u,i)}});for(let i=0,s=r.length;i<s;i++){let u=r.get(i).context;u.index=i,u.count=s,u.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);rM(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(De(pu),De(Vp),De(tI))}}static{this.\u0275dir=rn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function rM(n,e){n.context.$implicit=e.item}var gM=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new oI,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){iM("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){iM("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(De(pu),De(Vp))}}static{this.\u0275dir=rn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),oI=class{constructor(){this.$implicit=null,this.ngIf=null}};function iM(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${yn(e)}'.`)}function v$(n,e){return new ee(2100,!1)}var w$="mediumDate",I$=new Y(""),E$=new Y(""),mM=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??w$,u=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return u$(t,o,s||this.locale,u)}catch(o){throw v$(n,o.message)}}static{this.\u0275fac=function(r){return new(r||n)(De(Wp,16),De(I$,24),De(E$,24))}}static{this.\u0275pipe=ux({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var yM=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=jt({type:n})}static{this.\u0275inj=Lt({})}}return n})(),hI="browser",T$="server";function D$(n){return n===hI}function Zo(n){return n===T$}var _M=(()=>{class n{static{this.\u0275prov=te({token:n,providedIn:"root",factory:()=>D$(G(Sn))?new aI(G(Rn),window):new uI})}}return n})(),aI=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=b$(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function b$(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var uI=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ig=class{};var gI=class extends ng{constructor(){super(...arguments),this.supportsDOMEvents=!0}},mI=class n extends gI{static makeCurrent(){oM(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=S$();return t==null?null:x$(t)}resetBaseElement(){Id=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fM(document.cookie,e)}},Id=null;function S$(){return Id=Id||document.querySelector("base"),Id?Id.getAttribute("href"):null}function x$(n){return new URL(n,document.baseURI).pathname}var yI=class{addToWindow(e){Zt.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new ee(5103,!1);return s},Zt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Zt.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Zt.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(u=>{u.whenStable(o)})};Zt.frameworkStabilizers||(Zt.frameworkStabilizers=[]),Zt.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Qr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},R$=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})(),_I=new Y(""),EM=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ee(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(B(_I),B(Re))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})(),og=class{constructor(e){this._doc=e}},fI="ng-app-id",TM=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Zo(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${fI}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(fI),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(fI,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(B(Rn),B(Mp),B(Nw,8),B(Sn))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})(),pI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},wI=/%COMP%/g,DM="%COMP%",M$=`_nghost-${DM}`,P$=`_ngcontent-${DM}`,N$=!0,k$=new Y("",{providedIn:"root",factory:()=>N$});function O$(n){return P$.replace(wI,n)}function V$(n){return M$.replace(wI,n)}function bM(n,e){return e.map(t=>t.replace(wI,n))}var vM=(()=>{class n{constructor(t,r,i,s,o,u,c,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=u,this.ngZone=c,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Zo(u),this.defaultRenderer=new Ed(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ur.ShadowDom&&(r=Qe(W({},r),{encapsulation:Ur.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof ag?i.applyToHost(t):i instanceof Td&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,u=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Ur.Emulated:s=new ag(c,d,r,this.appId,f,o,u,g);break;case Ur.ShadowDom:return new vI(c,d,t,r,o,u,this.nonce,g);default:s=new Td(c,d,r,f,o,u,g);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(B(EM),B(TM),B(Mp),B(k$),B(Rn),B(Sn),B(Re),B(Nw))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})(),Ed=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(pI[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(wM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(wM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ee(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=pI[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=pI[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ki.DashCase|ki.Important)?e.style.setProperty(t,r,i&ki.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ki.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Qr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function wM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var vI=class extends Ed{constructor(e,t,r,i,s,o,u,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=bM(i.id,i.styles);for(let f of d){let g=document.createElement("style");u&&g.setAttribute("nonce",u),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Td=class extends Ed{constructor(e,t,r,i,s,o,u,c){super(e,s,o,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?bM(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ag=class extends Td{constructor(e,t,r,i,s,o,u,c){let d=i+"-"+r.id;super(e,t,r,s,o,u,c,d),this.contentAttr=O$(d),this.hostAttr=V$(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},F$=(()=>{class n extends og{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(B(Rn))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})(),IM=["alt","control","meta","shift"],L$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},j$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},B$=(()=>{class n extends og{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qr().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),o="code."),IM.forEach(d=>{let f=r.indexOf(d);f>-1&&(r.splice(f,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=L$[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),IM.forEach(o=>{if(o!==i){let u=j$[o];u(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(B(Rn))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})();function U$(){mI.makeCurrent()}function $$(){return new Wr}function q$(){return iR(document),document}var z$=[{provide:Sn,useValue:hI},{provide:Pw,useValue:U$,multi:!0},{provide:Rn,useFactory:q$,deps:[]}],CM=Zw(JR,"browser",z$),G$=new Y(""),H$=[{provide:vd,useClass:yI,deps:[]},{provide:Yw,useClass:qp,deps:[Re,zp,vd]},{provide:qp,useClass:qp,deps:[Re,zp,vd]}],W$=[{provide:bp,useValue:"root"},{provide:Wr,useFactory:$$,deps:[]},{provide:_I,useClass:F$,multi:!0,deps:[Rn,Re,Sn]},{provide:_I,useClass:B$,multi:!0,deps:[Rn]},vM,TM,EM,{provide:dd,useExisting:vM},{provide:ig,useClass:R$,deps:[]},[]],AM=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Mp,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(B(G$,12))}}static{this.\u0275mod=jt({type:n})}static{this.\u0275inj=Lt({providers:[...W$,...H$],imports:[yM,XR]})}}return n})();var SM=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(B(Rn))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var we="primary",Ld=Symbol("RouteTitle"),bI=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Eu(n){return new bI(n)}function K$(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],u=n[s];if(o.startsWith(":"))i[o.substring(1)]=u;else if(o!==u.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Q$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Yr(n[t],e[t]))return!1;return!0}function Yr(n,e){let t=n?CI(n):void 0,r=e?CI(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!LM(n[i],e[i]))return!1;return!0}function CI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function LM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function jM(n){return n.length>0?n[n.length-1]:null}function bs(n){return nv(n)?n:Yo(n)?xe(Promise.resolve(n)):ie(n)}var Y$={exact:UM,subset:$M},BM={exact:J$,subset:X$,ignored:()=>!0};function RM(n,e,t){return Y$[t.paths](n.root,e.root,t.matrixParams)&&BM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function J$(n,e){return Yr(n,e)}function UM(n,e,t){if(!ta(n.segments,e.segments)||!lg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!UM(n.children[r],e.children[r],t))return!1;return!0}function X$(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>LM(n[t],e[t]))}function $M(n,e,t){return qM(n,e,e.segments,t)}function qM(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ta(i,t)||e.hasChildren()||!lg(i,t,r))}else if(n.segments.length===t.length){if(!ta(n.segments,t)||!lg(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!$M(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!ta(n.segments,i)||!lg(n.segments,i,r)||!n.children[we]?!1:qM(n.children[we],e,s,r)}}function lg(n,e,t){return e.every((r,i)=>BM[t](n[i].parameters,r.parameters))}var Es=class{constructor(e=new Ke([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Eu(this.queryParams),this._queryParamMap}toString(){return tq.serialize(this)}},Ke=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dg(this)}},ea=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Eu(this.parameters),this._parameterMap}toString(){return GM(this)}};function Z$(n,e){return ta(n,e)&&n.every((t,r)=>Yr(t.parameters,e[r].parameters))}function ta(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function eq(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===we&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==we&&(t=t.concat(e(i,r)))}),t}var jd=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:()=>new Rd,providedIn:"root"})}}return n})(),Rd=class{parse(e){let t=new SI(e);return new Es(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Dd(e.root,!0)}`,r=iq(e.queryParams),i=typeof e.fragment=="string"?`#${nq(e.fragment)}`:"";return`${t}${r}${i}`}},tq=new Rd;function dg(n){return n.segments.map(e=>GM(e)).join("/")}function Dd(n,e){if(!n.hasChildren())return dg(n);if(e){let t=n.children[we]?Dd(n.children[we],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==we&&r.push(`${i}:${Dd(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=eq(n,(r,i)=>i===we?[Dd(n.children[we],!1)]:[`${i}:${Dd(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[we]!=null?`${dg(n)}/${t[0]}`:`${dg(n)}/(${t.join("//")})`}}function zM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ug(n){return zM(n).replace(/%3B/gi,";")}function nq(n){return encodeURI(n)}function AI(n){return zM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hg(n){return decodeURIComponent(n)}function MM(n){return hg(n.replace(/\+/g,"%20"))}function GM(n){return`${AI(n.path)}${rq(n.parameters)}`}function rq(n){return Object.entries(n).map(([e,t])=>`;${AI(e)}=${AI(t)}`).join("")}function iq(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ug(t)}=${ug(i)}`).join("&"):`${ug(t)}=${ug(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var sq=/^[^\/()?;#]+/;function II(n){let e=n.match(sq);return e?e[0]:""}var oq=/^[^\/()?;=#]+/;function aq(n){let e=n.match(oq);return e?e[0]:""}var uq=/^[^=?&#]+/;function cq(n){let e=n.match(uq);return e?e[0]:""}var lq=/^[^&#]+/;function dq(n){let e=n.match(lq);return e?e[0]:""}var SI=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ke([],{}):new Ke([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[we]=new Ke(e,t)),r}parseSegment(){let e=II(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ee(4009,!1);return this.capture(e),new ea(hg(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=aq(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=II(this.remaining);i&&(r=i,this.capture(r))}e[hg(t)]=hg(r)}parseQueryParam(e){let t=cq(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=dq(this.remaining);o&&(r=o,this.capture(r))}let i=MM(t),s=MM(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=II(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ee(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=we);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[we]:new Ke([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ee(4011,!1)}};function HM(n){return n.segments.length>0?new Ke([],{[we]:n}):n}function WM(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=WM(i);if(r===we&&s.segments.length===0&&s.hasChildren())for(let[o,u]of Object.entries(s.children))e[o]=u;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Ke(n.segments,e);return hq(t)}function hq(n){if(n.numberOfChildren===1&&n.children[we]){let e=n.children[we];return new Ke(n.segments.concat(e.segments),e.children)}return n}function Tu(n){return n instanceof Es}function fq(n,e,t=null,r=null){let i=KM(n);return QM(i,e,t,r)}function KM(n){let e;function t(s){let o={};for(let c of s.children){let d=t(c);o[c.outlet]=d}let u=new Ke(s.url,o);return s===n&&(e=u),u}let r=t(n.root),i=HM(r);return e??i}function QM(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return EI(i,i,i,t,r);let s=pq(e);if(s.toRoot())return EI(i,i,new Ke([],{}),t,r);let o=gq(s,i,n),u=o.processChildren?Ad(o.segmentGroup,o.index,s.commands):JM(o.segmentGroup,o.index,s.commands);return EI(i,o.segmentGroup,u,t,r)}function fg(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Md(n){return typeof n=="object"&&n!=null&&n.outlets}function EI(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,d])=>{s[c]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let o;n===e?o=t:o=YM(n,e,t);let u=HM(WM(o));return new Es(u,s,i)}function YM(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=YM(s,e,t)}),new Ke(n.segments,r)}var pg=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&fg(r[0]))throw new ee(4003,!1);let i=r.find(Md);if(i&&i!==jM(r))throw new ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function pq(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new pg(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let u={};return Object.entries(s.outlets).forEach(([c,d])=>{u[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:u}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((u,c)=>{c==0&&u==="."||(c==0&&u===""?t=!0:u===".."?e++:u!=""&&i.push(u))}),i):[...i,s]},[]);return new pg(t,e,r)}var wu=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function gq(n,e,t){if(n.isAbsolute)return new wu(e,!0,0);if(!t)return new wu(e,!1,NaN);if(t.parent===null)return new wu(t,!0,0);let r=fg(n.commands[0])?0:1,i=t.segments.length-1+r;return mq(t,i,n.numberOfDoubleDots)}function mq(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ee(4005,!1);i=r.segments.length}return new wu(r,!1,i-s)}function yq(n){return Md(n[0])?n[0].outlets:{[we]:n}}function JM(n,e,t){if(n??=new Ke([],{}),n.segments.length===0&&n.hasChildren())return Ad(n,e,t);let r=_q(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Ke(n.segments.slice(0,r.pathIndex),{});return s.children[we]=new Ke(n.segments.slice(r.pathIndex),n.children),Ad(s,0,i)}else return r.match&&i.length===0?new Ke(n.segments,{}):r.match&&!n.hasChildren()?xI(n,e,t):r.match?Ad(n,0,i):xI(n,e,t)}function Ad(n,e,t){if(t.length===0)return new Ke(n.segments,{});{let r=yq(t),i={};if(Object.keys(r).some(s=>s!==we)&&n.children[we]&&n.numberOfChildren===1&&n.children[we].segments.length===0){let s=Ad(n.children[we],e,t);return new Ke(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=JM(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ke(n.segments,i)}}function _q(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],u=t[r];if(Md(u))break;let c=`${u}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!NM(c,d,o))return s;r+=2}else{if(!NM(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function xI(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Md(s)){let c=vq(s.outlets);return new Ke(r,c)}if(i===0&&fg(t[0])){let c=n.segments[e];r.push(new ea(c.path,PM(t[0]))),i++;continue}let o=Md(s)?s.outlets[we]:`${s}`,u=i<t.length-1?t[i+1]:null;o&&u&&fg(u)?(r.push(new ea(o,PM(u))),i+=2):(r.push(new ea(o,{})),i++)}return new Ke(r,{})}function vq(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=xI(new Ke([],{}),0,r))}),e}function PM(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function NM(n,e,t){return n==t.path&&Yr(e,t.parameters)}var Sd="imperative",Gt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Gt||{}),Jn=class{constructor(e,t){this.id=e,this.url=t}},Du=class extends Jn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Gt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},qi=class extends Jn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Gt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Un=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Un||{}),gg=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(gg||{}),Ts=class extends Jn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Gt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ds=class extends Jn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Gt.NavigationSkipped}},Pd=class extends Jn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Gt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},mg=class extends Jn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Gt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},RI=class extends Jn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Gt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},MI=class extends Jn{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Gt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},PI=class extends Jn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Gt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},NI=class extends Jn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Gt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kI=class{constructor(e){this.route=e,this.type=Gt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},OI=class{constructor(e){this.route=e,this.type=Gt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},VI=class{constructor(e){this.snapshot=e,this.type=Gt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},FI=class{constructor(e){this.snapshot=e,this.type=Gt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},LI=class{constructor(e){this.snapshot=e,this.type=Gt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jI=class{constructor(e){this.snapshot=e,this.type=Gt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yg=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Gt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Nd=class{},kd=class{constructor(e){this.url=e}};var BI=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Bd,this.attachRef=null}},Bd=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new BI,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_g=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=UI(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=UI(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=$I(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $I(e,this._root).map(t=>t.value)}};function UI(n,e){if(n===e.value)return e;for(let t of e.children){let r=UI(n,t);if(r)return r}return null}function $I(n,e){if(n===e.value)return[e];for(let t of e.children){let r=$I(n,t);if(r.length)return r.unshift(e),r}return[]}var Bn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function vu(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var vg=class extends _g{constructor(e,t){super(e),this.snapshot=t,XI(this,e)}toString(){return this.snapshot.toString()}};function XM(n){let e=wq(n),t=new Xt([new ea("",{})]),r=new Xt({}),i=new Xt({}),s=new Xt({}),o=new Xt(""),u=new bu(t,r,s,o,i,we,n,e.root);return u.snapshot=e.root,new vg(new Bn(u,[]),e)}function wq(n){let e={},t={},r={},i="",s=new Od([],e,r,i,t,we,n,null,{});return new wg("",new Bn(s,[]))}var bu=class{constructor(e,t,r,i,s,o,u,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=u,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(se(d=>d[Ld]))??ie(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>Eu(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>Eu(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function JI(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:W(W({},e.params),n.params),data:W(W({},e.data),n.data),resolve:W(W(W(W({},n.data),e.data),i?.data),n._resolvedData)}:r={params:W({},n.params),data:W({},n.data),resolve:W(W({},n.data),n._resolvedData??{})},i&&eP(i)&&(r.resolve[Ld]=i.title),r}var Od=class{get title(){return this.data?.[Ld]}constructor(e,t,r,i,s,o,u,c,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=u,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Eu(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Eu(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},wg=class extends _g{constructor(e,t){super(t),this.url=e,XI(this,t)}toString(){return ZM(this._root)}};function XI(n,e){e.value._routerState=n,e.children.forEach(t=>XI(n,t))}function ZM(n){let e=n.children.length>0?` { ${n.children.map(ZM).join(", ")} } `:"";return`${n.value}${e}`}function TI(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Yr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Yr(e.params,t.params)||n.paramsSubject.next(t.params),Q$(e.url,t.url)||n.urlSubject.next(t.url),Yr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function qI(n,e){let t=Yr(n.params,e.params)&&Z$(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||qI(n.parent,e.parent))}function eP(n){return typeof n.title=="string"||n.title===null}var ZI=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=we,this.activateEvents=new bt,this.deactivateEvents=new bt,this.attachEvents=new bt,this.detachEvents=new bt,this.parentContexts=G(Bd),this.location=G(pu),this.changeDetector=G(Jo),this.environmentInjector=G(Cn),this.inputBinder=G(bg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ee(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ee(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new zI(t,u,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=rn({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[qo]})}}return n})(),zI=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===bu?this.route:e===Bd?this.childContexts:this.parent.get(e,t)}},bg=new Y(""),kM=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ed([r.queryParams,r.params,r.data]).pipe(pt(([s,o,u],c)=>(u=W(W(W({},s),o),u),c===0?ie(u):Promise.resolve(u)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=ZR(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:u}of o.inputs)t.activatedComponentRef.setInput(u,s[u])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})();function Iq(n,e,t){let r=Vd(n,e._root,t?t._root:void 0);return new vg(r,e)}function Vd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Eq(n,e,t);return new Bn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(u=>Vd(n,u)),o}}let r=Tq(e.value),i=e.children.map(s=>Vd(n,s));return new Bn(r,i)}}function Eq(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Vd(n,r,i);return Vd(n,r)})}function Tq(n){return new bu(new Xt(n.url),new Xt(n.params),new Xt(n.queryParams),new Xt(n.fragment),new Xt(n.data),n.outlet,n.component,n)}var tP="ngNavigationCancelingError";function nP(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Tu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=rP(!1,Un.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function rP(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[tP]=!0,t.cancellationCode=e,t}function Dq(n){return iP(n)&&Tu(n.url)}function iP(n){return!!n&&n[tP]}var bq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Kr({type:n,selectors:[["ng-component"]],standalone:!0,features:[$R],decls:1,vars:0,template:function(r,i){r&1&&_s(0,"router-outlet")},dependencies:[ZI],encapsulation:2})}}return n})();function Cq(n,e){return n.providers&&!n._injector&&(n._injector=jp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function eE(n){let e=n.children&&n.children.map(eE),t=e?Qe(W({},n),{children:e}):W({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==we&&(t.component=bq),t}function Jr(n){return n.outlet||we}function Aq(n,e){let t=n.filter(r=>Jr(r)===e);return t.push(...n.filter(r=>Jr(r)!==e)),t}function Ud(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Sq=(n,e,t,r)=>se(i=>(new GI(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),GI=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),TI(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=vu(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=vu(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:u})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=vu(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=vu(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new jI(s.value.snapshot))}),e.children.length&&this.forwardEvent(new FI(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(TI(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let u=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(u.contexts),o.attachRef=u.componentRef,o.route=u.route.value,o.outlet&&o.outlet.attach(u.componentRef,u.route.value),TI(u.route.value),this.activateChildRoutes(e,null,o.children)}else{let u=Ud(i.snapshot);o.attachRef=null,o.route=i,o.injector=u,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Ig=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Iu=class{constructor(e,t){this.component=e,this.route=t}};function xq(n,e,t){let r=n._root,i=e?e._root:null;return bd(r,i,t,[r.value])}function Rq(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Au(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!YS(n)?n:e.get(n):r}function bd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=vu(e);return n.children.forEach(o=>{Mq(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,u])=>xd(u,t.getContext(o),i)),i}function Mq(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,u=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Pq(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ig(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?bd(n,e,u?u.children:null,r,i):bd(n,e,t,r,i),c&&u&&u.outlet&&u.outlet.isActivated&&i.canDeactivateChecks.push(new Iu(u.outlet.component,o))}else o&&xd(e,u,i),i.canActivateChecks.push(new Ig(r)),s.component?bd(n,null,u?u.children:null,r,i):bd(n,null,t,r,i);return i}function Pq(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ta(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ta(n.url,e.url)||!Yr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qI(n,e)||!Yr(n.queryParams,e.queryParams);case"paramsChange":default:return!qI(n,e)}}function xd(n,e,t){let r=vu(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?xd(o,e.children.getContext(s),t):xd(o,null,t):xd(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Iu(e.outlet.component,i)):t.canDeactivateChecks.push(new Iu(null,i)):t.canDeactivateChecks.push(new Iu(null,i))}function $d(n){return typeof n=="function"}function Nq(n){return typeof n=="boolean"}function kq(n){return n&&$d(n.canLoad)}function Oq(n){return n&&$d(n.canActivate)}function Vq(n){return n&&$d(n.canActivateChild)}function Fq(n){return n&&$d(n.canDeactivate)}function Lq(n){return n&&$d(n.canMatch)}function sP(n){return n instanceof Pi||n?.name==="EmptyError"}var cg=Symbol("INITIAL_VALUE");function Cu(){return pt(n=>ed(n.map(e=>e.pipe(Ni(1),ds(cg)))).pipe(se(e=>{for(let t of e)if(t!==!0){if(t===cg)return cg;if(t===!1||t instanceof Es)return t}return!0}),qt(e=>e!==cg),Ni(1)))}function jq(n,e){return Dt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?ie(Qe(W({},t),{guardsResult:!0})):Bq(o,r,i,n).pipe(Dt(u=>u&&Nq(u)?Uq(r,s,n,e):ie(u)),se(u=>Qe(W({},t),{guardsResult:u})))})}function Bq(n,e,t,r){return xe(n).pipe(Dt(i=>Hq(i.component,i.route,t,e,r)),Gn(i=>i!==!0,!0))}function Uq(n,e,t,r){return xe(e).pipe(xo(i=>Ha(qq(i.route.parent,r),$q(i.route,r),Gq(n,i.path,t),zq(n,i.route,t))),Gn(i=>i!==!0,!0))}function $q(n,e){return n!==null&&e&&e(new LI(n)),ie(!0)}function qq(n,e){return n!==null&&e&&e(new VI(n)),ie(!0)}function zq(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ie(!0);let i=r.map(s=>Bf(()=>{let o=Ud(e)??t,u=Au(s,o),c=Oq(u)?u.canActivate(e,n):Vi(o,()=>u(e,n));return bs(c).pipe(Gn())}));return ie(i).pipe(Cu())}function Gq(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Rq(o)).filter(o=>o!==null).map(o=>Bf(()=>{let u=o.guards.map(c=>{let d=Ud(o.node)??t,f=Au(c,d),g=Vq(f)?f.canActivateChild(r,n):Vi(d,()=>f(r,n));return bs(g).pipe(Gn())});return ie(u).pipe(Cu())}));return ie(s).pipe(Cu())}function Hq(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ie(!0);let o=s.map(u=>{let c=Ud(e)??i,d=Au(u,c),f=Fq(d)?d.canDeactivate(n,e,t,r):Vi(c,()=>d(n,e,t,r));return bs(f).pipe(Gn())});return ie(o).pipe(Cu())}function Wq(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ie(!0);let s=i.map(o=>{let u=Au(o,n),c=kq(u)?u.canLoad(e,t):Vi(n,()=>u(e,t));return bs(c)});return ie(s).pipe(Cu(),oP(r))}function oP(n){return wf(Vt(e=>{if(Tu(e))throw nP(n,e)}),se(e=>e===!0))}function Kq(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ie(!0);let s=i.map(o=>{let u=Au(o,n),c=Lq(u)?u.canMatch(e,t):Vi(n,()=>u(e,t));return bs(c)});return ie(s).pipe(Cu(),oP(r))}var Fd=class{constructor(e){this.segmentGroup=e||null}},Eg=class extends Error{constructor(e){super(),this.urlTree=e}};function _u(n){return Ga(new Fd(n))}function Qq(n){return Ga(new ee(4e3,!1))}function Yq(n){return Ga(rP(!1,Un.GuardRejected))}var HI=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ie(r);if(i.numberOfChildren>1||!i.children[we])return Qq(e.redirectTo);i=i.children[we]}}applyRedirectCommands(e,t,r){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new Eg(i);return i}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Es(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let u=s.substring(1);r[i]=t[u]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([u,c])=>{o[u]=this.createSegmentGroup(e,c,r,i)}),new Ke(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ee(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},WI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Jq(n,e,t,r,i){let s=tE(n,e,t);return s.matched?(r=Cq(e,r),Kq(r,e,t,i).pipe(se(o=>o===!0?s:W({},WI)))):ie(s)}function tE(n,e,t){if(e.path==="**")return Xq(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?W({},WI):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||K$)(t,n,e);if(!i)return W({},WI);let s={};Object.entries(i.posParams??{}).forEach(([u,c])=>{s[u]=c.path});let o=i.consumed.length>0?W(W({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Xq(n){return{matched:!0,parameters:n.length>0?jM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function OM(n,e,t,r){return t.length>0&&t4(n,t,r)?{segmentGroup:new Ke(e,e4(r,new Ke(t,n.children))),slicedSegments:[]}:t.length===0&&n4(n,t,r)?{segmentGroup:new Ke(n.segments,Zq(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ke(n.segments,n.children),slicedSegments:t}}function Zq(n,e,t,r){let i={};for(let s of t)if(Cg(n,e,s)&&!r[Jr(s)]){let o=new Ke([],{});i[Jr(s)]=o}return W(W({},r),i)}function e4(n,e){let t={};t[we]=e;for(let r of n)if(r.path===""&&Jr(r)!==we){let i=new Ke([],{});t[Jr(r)]=i}return t}function t4(n,e,t){return t.some(r=>Cg(n,e,r)&&Jr(r)!==we)}function n4(n,e,t){return t.some(r=>Cg(n,e,r))}function Cg(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function r4(n,e,t,r){return Jr(n)!==r&&(r===we||!Cg(e,t,n))?!1:tE(e,n,t).matched}function i4(n,e,t){return e.length===0&&!n.children[t]}var KI=class{};function s4(n,e,t,r,i,s,o="emptyOnly"){return new QI(n,e,t,r,i,o,s).recognize()}var o4=31,QI=class{constructor(e,t,r,i,s,o,u){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=u,this.applyRedirects=new HI(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ee(4002,`'${e.segmentGroup}'`)}recognize(){let e=OM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(t=>{let r=new Od([],Object.freeze({}),Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,{},we,this.rootComponentType,null,{}),i=new Bn(r,t),s=new wg("",i),o=fq(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,we).pipe(us(r=>{if(r instanceof Eg)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Fd?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,i=JI(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,t,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(se(s=>s instanceof Bn?[s]:[]))}processChildren(e,t,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return xe(i).pipe(xo(s=>{let o=r.children[s],u=Aq(t,s);return this.processSegmentGroup(e,u,o,s)}),ls((s,o)=>(s.push(...o),s)),cs(null),ov(),Dt(s=>{if(s===null)return _u(r);let o=aP(s);return a4(o),ie(o)}))}processSegment(e,t,r,i,s,o){return xe(t).pipe(xo(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,s,o).pipe(us(c=>{if(c instanceof Fd)return ie(null);throw c}))),Gn(u=>!!u),us(u=>{if(sP(u))return i4(r,i,s)?ie(new KI):_u(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,s,o,u){return r4(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&u?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):_u(i):_u(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){let{matched:u,consumedSegments:c,positionalParamSegments:d,remainingSegments:f}=tE(t,i,s);if(!u)return _u(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>o4&&(this.allowRedirects=!1));let g=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,d);return this.applyRedirects.lineralizeSegments(i,g).pipe(Dt(v=>this.processSegment(e,r,t,v.concat(f),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){let o=Jq(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),o.pipe(pt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(pt(({routes:c})=>{let d=r._loadedInjector??e,{consumedSegments:f,remainingSegments:g,parameters:v}=u,D=new Od(f,v,Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,c4(r),Jr(r),r.component??r._loadedComponent??null,r,l4(r)),{segmentGroup:A,slicedSegments:R}=OM(t,f,g,c);if(R.length===0&&A.hasChildren())return this.processChildren(d,c,A).pipe(se(k=>k===null?null:new Bn(D,k)));if(c.length===0&&R.length===0)return ie(new Bn(D,[]));let x=Jr(r)===s;return this.processSegment(d,c,A,R,x?we:s,!0).pipe(se(k=>new Bn(D,k instanceof Bn?[k]:[])))}))):_u(t)))}getChildConfig(e,t,r){return t.children?ie({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ie({routes:t._loadedRoutes,injector:t._loadedInjector}):Wq(e,t,r,this.urlSerializer).pipe(Dt(i=>i?this.configLoader.loadChildren(e,t).pipe(Vt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):Yq(t))):ie({routes:[],injector:e})}};function a4(n){n.sort((e,t)=>e.value.outlet===we?-1:t.value.outlet===we?1:e.value.outlet.localeCompare(t.value.outlet))}function u4(n){let e=n.value.routeConfig;return e&&e.path===""}function aP(n){let e=[],t=new Set;for(let r of n){if(!u4(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=aP(r.children);e.push(new Bn(r.value,i))}return e.filter(r=>!t.has(r))}function c4(n){return n.data||{}}function l4(n){return n.resolve||{}}function d4(n,e,t,r,i,s){return Dt(o=>s4(n,e,t,r,o.extractedUrl,i,s).pipe(se(({state:u,tree:c})=>Qe(W({},o),{targetSnapshot:u,urlAfterRedirects:c}))))}function h4(n,e){return Dt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ie(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let d of uP(c))o.add(d);let u=0;return xe(o).pipe(xo(c=>s.has(c)?f4(c,r,n,e):(c.data=JI(c,c.parent,n).resolve,ie(void 0))),Vt(()=>u++),Wa(1),Dt(c=>u===o.size?ie(t):gn))})}function uP(n){let e=n.children.map(t=>uP(t)).flat();return[n,...e]}function f4(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!eP(i)&&(s[Ld]=i.title),p4(s,n,e,r).pipe(se(o=>(n._resolvedData=o,n.data=JI(n,n.parent,t).resolve,null)))}function p4(n,e,t,r){let i=CI(n);if(i.length===0)return ie({});let s={};return xe(i).pipe(Dt(o=>g4(n[o],e,t,r).pipe(Gn(),Vt(u=>{s[o]=u}))),Wa(1),sv(s),us(o=>sP(o)?gn:Ga(o)))}function g4(n,e,t,r){let i=Ud(e)??r,s=Au(n,i),o=s.resolve?s.resolve(e,t):Vi(i,()=>s(e,t));return bs(o)}function DI(n){return pt(e=>{let t=n(e);return t?xe(t).pipe(se(()=>e)):ie(e)})}var cP=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===we);return r}getResolvedTitleForRoute(t){return t.data[Ld]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:()=>G(m4),providedIn:"root"})}}return n})(),m4=(()=>{class n extends cP{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(B(SM))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qd=new Y("",{providedIn:"root",factory:()=>({})}),Tg=new Y(""),nE=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=G(Hp)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ie(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=bs(t.loadComponent()).pipe(se(lP),Vt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),td(()=>{this.componentLoaders.delete(t)})),i=new Ua(r,()=>new yt).pipe(Ba());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ie({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=y4(r,this.compiler,t,this.onLoadEndListener).pipe(td(()=>{this.childrenLoaders.delete(r)})),o=new Ua(s,()=>new yt).pipe(Ba());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function y4(n,e,t,r){return bs(n.loadChildren()).pipe(se(lP),Dt(i=>i instanceof hd||Array.isArray(i)?ie(i):xe(e.compileModuleAsync(i))),se(i=>{r&&r(n);let s,o,u=!1;return Array.isArray(i)?(o=i,u=!0):(s=i.create(t).injector,o=s.get(Tg,[],{optional:!0,self:!0}).flat()),{routes:o.map(eE),injector:s}}))}function _4(n){return n&&typeof n=="object"&&"default"in n}function lP(n){return _4(n)?n.default:n}var rE=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:()=>G(v4),providedIn:"root"})}}return n})(),v4=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),dP=new Y(""),hP=new Y("");function w4(n,e,t){let r=n.get(hP),i=n.get(Rn);return n.get(Re).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(d=>setTimeout(d));let s,o=new Promise(d=>{s=d}),u=i.startViewTransition(()=>(s(),I4(n))),{onViewTransitionCreated:c}=r;return c&&Vi(n,()=>c({transition:u,from:e,to:t})),o})}function I4(n){return new Promise(e=>{Lp(e,{injector:n})})}var iE=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new yt,this.transitionAbortSubject=new yt,this.configLoader=G(nE),this.environmentInjector=G(Cn),this.urlSerializer=G(jd),this.rootContexts=G(Bd),this.location=G(yu),this.inputBindingEnabled=G(bg,{optional:!0})!==null,this.titleStrategy=G(cP),this.options=G(qd,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=G(rE),this.createViewTransition=G(dP,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ie(void 0),this.rootComponentType=null;let t=i=>this.events.next(new kI(i)),r=i=>this.events.next(new OI(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Qe(W(W({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Xt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Sd,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(qt(s=>s.id!==0),se(s=>Qe(W({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),pt(s=>{let o=!1,u=!1;return ie(s).pipe(pt(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Un.SupersededByNewNavigation),gn;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Qe(W({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new Ds(c.id,this.urlSerializer.serialize(c.rawUrl),g,gg.IgnoredSameUrlNavigation)),c.resolve(null),gn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ie(c).pipe(pt(g=>{let v=this.transitions?.getValue();return this.events.next(new Du(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),v!==this.transitions?.getValue()?gn:Promise.resolve(g)}),d4(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Vt(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=Qe(W({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let v=new mg(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(v)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:g,extractedUrl:v,source:D,restoredState:A,extras:R}=c,x=new Du(g,this.urlSerializer.serialize(v),D,A);this.events.next(x);let k=XM(this.rootComponentType).snapshot;return this.currentTransition=s=Qe(W({},c),{targetSnapshot:k,urlAfterRedirects:v,extras:Qe(W({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=v,ie(s)}else{let g="";return this.events.next(new Ds(c.id,this.urlSerializer.serialize(c.extractedUrl),g,gg.IgnoredByUrlHandlingStrategy)),c.resolve(null),gn}}),Vt(c=>{let d=new RI(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),se(c=>(this.currentTransition=s=Qe(W({},c),{guards:xq(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),jq(this.environmentInjector,c=>this.events.next(c)),Vt(c=>{if(s.guardsResult=c.guardsResult,Tu(c.guardsResult))throw nP(this.urlSerializer,c.guardsResult);let d=new MI(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(d)}),qt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Un.GuardRejected),!1)),DI(c=>{if(c.guards.canActivateChecks.length)return ie(c).pipe(Vt(d=>{let f=new PI(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),pt(d=>{let f=!1;return ie(d).pipe(h4(this.paramsInheritanceStrategy,this.environmentInjector),Vt({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",Un.NoDataFromResolver)}}))}),Vt(d=>{let f=new NI(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),DI(c=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(Vt(v=>{f.component=v}),se(()=>{})));for(let v of f.children)g.push(...d(v));return g};return ed(d(c.targetSnapshot.root)).pipe(cs(null),Ni(1))}),DI(()=>this.afterPreactivation()),pt(()=>{let{currentSnapshot:c,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,c.root,d.root);return f?xe(f).pipe(se(()=>s)):ie(s)}),se(c=>{let d=Iq(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=Qe(W({},c),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),Vt(()=>{this.events.next(new Nd)}),Sq(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Ni(1),Vt({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new qi(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),uv(this.transitionAbortSubject.pipe(Vt(c=>{throw c}))),td(()=>{!o&&!u&&this.cancelNavigationTransition(s,"",Un.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),us(c=>{if(u=!0,iP(c))this.events.next(new Ts(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),Dq(c)?this.events.next(new kd(c.url)):s.resolve(!1);else{this.events.next(new Pd(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(c))}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return gn}))}))}cancelNavigationTransition(t,r,i){let s=new Ts(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function E4(n){return n!==Sd}var T4=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:()=>G(D4),providedIn:"root"})}}return n})(),YI=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},D4=(()=>{class n extends YI{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=hu(n)))(i||n)}})()}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fP=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:()=>G(b4),providedIn:"root"})}}return n})(),b4=(()=>{class n extends fP{constructor(){super(...arguments),this.location=G(yu),this.urlSerializer=G(jd),this.options=G(qd,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=G(rE),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Es,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=XM(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Du)this.stateMemento=this.createStateMemento();else if(t instanceof Ds)this.rawUrlTree=r.initialUrl;else if(t instanceof mg){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else t instanceof Nd?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof Ts&&(t.code===Un.GuardRejected||t.code===Un.NoDataFromResolver)?this.restoreHistory(r):t instanceof Pd?this.restoreHistory(r,!0):t instanceof qi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=W(W({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=W(W({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=hu(n)))(i||n)}})()}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Cd=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Cd||{});function pP(n,e){n.events.pipe(qt(t=>t instanceof qi||t instanceof Ts||t instanceof Pd||t instanceof Ds),se(t=>t instanceof qi||t instanceof Ds?Cd.COMPLETE:(t instanceof Ts?t.code===Un.Redirect||t.code===Un.SupersededByNewNavigation:!1)?Cd.REDIRECTING:Cd.FAILED),qt(t=>t!==Cd.REDIRECTING),Ni(1)).subscribe(()=>{e()})}function C4(n){throw n}var A4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},S4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Sr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=G($p),this.stateManager=G(fP),this.options=G(qd,{optional:!0})||{},this.pendingTasks=G(Bp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=G(iE),this.urlSerializer=G(jd),this.location=G(yu),this.urlHandlingStrategy=G(rE),this._events=new yt,this.errorHandler=this.options.errorHandler||C4,this.navigated=!1,this.routeReuseStrategy=G(T4),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=G(Tg,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!G(bg,{optional:!0}),this.eventsSubscription=new mt,this.isNgZoneEnabled=G(Re)instanceof Re&&Re.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Ts&&r.code!==Un.Redirect&&r.code!==Un.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof qi)this.navigated=!0;else if(r instanceof kd){let o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||E4(i.source)};this.scheduleNavigation(o,Sd,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}R4(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Sd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=W({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let u=this.parseUrl(t);this.scheduleNavigation(u,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(eE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:u,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:o,f=null;switch(u){case"merge":f=W(W({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let v=i?i.snapshot:this.routerState.snapshot.root;g=KM(v)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),g=this.currentUrlTree.root}return QM(g,t,f,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Tu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Sd,null,r)}navigate(t,r={skipLocationChange:!1}){return x4(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=W({},A4):r===!1?i=W({},S4):i=r,Tu(t))return RM(this.currentUrlTree,t,i);let s=this.parseUrl(t);return RM(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let u,c,d;o?(u=o.resolve,c=o.reject,d=o.promise):d=new Promise((g,v)=>{u=g,c=v});let f=this.pendingTasks.add();return pP(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:u,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function x4(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ee(4008,!1)}function R4(n){return!(n instanceof Nd)&&!(n instanceof kd)}var Dg=class{};var M4=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(qt(t=>t instanceof qi),xo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=jp(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,u=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(u,s.children??s._loadedRoutes))}return xe(i).pipe(as())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ie(null);let s=i.pipe(Dt(o=>o===null?ie(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return xe([s,o]).pipe(as())}else return s})}static{this.\u0275fac=function(r){return new(r||n)(B(Sr),B(Hp),B(Cn),B(Dg),B(nE))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gP=new Y(""),P4=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=G(Cn),o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Du?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof qi?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ds&&t.code===gg.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof yg&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>S(this,null,function*(){yield new Promise(i=>{setTimeout(()=>{i()}),Lp(()=>{i()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new yg(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){mR()}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})();function N4(n){return n.routerState.root}function zd(n,e){return{\u0275kind:n,\u0275providers:e}}function k4(){let n=G(Cr);return e=>{let t=n.get(mu);if(e!==t.components[0])return;let r=n.get(Sr),i=n.get(mP);n.get(sE)===1&&r.initialNavigation(),n.get(yP,null,Te.Optional)?.setUpPreloading(),n.get(gP,null,Te.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var mP=new Y("",{factory:()=>new yt}),sE=new Y("",{providedIn:"root",factory:()=>1});function O4(){return zd(2,[{provide:sE,useValue:0},{provide:Gp,multi:!0,deps:[Cr],useFactory:e=>{let t=e.get(aM,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Sr),s=e.get(mP);pP(i,()=>{r(!0)}),e.get(iE).afterPreactivation=()=>(r(!0),s.closed?ie(void 0):s),i.initialNavigation()}))}}])}function V4(){return zd(3,[{provide:Gp,multi:!0,useFactory:()=>{let e=G(Sr);return()=>{e.setUpLocationChangeListener()}}},{provide:sE,useValue:2}])}var yP=new Y("");function F4(n){return zd(0,[{provide:yP,useExisting:M4},{provide:Dg,useExisting:n}])}function L4(){return zd(8,[kM,{provide:bg,useExisting:kM}])}function j4(n){let e=[{provide:dP,useValue:w4},{provide:hP,useValue:W({skipNextTransition:!!n?.skipInitialTransition},n)}];return zd(9,e)}var VM=new Y("ROUTER_FORROOT_GUARD"),B4=[yu,{provide:jd,useClass:Rd},Sr,Bd,{provide:bu,useFactory:N4,deps:[Sr]},nE,[]],oE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[B4,[],{provide:Tg,multi:!0,useValue:t},{provide:VM,useFactory:z4,deps:[[Sr,new cu,new gw]]},{provide:qd,useValue:r||{}},r?.useHash?$4():q4(),U4(),r?.preloadingStrategy?F4(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?G4(r):[],r?.bindToComponentInputs?L4().\u0275providers:[],r?.enableViewTransitions?j4().\u0275providers:[],H4()]}}static forChild(t){return{ngModule:n,providers:[{provide:Tg,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(B(VM,8))}}static{this.\u0275mod=jt({type:n})}static{this.\u0275inj=Lt({})}}return n})();function U4(){return{provide:gP,useFactory:()=>{let n=G(_M),e=G(Re),t=G(qd),r=G(iE),i=G(jd);return t.scrollOffset&&n.setOffset(t.scrollOffset),new P4(i,r,n,e,t)}}}function $4(){return{provide:Xo,useClass:cM}}function q4(){return{provide:Xo,useClass:dI}}function z4(n){return"guarded"}function G4(n){return[n.initialNavigation==="disabled"?V4().\u0275providers:[],n.initialNavigation==="enabledBlocking"?O4().\u0275providers:[]]}var FM=new Y("");function H4(){return[{provide:FM,useFactory:k4},{provide:Xw,multi:!0,useExisting:FM}]}var _P=(()=>{class n{constructor(t){this.router=t}navigateTo(t){this.router.navigate([`/${t}`])}static{this.\u0275fac=function(r){return new(r||n)(De(Sr))}}static{this.\u0275cmp=Kr({type:n,selectors:[["app-landing-page"]],decls:31,vars:0,consts:[[1,"header"],[1,"logo"],[1,"nav-links"],[3,"click"],[1,"landing-content"]],template:function(r,i){r&1&&(oe(0,"div",0)(1,"div",1),me(2,"MediHelp"),ue(),oe(3,"nav",2)(4,"button",3),zt("click",function(){return i.navigateTo("inicio")}),me(5,"Inicio"),ue(),oe(6,"button",3),zt("click",function(){return i.navigateTo("medicos")}),me(7,"Medicos"),ue(),oe(8,"button",3),zt("click",function(){return i.navigateTo("gluciobot")}),me(9,"GlucioBot"),ue(),oe(10,"button",3),zt("click",function(){return i.navigateTo("nosotros")}),me(11,"Nosotros"),ue(),oe(12,"button",3),zt("click",function(){return i.navigateTo("login")}),me(13,"Login"),ue()()(),oe(14,"div",4)(15,"h1"),me(16,"Bienvenido a MediHelp"),ue(),oe(17,"p"),me(18,"Centro de Salud Integral."),ue()(),oe(19,"div",4)(20,"h2"),me(21,"Conoce a Gluciobot"),ue(),oe(22,"p"),me(23,"Glucio, es un asistente virtual que te ayudara con el agendamiento de citas, historial m\xE9dico, recomendaciones e informaci\xF3n para prevenir enfermedades y mucho m\xE1s."),ue(),oe(24,"button",3),zt("click",function(){return"glucio"}),me(25,"Preguntale a Glucio"),ue()(),oe(26,"div",4)(27,"h2"),me(28,"Nuestros Servicios"),ue(),oe(29,"p"),me(30,"Nosotros te proveemos las mejores opciones. Nos ajustamos a tus necesidades de salud para asegurarnos de que te trates con doctores altamente calificados. Puedes consultar con nosotros el tipo de servicio que le corresponda para mejorar su salud."),ue()())},styles:[".header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#fff;padding:15px 30px;color:#fff}.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.header[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]{display:flex;gap:20px}.header[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:1px solid white;border-radius:5px;color:#626262;padding:8px 15px;cursor:pointer;font-size:1rem}.header[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#fff;color:#000}.landing-content[_ngcontent-%COMP%]{text-align:left;margin-top:50px}.landing-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#000}.landing-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin-top:10px;color:#626262}"]})}}return n})();var W4="firebase",K4="10.14.1";Ri(W4,K4,"app");var ra=new Oi("ANGULARFIRE2_VERSION");var vP=(n,e)=>{let t=e?[e]:VA(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Cs=class{constructor(){return vP(Q4)}},Q4="app-check";function Su(){}var Ag=class{zone;delegate;constructor(e,t=ev){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},uE=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Su,{},Su,Su)),t.pipe(Vt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Gd=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Ag(Zone.current)),this.insideAngular=t.run(()=>new Ag(Zone.current,Zl)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(B(Re))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sg(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Y4(n){return Sg().ngZone.runOutsideAngular(()=>n())}function na(n){return Sg().ngZone.run(()=>n())}function vn(n){return J4(Sg())(n)}function J4(n){return function(t){return t=t.lift(new uE(n.ngZone)),t.pipe(zn(n.outsideAngular),Vn(n.insideAngular))}}var X4=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),na(()=>n.apply(void 0,r))},cE=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=na(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Su,{},Su,Su))),r[s]=X4(r[s],t));let i=Y4(()=>n.apply(this,r));if(!e)if(i instanceof ve){let s=Sg();return i.pipe(zn(s.outsideAngular),Vn(s.insideAngular))}else return na(()=>i);return i instanceof ve?i.pipe(vn):i instanceof Promise?na(()=>new Promise((s,o)=>i.then(u=>na(()=>s(u)),u=>na(()=>o(u))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:na(()=>i)};var t9=new Map,n9={activated:!1,tokenObservers:[]},r9={initialized:!1,enabled:!1};function xr(n){return t9.get(n)||Object.assign({},n9)}function bP(){return r9}var i9="https://content-firebaseappcheck.googleapis.com/v1";var s9="exchangeDebugToken",IP={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},KX=24*60*60*1e3;var dE=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return S(this,null,function*(){this.stop();try{this.pending=new L_,this.pending.promise.catch(t=>{}),yield o9(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new L_,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function o9(n){return new Promise(e=>{setTimeout(e,n)})}var a9={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},As=new NA("appCheck","AppCheck",a9);function CP(n){if(!xr(n).activated)throw As.create("use-before-activation",{appName:n.name})}function AP(r,i){return S(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let D=yield o.getHeartbeatsHeader();D&&(s["X-Firebase-Client"]=D)}let u={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(n,u)}catch(D){throw As.create("fetch-network-error",{originalErrorMessage:D?.message})}if(c.status!==200)throw As.create("fetch-status-error",{httpStatus:c.status});let d;try{d=yield c.json()}catch(D){throw As.create("fetch-parse-error",{originalErrorMessage:D?.message})}let f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw As.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});let g=Number(f[1])*1e3,v=Date.now();return{token:d.token,expireTimeMillis:v+g,issuedAtTimeMillis:v}})}function SP(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${i9}/projects/${t}/apps/${r}:${s9}?key=${i}`,body:{debug_token:e}}}var u9="firebase-app-check-database",c9=1,hE="firebase-app-check-store";var xg=null;function l9(){return xg||(xg=new Promise((n,e)=>{try{let t=indexedDB.open(u9,c9);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(As.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(hE,{keyPath:"compositeKey"})}}}catch(t){e(As.create("storage-open",{originalErrorMessage:t?.message}))}}),xg)}function d9(n,e){return h9(f9(n),e)}function h9(n,e){return S(this,null,function*(){let r=(yield l9()).transaction(hE,"readwrite"),s=r.objectStore(hE).put({compositeKey:n,value:e});return new Promise((o,u)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var d;u(As.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})})}function f9(n){return`${n.options.appId}-${n.name}`}var fE=new pf("@firebase/app-check");function lE(n,e){return ff()?d9(n,e).catch(t=>{fE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function xP(){return bP().enabled}function RP(){return S(this,null,function*(){let n=bP();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var p9={error:"UNKNOWN_ERROR"};function g9(n){return RA.encodeString(JSON.stringify(n),!1)}function pE(n,e=!1){return S(this,null,function*(){let t=n.app;CP(t);let r=xr(t),i=r.token,s;if(i&&!Hd(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Hd(c)?i=c:yield lE(t,void 0))}if(!e&&i&&Hd(i))return{token:i.token};let o=!1;if(xP()){r.exchangeTokenPromise||(r.exchangeTokenPromise=AP(SP(t,yield RP()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let c=yield r.exchangeTokenPromise;return yield lE(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield xr(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?fE.warn(c.message):fE.error(c),s=c}let u;return i?s?Hd(i)?u={token:i.token,internalError:s}:u=TP(s):(u={token:i.token},r.token=i,yield lE(t,i)):u=TP(s),o&&v9(t,u),u})}function m9(n){return S(this,null,function*(){let e=n.app;CP(e);let{provider:t}=xr(e);if(xP()){let r=yield RP(),{token:i}=yield AP(SP(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function y9(n,e,t,r){let{app:i}=n,s=xr(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Hd(s.token)){let u=s.token;Promise.resolve().then(()=>{t({token:u.token}),EP(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>EP(n))}function MP(n,e){let t=xr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function EP(n){let{app:e}=n,t=xr(e),r=t.tokenRefresher;r||(r=_9(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function _9(n){let{app:e}=n;return new dE(()=>S(this,null,function*(){let t=xr(e),r;if(t.token?r=yield pE(n,!0):r=yield pE(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=xr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},IP.RETRIAL_MIN_WAIT,IP.RETRIAL_MAX_WAIT)}function v9(n,e){let t=xr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Hd(n){return n.expireTimeMillis-Date.now()>0}function TP(n){return{token:g9(p9),error:n}}var gE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=xr(this.app);for(let t of e)MP(this.app,t.next);return Promise.resolve()}};function w9(n,e){return new gE(n,e)}function I9(n){return{getToken:e=>pE(n,e),getLimitedUseToken:()=>m9(n),addTokenListener:e=>y9(n,"INTERNAL",e),removeTokenListener:e=>MP(n.app,e)}}var E9="@firebase/app-check",T9="0.8.8";var D9="app-check",DP="app-check-internal";function b9(){Ql(new bo(D9,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return w9(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(DP).initialize()})),Ql(new bo(DP,n=>{let e=n.getProvider("app-check").getImmediate();return I9(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ri(E9,T9)}b9();var C9=["localhost","0.0.0.0","127.0.0.1"],oZ=typeof window<"u"&&C9.includes(window.location.hostname);var A9="firebase",S9="10.14.1";Tn.registerVersion(A9,S9,"app-compat");var x9=["ngOnDestroy"],kP=(n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(x9.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(u=>{let c=u?.[s];return typeof c=="function"?c.bind(u):c?.then?c.then(d=>t.run(()=>d)):t.run(()=>c)});return new Proxy(()=>{},{get:(u,c)=>o[c],apply:(u,c,d)=>o.then(f=>{let g=f?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,g),g})})})});var Rg=class{constructor(e){return e}},xu=new Y("angularfire2.app.options"),Ru=new Y("angularfire2.app.name");function Wd(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let o=Tn.apps.filter(u=>u&&u.name===i.name)[0]||e.runOutsideAngular(()=>Tn.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let u=!!module.hot;R9("error",`${o.name} Firebase App already initialized with different options${u?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Rg(o)}var R9=(n,...e)=>{eI()&&typeof console<"u"&&console[n](...e)},M9={provide:Rg,useFactory:Wd,deps:[xu,Re,[new cu,Ru]]},OP=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:xu,useValue:t},{provide:Ru,useValue:r}]}}constructor(t){Tn.registerVersion("angularfire",ra.full,"core"),Tn.registerVersion("angularfire",ra.full,"app-compat"),Tn.registerVersion("angular",qR.full,t.toString())}static \u0275fac=function(r){return new(r||n)(B(Sn))};static \u0275mod=jt({type:n});static \u0275inj=Lt({providers:[M9]})}return n})();function Mg(n,e,t,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(u=>u[0]===n)||[];if(s)return P9(i,o)||(NP("error",`${e} was already initialized on the ${t} Firebase App with different settings.${N9?" You may need to reload as Firebase is not HMR aware.":""}`),NP("warn",{is:i,was:o})),s;{let u=r();return globalThis.\u0275AngularfireInstanceCache.push([n,u,i]),u}}function P9(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var N9=typeof module<"u"&&!!module.hot,NP=(n,...e)=>{eI()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var mE=new Y("angularfire2.auth.use-emulator"),yE=new Y("angularfire2.auth.settings"),_E=new Y("angularfire2.auth.tenant-id"),vE=new Y("angularfire2.auth.langugage-code"),wE=new Y("angularfire2.auth.use-device-language"),IE=new Y("angularfire.auth.persistence"),EE=(n,e,t,r,i,s,o,u)=>Mg(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(let[d,f]of Object.entries(o))c.settings[d]=f;return u&&c.setPersistence(u),c},[t,r,i,s,o,u]),VP=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,u,c,d,f,g,v,D){let A=new yt,R=ie(void 0).pipe(Vn(o.outsideAngular),pt(()=>s.runOutsideAngular(()=>import("./chunk-3WX6T7ZD.js"))),se(()=>Wd(t,s,r)),se(x=>EE(x,s,u,d,f,g,c,v)),qf({bufferSize:1,refCount:!1}));if(Zo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ie(null);else{R.pipe(Gn()).subscribe();let x=R.pipe(pt(O=>O.getRedirectResult().then(U=>U,()=>null)),vn,qf({bufferSize:1,refCount:!1})),k=R.pipe(pt(O=>new ve(U=>({unsubscribe:s.runOutsideAngular(()=>O.onAuthStateChanged(X=>U.next(X),X=>U.error(X),()=>U.complete()))})))),j=R.pipe(pt(O=>new ve(U=>({unsubscribe:s.runOutsideAngular(()=>O.onIdTokenChanged(X=>U.next(X),X=>U.error(X),()=>U.complete()))}))));this.authState=x.pipe(zf(k),zn(o.outsideAngular),Vn(o.insideAngular)),this.user=x.pipe(zf(j),zn(o.outsideAngular),Vn(o.insideAngular)),this.idToken=this.user.pipe(pt(O=>O?xe(O.getIdToken()):ie(null))),this.idTokenResult=this.user.pipe(pt(O=>O?xe(O.getIdTokenResult()):ie(null))),this.credential=iv(x,A,this.authState.pipe(qt(O=>!O))).pipe(se(O=>O?.user?O:null),zn(o.outsideAngular),Vn(o.insideAngular))}return kP(this,R,s,{spy:{apply:(x,k,j)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&j.then(O=>A.next(O))}}})}static \u0275fac=function(r){return new(r||n)(B(xu),B(Ru,8),B(Sn),B(Re),B(Gd),B(mE,8),B(yE,8),B(_E,8),B(vE,8),B(wE,8),B(IE,8),B(Cs,8))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var FP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},LP={};var Ss,TE;(function(){var n;function e(I,m){function _(){}_.prototype=m.prototype,I.D=m.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(w,E,b){for(var y=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)y[Nt-2]=arguments[Nt];return m.prototype[E].apply(w,y)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,m,_){_||(_=0);var w=Array(16);if(typeof m=="string")for(var E=0;16>E;++E)w[E]=m.charCodeAt(_++)|m.charCodeAt(_++)<<8|m.charCodeAt(_++)<<16|m.charCodeAt(_++)<<24;else for(E=0;16>E;++E)w[E]=m[_++]|m[_++]<<8|m[_++]<<16|m[_++]<<24;m=I.g[0],_=I.g[1],E=I.g[2];var b=I.g[3],y=m+(b^_&(E^b))+w[0]+3614090360&4294967295;m=_+(y<<7&4294967295|y>>>25),y=b+(E^m&(_^E))+w[1]+3905402710&4294967295,b=m+(y<<12&4294967295|y>>>20),y=E+(_^b&(m^_))+w[2]+606105819&4294967295,E=b+(y<<17&4294967295|y>>>15),y=_+(m^E&(b^m))+w[3]+3250441966&4294967295,_=E+(y<<22&4294967295|y>>>10),y=m+(b^_&(E^b))+w[4]+4118548399&4294967295,m=_+(y<<7&4294967295|y>>>25),y=b+(E^m&(_^E))+w[5]+1200080426&4294967295,b=m+(y<<12&4294967295|y>>>20),y=E+(_^b&(m^_))+w[6]+2821735955&4294967295,E=b+(y<<17&4294967295|y>>>15),y=_+(m^E&(b^m))+w[7]+4249261313&4294967295,_=E+(y<<22&4294967295|y>>>10),y=m+(b^_&(E^b))+w[8]+1770035416&4294967295,m=_+(y<<7&4294967295|y>>>25),y=b+(E^m&(_^E))+w[9]+2336552879&4294967295,b=m+(y<<12&4294967295|y>>>20),y=E+(_^b&(m^_))+w[10]+4294925233&4294967295,E=b+(y<<17&4294967295|y>>>15),y=_+(m^E&(b^m))+w[11]+2304563134&4294967295,_=E+(y<<22&4294967295|y>>>10),y=m+(b^_&(E^b))+w[12]+1804603682&4294967295,m=_+(y<<7&4294967295|y>>>25),y=b+(E^m&(_^E))+w[13]+4254626195&4294967295,b=m+(y<<12&4294967295|y>>>20),y=E+(_^b&(m^_))+w[14]+2792965006&4294967295,E=b+(y<<17&4294967295|y>>>15),y=_+(m^E&(b^m))+w[15]+1236535329&4294967295,_=E+(y<<22&4294967295|y>>>10),y=m+(E^b&(_^E))+w[1]+4129170786&4294967295,m=_+(y<<5&4294967295|y>>>27),y=b+(_^E&(m^_))+w[6]+3225465664&4294967295,b=m+(y<<9&4294967295|y>>>23),y=E+(m^_&(b^m))+w[11]+643717713&4294967295,E=b+(y<<14&4294967295|y>>>18),y=_+(b^m&(E^b))+w[0]+3921069994&4294967295,_=E+(y<<20&4294967295|y>>>12),y=m+(E^b&(_^E))+w[5]+3593408605&4294967295,m=_+(y<<5&4294967295|y>>>27),y=b+(_^E&(m^_))+w[10]+38016083&4294967295,b=m+(y<<9&4294967295|y>>>23),y=E+(m^_&(b^m))+w[15]+3634488961&4294967295,E=b+(y<<14&4294967295|y>>>18),y=_+(b^m&(E^b))+w[4]+3889429448&4294967295,_=E+(y<<20&4294967295|y>>>12),y=m+(E^b&(_^E))+w[9]+568446438&4294967295,m=_+(y<<5&4294967295|y>>>27),y=b+(_^E&(m^_))+w[14]+3275163606&4294967295,b=m+(y<<9&4294967295|y>>>23),y=E+(m^_&(b^m))+w[3]+4107603335&4294967295,E=b+(y<<14&4294967295|y>>>18),y=_+(b^m&(E^b))+w[8]+1163531501&4294967295,_=E+(y<<20&4294967295|y>>>12),y=m+(E^b&(_^E))+w[13]+2850285829&4294967295,m=_+(y<<5&4294967295|y>>>27),y=b+(_^E&(m^_))+w[2]+4243563512&4294967295,b=m+(y<<9&4294967295|y>>>23),y=E+(m^_&(b^m))+w[7]+1735328473&4294967295,E=b+(y<<14&4294967295|y>>>18),y=_+(b^m&(E^b))+w[12]+2368359562&4294967295,_=E+(y<<20&4294967295|y>>>12),y=m+(_^E^b)+w[5]+4294588738&4294967295,m=_+(y<<4&4294967295|y>>>28),y=b+(m^_^E)+w[8]+2272392833&4294967295,b=m+(y<<11&4294967295|y>>>21),y=E+(b^m^_)+w[11]+1839030562&4294967295,E=b+(y<<16&4294967295|y>>>16),y=_+(E^b^m)+w[14]+4259657740&4294967295,_=E+(y<<23&4294967295|y>>>9),y=m+(_^E^b)+w[1]+2763975236&4294967295,m=_+(y<<4&4294967295|y>>>28),y=b+(m^_^E)+w[4]+1272893353&4294967295,b=m+(y<<11&4294967295|y>>>21),y=E+(b^m^_)+w[7]+4139469664&4294967295,E=b+(y<<16&4294967295|y>>>16),y=_+(E^b^m)+w[10]+3200236656&4294967295,_=E+(y<<23&4294967295|y>>>9),y=m+(_^E^b)+w[13]+681279174&4294967295,m=_+(y<<4&4294967295|y>>>28),y=b+(m^_^E)+w[0]+3936430074&4294967295,b=m+(y<<11&4294967295|y>>>21),y=E+(b^m^_)+w[3]+3572445317&4294967295,E=b+(y<<16&4294967295|y>>>16),y=_+(E^b^m)+w[6]+76029189&4294967295,_=E+(y<<23&4294967295|y>>>9),y=m+(_^E^b)+w[9]+3654602809&4294967295,m=_+(y<<4&4294967295|y>>>28),y=b+(m^_^E)+w[12]+3873151461&4294967295,b=m+(y<<11&4294967295|y>>>21),y=E+(b^m^_)+w[15]+530742520&4294967295,E=b+(y<<16&4294967295|y>>>16),y=_+(E^b^m)+w[2]+3299628645&4294967295,_=E+(y<<23&4294967295|y>>>9),y=m+(E^(_|~b))+w[0]+4096336452&4294967295,m=_+(y<<6&4294967295|y>>>26),y=b+(_^(m|~E))+w[7]+1126891415&4294967295,b=m+(y<<10&4294967295|y>>>22),y=E+(m^(b|~_))+w[14]+2878612391&4294967295,E=b+(y<<15&4294967295|y>>>17),y=_+(b^(E|~m))+w[5]+4237533241&4294967295,_=E+(y<<21&4294967295|y>>>11),y=m+(E^(_|~b))+w[12]+1700485571&4294967295,m=_+(y<<6&4294967295|y>>>26),y=b+(_^(m|~E))+w[3]+2399980690&4294967295,b=m+(y<<10&4294967295|y>>>22),y=E+(m^(b|~_))+w[10]+4293915773&4294967295,E=b+(y<<15&4294967295|y>>>17),y=_+(b^(E|~m))+w[1]+2240044497&4294967295,_=E+(y<<21&4294967295|y>>>11),y=m+(E^(_|~b))+w[8]+1873313359&4294967295,m=_+(y<<6&4294967295|y>>>26),y=b+(_^(m|~E))+w[15]+4264355552&4294967295,b=m+(y<<10&4294967295|y>>>22),y=E+(m^(b|~_))+w[6]+2734768916&4294967295,E=b+(y<<15&4294967295|y>>>17),y=_+(b^(E|~m))+w[13]+1309151649&4294967295,_=E+(y<<21&4294967295|y>>>11),y=m+(E^(_|~b))+w[4]+4149444226&4294967295,m=_+(y<<6&4294967295|y>>>26),y=b+(_^(m|~E))+w[11]+3174756917&4294967295,b=m+(y<<10&4294967295|y>>>22),y=E+(m^(b|~_))+w[2]+718787259&4294967295,E=b+(y<<15&4294967295|y>>>17),y=_+(b^(E|~m))+w[9]+3951481745&4294967295,I.g[0]=I.g[0]+m&4294967295,I.g[1]=I.g[1]+(E+(y<<21&4294967295|y>>>11))&4294967295,I.g[2]=I.g[2]+E&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.u=function(I,m){m===void 0&&(m=I.length);for(var _=m-this.blockSize,w=this.B,E=this.h,b=0;b<m;){if(E==0)for(;b<=_;)i(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<m;)if(w[E++]=I.charCodeAt(b++),E==this.blockSize){i(this,w),E=0;break}}else for(;b<m;)if(w[E++]=I[b++],E==this.blockSize){i(this,w),E=0;break}}this.h=E,this.o+=m},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var m=1;m<I.length-8;++m)I[m]=0;var _=8*this.o;for(m=I.length-8;m<I.length;++m)I[m]=_&255,_/=256;for(this.u(I),I=Array(16),m=_=0;4>m;++m)for(var w=0;32>w;w+=8)I[_++]=this.g[m]>>>w&255;return I};function s(I,m){var _=u;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=m(I)}function o(I,m){this.h=m;for(var _=[],w=!0,E=I.length-1;0<=E;E--){var b=I[E]|0;w&&b==m||(_[E]=b,w=!1)}this.g=_}var u={};function c(I){return-128<=I&&128>I?s(I,function(m){return new o([m|0],0>m?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return g;if(0>I)return x(d(-I));for(var m=[],_=1,w=0;I>=_;w++)m[w]=I/_|0,_*=4294967296;return new o(m,0)}function f(I,m){if(I.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(I.charAt(0)=="-")return x(f(I.substring(1),m));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=d(Math.pow(m,8)),w=g,E=0;E<I.length;E+=8){var b=Math.min(8,I.length-E),y=parseInt(I.substring(E,E+b),m);8>b?(b=d(Math.pow(m,b)),w=w.j(b).add(d(y))):(w=w.j(_),w=w.add(d(y)))}return w}var g=c(0),v=c(1),D=c(16777216);n=o.prototype,n.m=function(){if(R(this))return-x(this).m();for(var I=0,m=1,_=0;_<this.g.length;_++){var w=this.i(_);I+=(0<=w?w:4294967296+w)*m,m*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(A(this))return"0";if(R(this))return"-"+x(this).toString(I);for(var m=d(Math.pow(I,6)),_=this,w="";;){var E=U(_,m).g;_=k(_,E.j(m));var b=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=E,A(_))return b+w;for(;6>b.length;)b="0"+b;w=b+w}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function A(I){if(I.h!=0)return!1;for(var m=0;m<I.g.length;m++)if(I.g[m]!=0)return!1;return!0}function R(I){return I.h==-1}n.l=function(I){return I=k(this,I),R(I)?-1:A(I)?0:1};function x(I){for(var m=I.g.length,_=[],w=0;w<m;w++)_[w]=~I.g[w];return new o(_,~I.h).add(v)}n.abs=function(){return R(this)?x(this):this},n.add=function(I){for(var m=Math.max(this.g.length,I.g.length),_=[],w=0,E=0;E<=m;E++){var b=w+(this.i(E)&65535)+(I.i(E)&65535),y=(b>>>16)+(this.i(E)>>>16)+(I.i(E)>>>16);w=y>>>16,b&=65535,y&=65535,_[E]=y<<16|b}return new o(_,_[_.length-1]&-2147483648?-1:0)};function k(I,m){return I.add(x(m))}n.j=function(I){if(A(this)||A(I))return g;if(R(this))return R(I)?x(this).j(x(I)):x(x(this).j(I));if(R(I))return x(this.j(x(I)));if(0>this.l(D)&&0>I.l(D))return d(this.m()*I.m());for(var m=this.g.length+I.g.length,_=[],w=0;w<2*m;w++)_[w]=0;for(w=0;w<this.g.length;w++)for(var E=0;E<I.g.length;E++){var b=this.i(w)>>>16,y=this.i(w)&65535,Nt=I.i(E)>>>16,rr=I.i(E)&65535;_[2*w+2*E]+=y*rr,j(_,2*w+2*E),_[2*w+2*E+1]+=b*rr,j(_,2*w+2*E+1),_[2*w+2*E+1]+=y*Nt,j(_,2*w+2*E+1),_[2*w+2*E+2]+=b*Nt,j(_,2*w+2*E+2)}for(w=0;w<m;w++)_[w]=_[2*w+1]<<16|_[2*w];for(w=m;w<2*m;w++)_[w]=0;return new o(_,0)};function j(I,m){for(;(I[m]&65535)!=I[m];)I[m+1]+=I[m]>>>16,I[m]&=65535,m++}function O(I,m){this.g=I,this.h=m}function U(I,m){if(A(m))throw Error("division by zero");if(A(I))return new O(g,g);if(R(I))return m=U(x(I),m),new O(x(m.g),x(m.h));if(R(m))return m=U(I,x(m)),new O(x(m.g),m.h);if(30<I.g.length){if(R(I)||R(m))throw Error("slowDivide_ only works with positive integers.");for(var _=v,w=m;0>=w.l(I);)_=X(_),w=X(w);var E=$(_,1),b=$(w,1);for(w=$(w,2),_=$(_,2);!A(w);){var y=b.add(w);0>=y.l(I)&&(E=E.add(_),b=y),w=$(w,1),_=$(_,1)}return m=k(I,E.j(m)),new O(E,m)}for(E=g;0<=I.l(m);){for(_=Math.max(1,Math.floor(I.m()/m.m())),w=Math.ceil(Math.log(_)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),b=d(_),y=b.j(m);R(y)||0<y.l(I);)_-=w,b=d(_),y=b.j(m);A(b)&&(b=v),E=E.add(b),I=k(I,y)}return new O(E,I)}n.A=function(I){return U(this,I).h},n.and=function(I){for(var m=Math.max(this.g.length,I.g.length),_=[],w=0;w<m;w++)_[w]=this.i(w)&I.i(w);return new o(_,this.h&I.h)},n.or=function(I){for(var m=Math.max(this.g.length,I.g.length),_=[],w=0;w<m;w++)_[w]=this.i(w)|I.i(w);return new o(_,this.h|I.h)},n.xor=function(I){for(var m=Math.max(this.g.length,I.g.length),_=[],w=0;w<m;w++)_[w]=this.i(w)^I.i(w);return new o(_,this.h^I.h)};function X(I){for(var m=I.g.length+1,_=[],w=0;w<m;w++)_[w]=I.i(w)<<1|I.i(w-1)>>>31;return new o(_,I.h)}function $(I,m){var _=m>>5;m%=32;for(var w=I.g.length-_,E=[],b=0;b<w;b++)E[b]=0<m?I.i(b+_)>>>m|I.i(b+_+1)<<32-m:I.i(b+_);return new o(E,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,TE=LP.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Ss=LP.Integer=o}).apply(typeof FP<"u"?FP:typeof self<"u"?self:typeof window<"u"?window:{});var Pg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zi={};var DE,O9,Mu,bE,Kd,Ng,CE,AE,SE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,h){return a==Array.prototype||a==Object.prototype||(a[l]=h.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pg=="object"&&Pg];for(var l=0;l<a.length;++l){var h=a[l];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,l){if(l)e:{var h=r;a=a.split(".");for(var p=0;p<a.length-1;p++){var T=a[p];if(!(T in h))break e;h=h[T]}a=a[a.length-1],p=h[a],l=l(p),l!=p&&l!=null&&e(h,a,{configurable:!0,writable:!0,value:l})}}function s(a,l){a instanceof String&&(a+="");var h=0,p=!1,T={next:function(){if(!p&&h<a.length){var C=h++;return{value:l(C,a[C]),done:!1}}return p=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(a){return a||function(){return s(this,function(l,h){return h})}});var o=o||{},u=this||self;function c(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function d(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function f(a,l,h){return a.call.apply(a.bind,arguments)}function g(a,l,h){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,p),a.apply(l,T)}}return function(){return a.apply(l,arguments)}}function v(a,l,h){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,v.apply(null,arguments)}function D(a,l){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function A(a,l){function h(){}h.prototype=l.prototype,a.aa=l.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(p,T,C){for(var M=Array(arguments.length-2),re=2;re<arguments.length;re++)M[re-2]=arguments[re];return l.prototype[T].apply(p,M)}}function R(a){let l=a.length;if(0<l){let h=Array(l);for(let p=0;p<l;p++)h[p]=a[p];return h}return[]}function x(a,l){for(let h=1;h<arguments.length;h++){let p=arguments[h];if(c(p)){let T=a.length||0,C=p.length||0;a.length=T+C;for(let M=0;M<C;M++)a[T+M]=p[M]}else a.push(p)}}class k{constructor(l,h){this.i=l,this.j=h,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function j(a){return/^[\s\xa0]*$/.test(a)}function O(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function U(a){return U[" "](a),a}U[" "]=function(){};var X=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function $(a,l,h){for(let p in a)l.call(h,a[p],p,a)}function I(a,l){for(let h in a)l.call(void 0,a[h],h,a)}function m(a){let l={};for(let h in a)l[h]=a[h];return l}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,l){let h,p;for(let T=1;T<arguments.length;T++){p=arguments[T];for(h in p)a[h]=p[h];for(let C=0;C<_.length;C++)h=_[C],Object.prototype.hasOwnProperty.call(p,h)&&(a[h]=p[h])}}function E(a){var l=1;a=a.split(":");let h=[];for(;0<l&&a.length;)h.push(a.shift()),l--;return a.length&&h.push(a.join(":")),h}function b(a){u.setTimeout(()=>{throw a},0)}function y(){var a=Zs;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class Nt{constructor(){this.h=this.g=null}add(l,h){let p=rr.get();p.set(l,h),this.h?this.h.next=p:this.g=p,this.h=p}}var rr=new k(()=>new i_,a=>a.reset());class i_{constructor(){this.next=this.g=this.h=null}set(l,h){this.h=l,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let ir,sr=!1,Zs=new Nt,Wc=()=>{let a=u.Promise.resolve(void 0);ir=()=>{a.then(s_)}};var s_=()=>{for(var a;a=y();){try{a.h.call(a.g)}catch(h){b(h)}var l=rr;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}sr=!1};function Kt(){this.s=this.s,this.C=this.C}Kt.prototype.s=!1,Kt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Kt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Fe(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}Fe.prototype.h=function(){this.defaultPrevented=!0};var o_=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};u.addEventListener("test",h,l),u.removeEventListener("test",h,l)}catch{}return a}();function or(a,l){if(Fe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(X){e:{try{U(l.nodeName);var T=!0;break e}catch{}T=!1}T||(l=null)}}else h=="mouseover"?l=a.fromElement:h=="mouseout"&&(l=a.toElement);this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:a_[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&or.aa.h.call(this)}}A(or,Fe);var a_={2:"touch",3:"pen",4:"mouse"};or.prototype.h=function(){or.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ar="closure_listenable_"+(1e6*Math.random()|0),u_=0;function c_(a,l,h,p,T){this.listener=a,this.proxy=null,this.src=l,this.type=h,this.capture=!!p,this.ha=T,this.key=++u_,this.da=this.fa=!1}function fi(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function pi(a){this.src=a,this.g={},this.h=0}pi.prototype.add=function(a,l,h,p,T){var C=a.toString();a=this.g[C],a||(a=this.g[C]=[],this.h++);var M=to(a,l,p,T);return-1<M?(l=a[M],h||(l.fa=!1)):(l=new c_(l,this.src,C,!!p,T),l.fa=h,a.push(l)),l};function eo(a,l){var h=l.type;if(h in a.g){var p=a.g[h],T=Array.prototype.indexOf.call(p,l,void 0),C;(C=0<=T)&&Array.prototype.splice.call(p,T,1),C&&(fi(l),a.g[h].length==0&&(delete a.g[h],a.h--))}}function to(a,l,h,p){for(var T=0;T<a.length;++T){var C=a[T];if(!C.da&&C.listener==l&&C.capture==!!h&&C.ha==p)return T}return-1}var no="closure_lm_"+(1e6*Math.random()|0),ro={};function Kc(a,l,h,p,T){if(p&&p.once)return Yc(a,l,h,p,T);if(Array.isArray(l)){for(var C=0;C<l.length;C++)Kc(a,l[C],h,p,T);return null}return h=ao(h),a&&a[ar]?a.K(l,h,d(p)?!!p.capture:!!p,T):Qc(a,l,h,!1,p,T)}function Qc(a,l,h,p,T,C){if(!l)throw Error("Invalid event type");var M=d(T)?!!T.capture:!!T,re=so(a);if(re||(a[no]=re=new pi(a)),h=re.add(l,h,p,M,C),h.proxy)return h;if(p=l_(),h.proxy=p,p.src=a,p.listener=h,a.addEventListener)o_||(T=M),T===void 0&&(T=!1),a.addEventListener(l.toString(),p,T);else if(a.attachEvent)a.attachEvent(Xc(l.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function l_(){function a(h){return l.call(a.src,a.listener,h)}let l=d_;return a}function Yc(a,l,h,p,T){if(Array.isArray(l)){for(var C=0;C<l.length;C++)Yc(a,l[C],h,p,T);return null}return h=ao(h),a&&a[ar]?a.L(l,h,d(p)?!!p.capture:!!p,T):Qc(a,l,h,!0,p,T)}function Jc(a,l,h,p,T){if(Array.isArray(l))for(var C=0;C<l.length;C++)Jc(a,l[C],h,p,T);else p=d(p)?!!p.capture:!!p,h=ao(h),a&&a[ar]?(a=a.i,l=String(l).toString(),l in a.g&&(C=a.g[l],h=to(C,h,p,T),-1<h&&(fi(C[h]),Array.prototype.splice.call(C,h,1),C.length==0&&(delete a.g[l],a.h--)))):a&&(a=so(a))&&(l=a.g[l.toString()],a=-1,l&&(a=to(l,h,p,T)),(h=-1<a?l[a]:null)&&io(h))}function io(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[ar])eo(l.i,a);else{var h=a.type,p=a.proxy;l.removeEventListener?l.removeEventListener(h,p,a.capture):l.detachEvent?l.detachEvent(Xc(h),p):l.addListener&&l.removeListener&&l.removeListener(p),(h=so(l))?(eo(h,a),h.h==0&&(h.src=null,l[no]=null)):fi(a)}}}function Xc(a){return a in ro?ro[a]:ro[a]="on"+a}function d_(a,l){if(a.da)a=!0;else{l=new or(l,this);var h=a.listener,p=a.ha||a.src;a.fa&&io(a),a=h.call(p,l)}return a}function so(a){return a=a[no],a instanceof pi?a:null}var oo="__closure_events_fn_"+(1e9*Math.random()>>>0);function ao(a){return typeof a=="function"?a:(a[oo]||(a[oo]=function(l){return a.handleEvent(l)}),a[oo])}function Le(){Kt.call(this),this.i=new pi(this),this.M=this,this.F=null}A(Le,Kt),Le.prototype[ar]=!0,Le.prototype.removeEventListener=function(a,l,h,p){Jc(this,a,l,h,p)};function qe(a,l){var h,p=a.F;if(p)for(h=[];p;p=p.F)h.push(p);if(a=a.M,p=l.type||l,typeof l=="string")l=new Fe(l,a);else if(l instanceof Fe)l.target=l.target||a;else{var T=l;l=new Fe(p,a),w(l,T)}if(T=!0,h)for(var C=h.length-1;0<=C;C--){var M=l.g=h[C];T=gi(M,p,!0,l)&&T}if(M=l.g=a,T=gi(M,p,!0,l)&&T,T=gi(M,p,!1,l)&&T,h)for(C=0;C<h.length;C++)M=l.g=h[C],T=gi(M,p,!1,l)&&T}Le.prototype.N=function(){if(Le.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var h=a.g[l],p=0;p<h.length;p++)fi(h[p]);delete a.g[l],a.h--}}this.F=null},Le.prototype.K=function(a,l,h,p){return this.i.add(String(a),l,!1,h,p)},Le.prototype.L=function(a,l,h,p){return this.i.add(String(a),l,!0,h,p)};function gi(a,l,h,p){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var T=!0,C=0;C<l.length;++C){var M=l[C];if(M&&!M.da&&M.capture==h){var re=M.listener,Ae=M.ha||M.src;M.fa&&eo(a.i,M),T=re.call(Ae,p)!==!1&&T}}return T&&!p.defaultPrevented}function Zc(a,l,h){if(typeof a=="function")h&&(a=v(a,h));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:u.setTimeout(a,l||0)}function el(a){a.g=Zc(()=>{a.g=null,a.i&&(a.i=!1,el(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class h_ extends Kt{constructor(l,h){super(),this.m=l,this.l=h,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:el(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ur(a){Kt.call(this),this.h=a,this.g={}}A(ur,Kt);var tl=[];function nl(a){$(a.g,function(l,h){this.g.hasOwnProperty(h)&&io(l)},a),a.g={}}ur.prototype.N=function(){ur.aa.N.call(this),nl(this)},ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uo=u.JSON.stringify,f_=u.JSON.parse,p_=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function co(){}co.prototype.h=null;function rl(a){return a.h||(a.h=a.i())}function il(){}var cr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lo(){Fe.call(this,"d")}A(lo,Fe);function ho(){Fe.call(this,"c")}A(ho,Fe);var ln={},sl=null;function mi(){return sl=sl||new Le}ln.La="serverreachability";function ol(a){Fe.call(this,ln.La,a)}A(ol,Fe);function lr(a){let l=mi();qe(l,new ol(l))}ln.STAT_EVENT="statevent";function al(a,l){Fe.call(this,ln.STAT_EVENT,a),this.stat=l}A(al,Fe);function ze(a){let l=mi();qe(l,new al(l,a))}ln.Ma="timingevent";function ul(a,l){Fe.call(this,ln.Ma,a),this.size=l}A(ul,Fe);function dr(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},l)}function hr(){this.g=!0}hr.prototype.xa=function(){this.g=!1};function g_(a,l,h,p,T,C){a.info(function(){if(a.g)if(C)for(var M="",re=C.split("&"),Ae=0;Ae<re.length;Ae++){var J=re[Ae].split("=");if(1<J.length){var je=J[0];J=J[1];var Be=je.split("_");M=2<=Be.length&&Be[1]=="type"?M+(je+"="+J+"&"):M+(je+"=redacted&")}}else M=null;else M=C;return"XMLHTTP REQ ("+p+") [attempt "+T+"]: "+l+`
`+h+`
`+M})}function m_(a,l,h,p,T,C,M){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+T+"]: "+l+`
`+h+`
`+C+" "+M})}function Pn(a,l,h,p){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+__(a,h)+(p?" "+p:"")})}function y_(a,l){a.info(function(){return"TIMEOUT: "+l})}hr.prototype.info=function(){};function __(a,l){if(!a.g)return l;if(!l)return null;try{var h=JSON.parse(l);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var p=h[a];if(!(2>p.length)){var T=p[1];if(Array.isArray(T)&&!(1>T.length)){var C=T[0];if(C!="noop"&&C!="stop"&&C!="close")for(var M=1;M<T.length;M++)T[M]=""}}}}return uo(h)}catch{return l}}var yi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},cl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fo;function _i(){}A(_i,co),_i.prototype.g=function(){return new XMLHttpRequest},_i.prototype.i=function(){return{}},fo=new _i;function Qt(a,l,h,p){this.j=a,this.i=l,this.l=h,this.R=p||1,this.U=new ur(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ll}function ll(){this.i=null,this.g="",this.h=!1}var dl={},po={};function go(a,l,h){a.L=1,a.v=Ei(kt(l)),a.m=h,a.P=!0,hl(a,null)}function hl(a,l){a.F=Date.now(),vi(a),a.A=kt(a.v);var h=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),Cl(h.i,"t",p),a.C=0,h=a.j.J,a.h=new ll,a.g=zl(a.j,h?l:null,!a.m),0<a.O&&(a.M=new h_(v(a.Y,a,a.g),a.O)),l=a.U,h=a.g,p=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(tl[0]=T.toString()),T=tl);for(var C=0;C<T.length;C++){var M=Kc(h,T[C],p||l.handleEvent,!1,l.h||l);if(!M)break;l.g[M.key]=M}l=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),lr(),g_(a.i,a.u,a.A,a.l,a.R,a.m)}Qt.prototype.ca=function(a){a=a.target;let l=this.M;l&&Ot(a)==3?l.j():this.Y(a)},Qt.prototype.Y=function(a){try{if(a==this.g)e:{let Be=Ot(this.g);var l=this.g.Ba();let On=this.g.Z();if(!(3>Be)&&(Be!=3||this.g&&(this.h.h||this.g.oa()||Nl(this.g)))){this.J||Be!=4||l==7||(l==8||0>=On?lr(3):lr(2)),mo(this);var h=this.g.Z();this.X=h;t:if(fl(this)){var p=Nl(this.g);a="";var T=p.length,C=Ot(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dn(this),fr(this);var M="";break t}this.h.i=new u.TextDecoder}for(l=0;l<T;l++)this.h.h=!0,a+=this.h.i.decode(p[l],{stream:!(C&&l==T-1)});p.length=0,this.h.g+=a,this.C=0,M=this.h.g}else M=this.g.oa();if(this.o=h==200,m_(this.i,this.u,this.A,this.l,this.R,Be,h),this.o){if(this.T&&!this.K){t:{if(this.g){var re,Ae=this.g;if((re=Ae.g?Ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(re)){var J=re;break t}}J=null}if(h=J)Pn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yo(this,h);else{this.o=!1,this.s=3,ze(12),dn(this),fr(this);break e}}if(this.P){h=!0;let ut;for(;!this.J&&this.C<M.length;)if(ut=v_(this,M),ut==po){Be==4&&(this.s=4,ze(14),h=!1),Pn(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==dl){this.s=4,ze(15),Pn(this.i,this.l,M,"[Invalid Chunk]"),h=!1;break}else Pn(this.i,this.l,ut,null),yo(this,ut);if(fl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||M.length!=0||this.h.h||(this.s=1,ze(16),h=!1),this.o=this.o&&h,!h)Pn(this.i,this.l,M,"[Invalid Chunked Response]"),dn(this),fr(this);else if(0<M.length&&!this.W){this.W=!0;var je=this.j;je.g==this&&je.ba&&!je.M&&(je.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),To(je),je.M=!0,ze(11))}}else Pn(this.i,this.l,M,null),yo(this,M);Be==4&&dn(this),this.o&&!this.J&&(Be==4?Bl(this.j,this):(this.o=!1,vi(this)))}else V_(this.g),h==400&&0<M.indexOf("Unknown SID")?(this.s=3,ze(12)):(this.s=0,ze(13)),dn(this),fr(this)}}}catch{}finally{}};function fl(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function v_(a,l){var h=a.C,p=l.indexOf(`
`,h);return p==-1?po:(h=Number(l.substring(h,p)),isNaN(h)?dl:(p+=1,p+h>l.length?po:(l=l.slice(p,p+h),a.C=p+h,l)))}Qt.prototype.cancel=function(){this.J=!0,dn(this)};function vi(a){a.S=Date.now()+a.I,pl(a,a.I)}function pl(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=dr(v(a.ba,a),l)}function mo(a){a.B&&(u.clearTimeout(a.B),a.B=null)}Qt.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(y_(this.i,this.A),this.L!=2&&(lr(),ze(17)),dn(this),this.s=2,fr(this)):pl(this,this.S-a)};function fr(a){a.j.G==0||a.J||Bl(a.j,a)}function dn(a){mo(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,nl(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function yo(a,l){try{var h=a.j;if(h.G!=0&&(h.g==a||_o(h.h,a))){if(!a.K&&_o(h.h,a)&&h.G==3){try{var p=h.Da.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var T=p;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Ai(h),bi(h);else break e;Eo(h),ze(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=dr(v(h.Za,h),6e3));if(1>=yl(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else fn(h,11)}else if((a.K||h.g==a)&&Ai(h),!j(l))for(T=h.Da.g.parse(l),l=0;l<T.length;l++){let J=T[l];if(h.T=J[0],J=J[1],h.G==2)if(J[0]=="c"){h.K=J[1],h.ia=J[2];let je=J[3];je!=null&&(h.la=je,h.j.info("VER="+h.la));let Be=J[4];Be!=null&&(h.Aa=Be,h.j.info("SVER="+h.Aa));let On=J[5];On!=null&&typeof On=="number"&&0<On&&(p=1.5*On,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;let ut=a.g;if(ut){let xi=ut.g?ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xi){var C=p.h;C.g||xi.indexOf("spdy")==-1&&xi.indexOf("quic")==-1&&xi.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(vo(C,C.h),C.h=null))}if(p.D){let Do=ut.g?ut.g.getResponseHeader("X-HTTP-Session-Id"):null;Do&&(p.ya=Do,ae(p.I,p.D,Do))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var M=a;if(p.qa=ql(p,p.J?p.ia:null,p.W),M.K){_l(p.h,M);var re=M,Ae=p.L;Ae&&(re.I=Ae),re.B&&(mo(re),vi(re)),p.g=M}else Ll(p);0<h.i.length&&Ci(h)}else J[0]!="stop"&&J[0]!="close"||fn(h,7);else h.G==3&&(J[0]=="stop"||J[0]=="close"?J[0]=="stop"?fn(h,7):Io(h):J[0]!="noop"&&h.l&&h.l.ta(J),h.v=0)}}lr(4)}catch{}}var w_=class{constructor(a,l){this.g=a,this.map=l}};function gl(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ml(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function yl(a){return a.h?1:a.g?a.g.size:0}function _o(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function vo(a,l){a.g?a.g.add(l):a.h=l}function _l(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}gl.prototype.cancel=function(){if(this.i=vl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function vl(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let h of a.g.values())l=l.concat(h.D);return l}return R(a.i)}function I_(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var l=[],h=a.length,p=0;p<h;p++)l.push(a[p]);return l}l=[],h=0;for(p in a)l[h++]=a[p];return l}function E_(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var l=[];a=a.length;for(var h=0;h<a;h++)l.push(h);return l}l=[],h=0;for(let p in a)l[h++]=p;return l}}}function wl(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var h=E_(a),p=I_(a),T=p.length,C=0;C<T;C++)l.call(void 0,p[C],h&&h[C],a)}var Il=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function T_(a,l){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var p=a[h].indexOf("="),T=null;if(0<=p){var C=a[h].substring(0,p);T=a[h].substring(p+1)}else C=a[h];l(C,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function hn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof hn){this.h=a.h,wi(this,a.j),this.o=a.o,this.g=a.g,Ii(this,a.s),this.l=a.l;var l=a.i,h=new mr;h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),El(this,h),this.m=a.m}else a&&(l=String(a).match(Il))?(this.h=!1,wi(this,l[1]||"",!0),this.o=pr(l[2]||""),this.g=pr(l[3]||"",!0),Ii(this,l[4]),this.l=pr(l[5]||"",!0),El(this,l[6]||"",!0),this.m=pr(l[7]||"")):(this.h=!1,this.i=new mr(null,this.h))}hn.prototype.toString=function(){var a=[],l=this.j;l&&a.push(gr(l,Tl,!0),":");var h=this.g;return(h||l=="file")&&(a.push("//"),(l=this.o)&&a.push(gr(l,Tl,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(gr(h,h.charAt(0)=="/"?C_:b_,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",gr(h,S_)),a.join("")};function kt(a){return new hn(a)}function wi(a,l,h){a.j=h?pr(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function Ii(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function El(a,l,h){l instanceof mr?(a.i=l,x_(a.i,a.h)):(h||(l=gr(l,A_)),a.i=new mr(l,a.h))}function ae(a,l,h){a.i.set(l,h)}function Ei(a){return ae(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function pr(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function gr(a,l,h){return typeof a=="string"?(a=encodeURI(a).replace(l,D_),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function D_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Tl=/[#\/\?@]/g,b_=/[#\?:]/g,C_=/[#\?]/g,A_=/[#\?@]/g,S_=/#/g;function mr(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function Yt(a){a.g||(a.g=new Map,a.h=0,a.i&&T_(a.i,function(l,h){a.add(decodeURIComponent(l.replace(/\+/g," ")),h)}))}n=mr.prototype,n.add=function(a,l){Yt(this),this.i=null,a=Nn(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(l),this.h+=1,this};function Dl(a,l){Yt(a),l=Nn(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function bl(a,l){return Yt(a),l=Nn(a,l),a.g.has(l)}n.forEach=function(a,l){Yt(this),this.g.forEach(function(h,p){h.forEach(function(T){a.call(l,T,p,this)},this)},this)},n.na=function(){Yt(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),h=[];for(let p=0;p<l.length;p++){let T=a[p];for(let C=0;C<T.length;C++)h.push(l[p])}return h},n.V=function(a){Yt(this);let l=[];if(typeof a=="string")bl(this,a)&&(l=l.concat(this.g.get(Nn(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)l=l.concat(a[h])}return l},n.set=function(a,l){return Yt(this),this.i=null,a=Nn(this,a),bl(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},n.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function Cl(a,l,h){Dl(a,l),0<h.length&&(a.i=null,a.g.set(Nn(a,l),R(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var h=0;h<l.length;h++){var p=l[h];let C=encodeURIComponent(String(p)),M=this.V(p);for(p=0;p<M.length;p++){var T=C;M[p]!==""&&(T+="="+encodeURIComponent(String(M[p]))),a.push(T)}}return this.i=a.join("&")};function Nn(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function x_(a,l){l&&!a.j&&(Yt(a),a.i=null,a.g.forEach(function(h,p){var T=p.toLowerCase();p!=T&&(Dl(this,p),Cl(this,T,h))},a)),a.j=l}function R_(a,l){let h=new hr;if(u.Image){let p=new Image;p.onload=D(Jt,h,"TestLoadImage: loaded",!0,l,p),p.onerror=D(Jt,h,"TestLoadImage: error",!1,l,p),p.onabort=D(Jt,h,"TestLoadImage: abort",!1,l,p),p.ontimeout=D(Jt,h,"TestLoadImage: timeout",!1,l,p),u.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else l(!1)}function M_(a,l){let h=new hr,p=new AbortController,T=setTimeout(()=>{p.abort(),Jt(h,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:p.signal}).then(C=>{clearTimeout(T),C.ok?Jt(h,"TestPingServer: ok",!0,l):Jt(h,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(T),Jt(h,"TestPingServer: error",!1,l)})}function Jt(a,l,h,p,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),p(h)}catch{}}function P_(){this.g=new p_}function N_(a,l,h){let p=h||"";try{wl(a,function(T,C){let M=T;d(T)&&(M=uo(T)),l.push(p+C+"="+encodeURIComponent(M))})}catch(T){throw l.push(p+"type="+encodeURIComponent("_badmap")),T}}function yr(a){this.l=a.Ub||null,this.j=a.eb||!1}A(yr,co),yr.prototype.g=function(){return new Ti(this.l,this.j)},yr.prototype.i=function(a){return function(){return a}}({});function Ti(a,l){Le.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Ti,Le),n=Ti.prototype,n.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,vr(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||u).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_r(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,vr(this)),this.g&&(this.readyState=3,vr(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Al(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Al(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?_r(this):vr(this),this.readyState==3&&Al(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,_r(this))},n.Qa=function(a){this.g&&(this.response=a,_r(this))},n.ga=function(){this.g&&_r(this)};function _r(a){a.readyState=4,a.l=null,a.j=null,a.v=null,vr(a)}n.setRequestHeader=function(a,l){this.u.append(a,l)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var h=l.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=l.next();return a.join(`\r
`)};function vr(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ti.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Sl(a){let l="";return $(a,function(h,p){l+=p,l+=":",l+=h,l+=`\r
`}),l}function wo(a,l,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=Sl(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):ae(a,l,h))}function he(a){Le.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(he,Le);var k_=/^https?$/i,O_=["POST","PUT"];n=he.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,l,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fo.g(),this.v=this.o?rl(this.o):rl(fo),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(C){xl(this,C);return}if(a=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var T in p)h.set(T,p[T]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let C of p.keys())h.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),T=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(O_,l,void 0))||p||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,M]of h)this.g.setRequestHeader(C,M);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pl(this),this.u=!0,this.g.send(a),this.u=!1}catch(C){xl(this,C)}};function xl(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,Rl(a),Di(a)}function Rl(a){a.A||(a.A=!0,qe(a,"complete"),qe(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,qe(this,"complete"),qe(this,"abort"),Di(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Di(this,!0)),he.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ml(this):this.bb())},n.bb=function(){Ml(this)};function Ml(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Ot(a)!=4||a.Z()!=2)){if(a.u&&Ot(a)==4)Zc(a.Ea,0,a);else if(qe(a,"readystatechange"),Ot(a)==4){a.h=!1;try{let M=a.Z();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var h;if(!(h=l)){var p;if(p=M===0){var T=String(a.D).match(Il)[1]||null;!T&&u.self&&u.self.location&&(T=u.self.location.protocol.slice(0,-1)),p=!k_.test(T?T.toLowerCase():"")}h=p}if(h)qe(a,"complete"),qe(a,"success");else{a.m=6;try{var C=2<Ot(a)?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.Z()+"]",Rl(a)}}finally{Di(a)}}}}function Di(a,l){if(a.g){Pl(a);let h=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||qe(a,"ready");try{h.onreadystatechange=p}catch{}}}function Pl(a){a.I&&(u.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Ot(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Ot(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),f_(l)}};function Nl(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function V_(a){let l={};a=(a.g&&2<=Ot(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(j(a[p]))continue;var h=E(a[p]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let C=l[T]||[];l[T]=C,C.push(h)}I(l,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(a,l,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||l}function kl(a){this.Aa=0,this.i=[],this.j=new hr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wr("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wr("baseRetryDelayMs",5e3,a),this.cb=wr("retryDelaySeedMs",1e4,a),this.Wa=wr("forwardChannelMaxRetries",2,a),this.wa=wr("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new gl(a&&a.concurrentRequestLimit),this.Da=new P_,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=kl.prototype,n.la=8,n.G=1,n.connect=function(a,l,h,p){ze(0),this.W=a,this.H=l||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=ql(this,null,this.W),Ci(this)};function Io(a){if(Ol(a),a.G==3){var l=a.U++,h=kt(a.I);if(ae(h,"SID",a.K),ae(h,"RID",l),ae(h,"TYPE","terminate"),Ir(a,h),l=new Qt(a,a.j,l),l.L=2,l.v=Ei(kt(h)),h=!1,u.navigator&&u.navigator.sendBeacon)try{h=u.navigator.sendBeacon(l.v.toString(),"")}catch{}!h&&u.Image&&(new Image().src=l.v,h=!0),h||(l.g=zl(l.j,null),l.g.ea(l.v)),l.F=Date.now(),vi(l)}$l(a)}function bi(a){a.g&&(To(a),a.g.cancel(),a.g=null)}function Ol(a){bi(a),a.u&&(u.clearTimeout(a.u),a.u=null),Ai(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function Ci(a){if(!ml(a.h)&&!a.s){a.s=!0;var l=a.Ga;ir||Wc(),sr||(ir(),sr=!0),Zs.add(l,a),a.B=0}}function F_(a,l){return yl(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=dr(v(a.Ga,a,l),Ul(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new Qt(this,this.j,a),C=this.o;if(this.S&&(C?(C=m(C),w(C,this.S)):C=this.S),this.m!==null||this.O||(T.H=C,C=null),this.P)e:{for(var l=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,4096<l){l=h;break e}if(l===4096||h===this.i.length-1){l=h+1;break e}}l=1e3}else l=1e3;l=Fl(this,T,l),h=kt(this.I),ae(h,"RID",a),ae(h,"CVER",22),this.D&&ae(h,"X-HTTP-Session-Id",this.D),Ir(this,h),C&&(this.O?l="headers="+encodeURIComponent(String(Sl(C)))+"&"+l:this.m&&wo(h,this.m,C)),vo(this.h,T),this.Ua&&ae(h,"TYPE","init"),this.P?(ae(h,"$req",l),ae(h,"SID","null"),T.T=!0,go(T,h,null)):go(T,h,l),this.G=2}}else this.G==3&&(a?Vl(this,a):this.i.length==0||ml(this.h)||Vl(this))};function Vl(a,l){var h;l?h=l.l:h=a.U++;let p=kt(a.I);ae(p,"SID",a.K),ae(p,"RID",h),ae(p,"AID",a.T),Ir(a,p),a.m&&a.o&&wo(p,a.m,a.o),h=new Qt(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),l&&(a.i=l.D.concat(a.i)),l=Fl(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),vo(a.h,h),go(h,p,l)}function Ir(a,l){a.H&&$(a.H,function(h,p){ae(l,p,h)}),a.l&&wl({},function(h,p){ae(l,p,h)})}function Fl(a,l,h){h=Math.min(a.i.length,h);var p=a.l?v(a.l.Na,a.l,a):null;e:{var T=a.i;let C=-1;for(;;){let M=["count="+h];C==-1?0<h?(C=T[0].g,M.push("ofs="+C)):C=0:M.push("ofs="+C);let re=!0;for(let Ae=0;Ae<h;Ae++){let J=T[Ae].g,je=T[Ae].map;if(J-=C,0>J)C=Math.max(0,T[Ae].g-100),re=!1;else try{N_(je,M,"req"+J+"_")}catch{p&&p(je)}}if(re){p=M.join("&");break e}}}return a=a.i.splice(0,h),l.D=a,p}function Ll(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;ir||Wc(),sr||(ir(),sr=!0),Zs.add(l,a),a.v=0}}function Eo(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=dr(v(a.Fa,a),Ul(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,jl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=dr(v(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ze(10),bi(this),jl(this))};function To(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function jl(a){a.g=new Qt(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=kt(a.qa);ae(l,"RID","rpc"),ae(l,"SID",a.K),ae(l,"AID",a.T),ae(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&ae(l,"TO",a.ja),ae(l,"TYPE","xmlhttp"),Ir(a,l),a.m&&a.o&&wo(l,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Ei(kt(l)),h.m=null,h.P=!0,hl(h,a)}n.Za=function(){this.C!=null&&(this.C=null,bi(this),Eo(this),ze(19))};function Ai(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function Bl(a,l){var h=null;if(a.g==l){Ai(a),To(a),a.g=null;var p=2}else if(_o(a.h,l))h=l.D,_l(a.h,l),p=1;else return;if(a.G!=0){if(l.o)if(p==1){h=l.m?l.m.length:0,l=Date.now()-l.F;var T=a.B;p=mi(),qe(p,new ul(p,h)),Ci(a)}else Ll(a);else if(T=l.s,T==3||T==0&&0<l.X||!(p==1&&F_(a,l)||p==2&&Eo(a)))switch(h&&0<h.length&&(l=a.h,l.i=l.i.concat(h)),T){case 1:fn(a,5);break;case 4:fn(a,10);break;case 3:fn(a,6);break;default:fn(a,2)}}}function Ul(a,l){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*l}function fn(a,l){if(a.j.info("Error code "+l),l==2){var h=v(a.fb,a),p=a.Xa;let T=!p;p=new hn(p||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||wi(p,"https"),Ei(p),T?R_(p.toString(),h):M_(p.toString(),h)}else ze(2);a.G=0,a.l&&a.l.sa(l),$l(a),Ol(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ze(2)):(this.j.info("Failed to ping google.com"),ze(1))};function $l(a){if(a.G=0,a.ka=[],a.l){let l=vl(a.h);(l.length!=0||a.i.length!=0)&&(x(a.ka,l),x(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function ql(a,l,h){var p=h instanceof hn?kt(h):new hn(h);if(p.g!="")l&&(p.g=l+"."+p.g),Ii(p,p.s);else{var T=u.location;p=T.protocol,l=l?l+"."+T.hostname:T.hostname,T=+T.port;var C=new hn(null);p&&wi(C,p),l&&(C.g=l),T&&Ii(C,T),h&&(C.l=h),p=C}return h=a.D,l=a.ya,h&&l&&ae(p,h,l),ae(p,"VER",a.la),Ir(a,p),p}function zl(a,l,h){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new he(new yr({eb:h})):new he(a.pa),l.Ha(a.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gl(){}n=Gl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Si(){}Si.prototype.g=function(a,l){return new Je(a,l)};function Je(a,l){Le.call(this),this.g=new kl(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!j(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!j(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new kn(this)}A(Je,Le),Je.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Je.prototype.close=function(){Io(this.g)},Je.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=uo(a),a=h);l.i.push(new w_(l.Ya++,a)),l.G==3&&Ci(l)},Je.prototype.N=function(){this.g.l=null,delete this.j,Io(this.g),delete this.g,Je.aa.N.call(this)};function Hl(a){lo.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let h in l){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}A(Hl,lo);function Wl(){ho.call(this),this.status=1}A(Wl,ho);function kn(a){this.g=a}A(kn,Gl),kn.prototype.ua=function(){qe(this.g,"a")},kn.prototype.ta=function(a){qe(this.g,new Hl(a))},kn.prototype.sa=function(a){qe(this.g,new Wl)},kn.prototype.ra=function(){qe(this.g,"b")},Si.prototype.createWebChannel=Si.prototype.g,Je.prototype.send=Je.prototype.o,Je.prototype.open=Je.prototype.m,Je.prototype.close=Je.prototype.close,SE=zi.createWebChannelTransport=function(){return new Si},AE=zi.getStatEventTarget=function(){return mi()},CE=zi.Event=ln,Ng=zi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yi.NO_ERROR=0,yi.TIMEOUT=8,yi.HTTP_ERROR=6,Kd=zi.ErrorCode=yi,cl.COMPLETE="complete",bE=zi.EventType=cl,il.EventType=cr,cr.OPEN="a",cr.CLOSE="b",cr.ERROR="c",cr.MESSAGE="d",Le.prototype.listen=Le.prototype.K,Mu=zi.WebChannel=il,O9=zi.FetchXmlHttpFactory=yr,he.prototype.listenOnce=he.prototype.L,he.prototype.getLastError=he.prototype.Ka,he.prototype.getLastErrorCode=he.prototype.Ba,he.prototype.getStatus=he.prototype.Z,he.prototype.getResponseJson=he.prototype.Oa,he.prototype.getResponseText=he.prototype.oa,he.prototype.send=he.prototype.ea,he.prototype.setWithCredentials=he.prototype.Ha,DE=zi.XhrIo=he}).apply(typeof Pg<"u"?Pg:typeof self<"u"?self:typeof window<"u"?window:{});var jP="@firebase/firestore";var xt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");var uc="10.14.0";var Os=new pf("@firebase/firestore");function Vu(){return Os.logLevel}function NT(n){Os.setLogLevel(n)}function F(n,...e){if(Os.logLevel<=Fr.DEBUG){let t=e.map(kT);Os.debug(`Firestore (${uc}): ${n}`,...t)}}function vt(n,...e){if(Os.logLevel<=Fr.ERROR){let t=e.map(kT);Os.error(`Firestore (${uc}): ${n}`,...t)}}function Rr(n,...e){if(Os.logLevel<=Fr.WARN){let t=e.map(kT);Os.warn(`Firestore (${uc}): ${n}`,...t)}}function kT(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function K(n="Unexpected state"){let e=`FIRESTORE (${uc}) INTERNAL ASSERTION FAILED: `+n;throw vt(e),new Error(e)}function Z(n,e){n||K()}function $N(n,e){n||K()}function q(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends PA{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Bt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var qg=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},kE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xt.UNAUTHENTICATED))}shutdown(){}},OE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},VE=class{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Z(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Bt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Bt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>S(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},u=c=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?u(c):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Bt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Z(typeof r.accessToken=="string"),new qg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Z(e===null||typeof e=="string"),new xt(e)}},FE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},LE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new FE(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},jE=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},BE=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Z(this.o===void 0);let r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Z(typeof t.token=="string"),this.R=t.token,new jE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function V9(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var zg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=V9(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function pe(n,e){return n<e?-1:n>e?1:0}function Gu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function qN(n){return n+"\0"}var dt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new V(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new V(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new V(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ne=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new dt(0,0))}static max(){return new n(new dt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Gg=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(),r===void 0?r=e.length-t:r>e.length-t&&K(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Pe=class n extends Gg{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},F9=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wt=class n extends Gg{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return F9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new V(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let u=e[i];if(u==="\\"){if(i+1===e.length)throw new V(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new V(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(o=!o,i++):u!=="."||o?(r+=u,i++):(s(),i++)}if(s(),o)throw new V(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var z=class n{constructor(e){this.path=e}static fromPath(e){return new n(Pe.fromString(e))}static fromName(e){return new n(Pe.fromString(e).popFirst(5))}static empty(){return new n(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Pe(e.slice()))}};var Hu=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function UE(n){return n.fields.find(e=>e.kind===2)}function sa(n){return n.fields.filter(e=>e.kind!==2)}Hu.UNKNOWN_ID=-1;var $u=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var oh=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Zn.min())}};function zN(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new dt(t+1,0):new dt(t,r));return new Zn(i,z.empty(),e)}function GN(n){return new Zn(n.readTime,n.key,-1)}var Zn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ne.min(),z.empty(),-1)}static max(){return new n(ne.max(),z.empty(),-1)}};function OT(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=z.comparator(n.documentKey,e.documentKey),t!==0?t:pe(n.largestBatchId,e.largestBatchId))}var HN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Gs(n){return S(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==HN)throw n;F("LocalStore","Unexpectedly lost primary lease")})}var P=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(u=>{++i,u.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),u=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(f=>{o[d]=f,++u,u===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};var Wg=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Bt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new da(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=VT(r.target.error);this.V.reject(new da(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(s){throw new da(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(F("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new qE(t)}},Vs=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Kl())===12.2&&vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return F("SimpleDb","Removing database:",e),oa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ff())return!1;if(n.v())return!0;let e=Kl(),t=n.S(e),r=0<t&&t<10,i=WN(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return S(this,null,function*(){return this.db||(F("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;t(o)},i.onblocked=()=>{r(new da(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new V(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new V(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new da(e,o))},i.onupgradeneeded=s=>{F("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{F("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return S(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let u=Wg.open(this.db,e,s?"readonly":"readwrite",r),c=i(u).next(d=>(u.g(),d)).catch(d=>(u.abort(d),P.reject(d))).toPromise();return c.catch(()=>{}),yield u.m,c}catch(u){let c=u,d=c.name!=="FirebaseError"&&o<3;if(F("SimpleDb","Transaction failed with error:",c.message,"Retrying:",d),this.close(),!d)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function WN(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var $E=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return oa(this.B.delete())}},da=class extends V{constructor(e,t){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Hs(n){return n.name==="IndexedDbTransactionError"}var qE=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(F("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(F("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),oa(r)}add(e){return F("SimpleDb","ADD",this.store.name,e,e),oa(this.store.add(e))}get(e){return oa(this.store.get(e)).next(t=>(t===void 0&&(t=null),F("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return F("SimpleDb","DELETE",this.store.name,e),oa(this.store.delete(e))}count(){return F("SimpleDb","COUNT",this.store.name),oa(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new P((o,u)=>{s.onerror=c=>{u(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(u,c)=>{o.push(c)}).next(()=>o)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new P((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){F("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,u)=>u.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new P((r,i)=>{t.onerror=s=>{let o=VT(s.target.error);i(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(u=>{u?o.continue():r()}):r()}})}W(e,t){let r=[];return new P((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let u=o.target.result;if(!u)return void i();let c=new $E(u),d=t(u.primaryKey,u.value,c);if(d instanceof P){let f=d.catch(g=>(c.done(),P.reject(g)));r.push(f)}c.isDone?i():c.K===null?u.continue():u.continue(c.K)}}).next(()=>P.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function oa(n){return new P((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=VT(r.target.error);t(i)}})}var BP=!1;function VT(n){let e=Vs.S(Kl());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new V("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return BP||(BP=!0,setTimeout(()=>{throw r},0)),r}}return n}var zE=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){F("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>S(this,null,function*(){this.task=null;try{F("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Hs(t)?F("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Gs(t)}yield this.X(6e4)}))}},GE=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return S(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,s=!0;return P.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return F("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(u=>{i-=u,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(u=>(F("IndexBackfiller",`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{let o=GN(s);OT(o,r)>0&&(r=o)}),new Zn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var $n=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Ah(n){return n==null}function ah(n){return n===0&&1/n==-1/0}function KN(n){return typeof n=="number"&&Number.isInteger(n)&&!ah(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function wn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=UP(e)),e=L9(n.get(t),e);return UP(e)}function L9(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function UP(n){return n+""}function Xr(n){let e=n.length;if(Z(e>=2),e===2)return Z(n.charAt(0)===""&&n.charAt(1)===""),Pe.emptyPath();let t=e-2,r=[],i="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&K(),n.charAt(o+1)){case"":let u=n.substring(s,o),c;i.length===0?c=u:(i+=u,c=i,i=""),r.push(c);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:K()}s=o+2}return new Pe(r)}var $P=["userId","batchId"];function Lg(n,e){return[n,wn(e)]}function QN(n,e,t){return[n,wn(e),t]}var j9={},B9=["prefixPath","collectionGroup","readTime","documentId"],U9=["prefixPath","collectionGroup","documentId"],$9=["collectionGroup","readTime","prefixPath","documentId"],q9=["canonicalId","targetId"],z9=["targetId","path"],G9=["path","targetId"],H9=["collectionId","parent"],W9=["indexId","uid"],K9=["uid","sequenceNumber"],Q9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Y9=["indexId","uid","orderedDocumentKey"],J9=["userId","collectionPath","documentId"],X9=["userId","collectionPath","largestBatchId"],Z9=["userId","collectionGroup","largestBatchId"],YN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ez=[...YN,"documentOverlays"],JN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],XN=JN,FT=[...XN,"indexConfiguration","indexState","indexEntries"],tz=FT,nz=[...FT,"globals"];var uh=class extends Hg{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function Ut(n,e){let t=q(n);return Vs.F(t._e,e)}function qP(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ta(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var st=class n{constructor(e,t){this.comparator=e,this.root=t||ei.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ei.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ei.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uu(this.root,e,this.comparator,!0)}},Uu=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ei=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};ei.EMPTY=null,ei.RED=!0,ei.BLACK=!1;ei.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,t,r,i,s){return this}insert(e,t,r){return new ei(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var et=class n{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Kg(this.data.getIterator())}getIteratorFrom(e){return new Kg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Kg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Pu(n){return n.hasNext()?n.getNext():void 0}var qn=class n{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new n([])}unionWith(e){let t=new et(wt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gu(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Qg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function e1(){return typeof atob<"u"}var Et=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Qg("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Et.EMPTY_BYTE_STRING=new Et("");var rz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wi(n){if(Z(!!n),typeof n=="string"){let e=0,t=rz.exec(n);if(Z(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(n.seconds),nanos:ot(n.nanos)}}function ot(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fs(n){return typeof n=="string"?Et.fromBase64String(n):Et.fromUint8Array(n)}function Bm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function LT(n){let e=n.mapValue.fields.__previous_value__;return Bm(e)?LT(e):e}function ch(n){let e=Wi(n.mapValue.fields.__local_write_time__.timestampValue);return new dt(e.seconds,e.nanos)}var HE=class{constructor(e,t,r,i,s,o,u,c,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d}},Ls=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ns={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},jg={nullValue:"NULL_VALUE"};function ha(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Bm(n)?4:t1(n)?9007199254740991:Um(n)?10:11:K()}function ri(n,e){if(n===e)return!0;let t=ha(n);if(t!==ha(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ch(n).isEqual(ch(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Wi(i.timestampValue),u=Wi(s.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Fs(i.bytesValue).isEqual(Fs(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return ot(i.geoPointValue.latitude)===ot(s.geoPointValue.latitude)&&ot(i.geoPointValue.longitude)===ot(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ot(i.integerValue)===ot(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=ot(i.doubleValue),u=ot(s.doubleValue);return o===u?ah(o)===ah(u):isNaN(o)&&isNaN(u)}return!1}(n,e);case 9:return Gu(n.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},u=s.mapValue.fields||{};if(qP(o)!==qP(u))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!ri(o[c],u[c])))return!1;return!0}(n,e);default:return K()}}function lh(n,e){return(n.values||[]).find(t=>ri(t,e))!==void 0}function js(n,e){if(n===e)return 0;let t=ha(n),r=ha(e);if(t!==r)return pe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return pe(n.booleanValue,e.booleanValue);case 2:return function(s,o){let u=ot(s.integerValue||s.doubleValue),c=ot(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(n,e);case 3:return zP(n.timestampValue,e.timestampValue);case 4:return zP(ch(n),ch(e));case 5:return pe(n.stringValue,e.stringValue);case 6:return function(s,o){let u=Fs(s),c=Fs(o);return u.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let u=s.split("/"),c=o.split("/");for(let d=0;d<u.length&&d<c.length;d++){let f=pe(u[d],c[d]);if(f!==0)return f}return pe(u.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let u=pe(ot(s.latitude),ot(o.latitude));return u!==0?u:pe(ot(s.longitude),ot(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return GP(n.arrayValue,e.arrayValue);case 10:return function(s,o){var u,c,d,f;let g=s.fields||{},v=o.fields||{},D=(u=g.value)===null||u===void 0?void 0:u.arrayValue,A=(c=v.value)===null||c===void 0?void 0:c.arrayValue,R=pe(((d=D?.values)===null||d===void 0?void 0:d.length)||0,((f=A?.values)===null||f===void 0?void 0:f.length)||0);return R!==0?R:GP(D,A)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ns.mapValue&&o===Ns.mapValue)return 0;if(s===Ns.mapValue)return 1;if(o===Ns.mapValue)return-1;let u=s.fields||{},c=Object.keys(u),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let g=0;g<c.length&&g<f.length;++g){let v=pe(c[g],f[g]);if(v!==0)return v;let D=js(u[c[g]],d[f[g]]);if(D!==0)return D}return pe(c.length,f.length)}(n.mapValue,e.mapValue);default:throw K()}}function zP(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return pe(n,e);let t=Wi(n),r=Wi(e),i=pe(t.seconds,r.seconds);return i!==0?i:pe(t.nanos,r.nanos)}function GP(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=js(t[i],r[i]);if(s)return s}return pe(t.length,r.length)}function Wu(n){return WE(n)}function WE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Wi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Fs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=WE(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${WE(t.fields[o])}`;return i+"}"}(n.mapValue):K()}function fa(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function KE(n){return!!n&&"integerValue"in n}function dh(n){return!!n&&"arrayValue"in n}function HP(n){return!!n&&"nullValue"in n}function WP(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bg(n){return!!n&&"mapValue"in n}function Um(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function th(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ta(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=th(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=th(n.arrayValue.values[t]);return e}return Object.assign({},n)}function t1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var n1={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function iz(n){return"nullValue"in n?jg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?fa(Ls.empty(),z.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Um(n)?n1:{mapValue:{}}:K()}function sz(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?fa(Ls.empty(),z.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?n1:"mapValue"in n?Um(n)?{mapValue:{}}:Ns:K()}function KP(n,e){let t=js(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function QP(n,e){let t=js(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var on=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Bg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=th(t)}setAll(e){let t=wt.emptyPath(),r={},i=[];e.forEach((o,u)=>{if(!t.isImmediateParentOf(u)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=u.popLast()}o?r[u.lastSegment()]=th(o):i.push(u.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Bg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Bg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ta(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(th(this.value))}};function r1(n){let e=[];return Ta(n.fields,(t,r)=>{let i=new wt([t]);if(Bg(r)){let s=r1(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new qn(e)}var Rt=class n{constructor(e,t,r,i,s,o,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=u}static newInvalidDocument(e){return new n(e,0,ne.min(),ne.min(),ne.min(),on.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ne.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ne.min(),ne.min(),on.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ne.min(),ne.min(),on.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ii=class{constructor(e,t){this.position=e,this.inclusive=t}};function YP(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=z.comparator(z.fromName(o.referenceValue),t.key):r=js(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function JP(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ri(n.position[t],e.position[t]))return!1;return!0}var pa=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function oz(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Yg=class{},Ce=class n extends Yg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new JE(e,t,r):t==="array-contains"?new e0(e,r):t==="in"?new Jg(e,r):t==="not-in"?new t0(e,r):t==="array-contains-any"?new n0(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new XE(e,r):new ZE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(js(t,this.value)):t!==null&&ha(this.value)===ha(t)&&this.matchesComparison(js(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ye=class n extends Yg{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Ku(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ku(n){return n.op==="and"}function QE(n){return n.op==="or"}function jT(n){return i1(n)&&Ku(n)}function i1(n){for(let e of n.filters)if(e instanceof Ye)return!1;return!0}function YE(n){if(n instanceof Ce)return n.field.canonicalString()+n.op.toString()+Wu(n.value);if(jT(n))return n.filters.map(e=>YE(e)).join(",");{let e=n.filters.map(t=>YE(t)).join(",");return`${n.op}(${e})`}}function s1(n,e){return n instanceof Ce?function(r,i){return i instanceof Ce&&r.op===i.op&&r.field.isEqual(i.field)&&ri(r.value,i.value)}(n,e):n instanceof Ye?function(r,i){return i instanceof Ye&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,u)=>s&&s1(o,i.filters[u]),!0):!1}(n,e):void K()}function o1(n,e){let t=n.filters.concat(e);return Ye.create(t,n.op)}function a1(n){return n instanceof Ce?function(t){return`${t.field.canonicalString()} ${t.op} ${Wu(t.value)}`}(n):n instanceof Ye?function(t){return t.op.toString()+" {"+t.getFilters().map(a1).join(" ,")+"}"}(n):"Filter"}var JE=class extends Ce{constructor(e,t,r){super(e,t,r),this.key=z.fromName(r.referenceValue)}matches(e){let t=z.comparator(e.key,this.key);return this.matchesComparison(t)}},XE=class extends Ce{constructor(e,t){super(e,"in",t),this.keys=u1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},ZE=class extends Ce{constructor(e,t){super(e,"not-in",t),this.keys=u1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function u1(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>z.fromName(r.referenceValue))}var e0=class extends Ce{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return dh(t)&&lh(t.arrayValue,this.value)}},Jg=class extends Ce{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&lh(this.value.arrayValue,t)}},t0=class extends Ce{constructor(e,t){super(e,"not-in",t)}matches(e){if(lh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!lh(this.value.arrayValue,t)}},n0=class extends Ce{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!dh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>lh(this.value.arrayValue,r))}};var r0=class{constructor(e,t=null,r=[],i=[],s=null,o=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=u,this.ue=null}};function i0(n,e=null,t=[],r=[],i=null,s=null,o=null){return new r0(n,e,t,r,i,s,o)}function ga(n){let e=q(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>YE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ah(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wu(r)).join(",")),e.ue=t}return e.ue}function Sh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!oz(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!s1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!JP(n.startAt,e.startAt)&&JP(n.endAt,e.endAt)}function Xg(n){return z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Zg(n,e){return n.filters.filter(t=>t instanceof Ce&&t.field.isEqual(e))}function XP(n,e,t){let r=jg,i=!0;for(let s of Zg(n,e)){let o=jg,u=!0;switch(s.op){case"<":case"<=":o=iz(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,u=!1;break;case"!=":case"not-in":o=jg}KP({value:r,inclusive:i},{value:o,inclusive:u})<0&&(r=o,i=u)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];KP({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function ZP(n,e,t){let r=Ns,i=!0;for(let s of Zg(n,e)){let o=Ns,u=!0;switch(s.op){case">=":case">":o=sz(s.value),u=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,u=!1;break;case"!=":case"not-in":o=Ns}QP({value:r,inclusive:i},{value:o,inclusive:u})>0&&(r=o,i=u)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];QP({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}var Mr=class{constructor(e,t=null,r=[],i=[],s=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function c1(n,e,t,r,i,s,o,u){return new Mr(n,e,t,r,i,s,o,u)}function cc(n){return new Mr(n)}function eN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function BT(n){return n.collectionGroup!==null}function qu(n){let e=q(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new et(wt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new pa(s,r))}),t.has(wt.keyField().canonicalString())||e.ce.push(new pa(wt.keyField(),r))}return e.ce}function In(n){let e=q(n);return e.le||(e.le=az(e,qu(n))),e.le}function az(n,e){if(n.limitType==="F")return i0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new pa(i.field,s)});let t=n.endAt?new ii(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ii(n.startAt.position,n.startAt.inclusive):null;return i0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function s0(n,e){let t=n.filters.concat([e]);return new Mr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function em(n,e,t){return new Mr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xh(n,e){return Sh(In(n),In(e))&&n.limitType===e.limitType}function l1(n){return`${ga(In(n))}|lt:${n.limitType}`}function Fu(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>a1(i)).join(", ")}]`),Ah(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Wu(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Wu(i)).join(",")),`Target(${r})`}(In(n))}; limitType=${n.limitType})`}function Rh(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of qu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,u,c){let d=YP(o,u,c);return o.inclusive?d<=0:d<0}(r.startAt,qu(r),i)||r.endAt&&!function(o,u,c){let d=YP(o,u,c);return o.inclusive?d>=0:d>0}(r.endAt,qu(r),i))}(n,e)}function d1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function h1(n){return(e,t)=>{let r=!1;for(let i of qu(n)){let s=uz(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function uz(n,e,t){let r=n.field.isKeyField()?z.comparator(e.key,t.key):function(s,o,u){let c=o.data.field(s),d=u.data.field(s);return c!==null&&d!==null?js(c,d):K()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var si=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ta(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return ZN(this.inner)}size(){return this.innerSize}};var cz=new st(z.comparator);function Mn(){return cz}var f1=new st(z.comparator);function Zd(...n){let e=f1;for(let t of n)e=e.insert(t.key,t);return e}function p1(n){let e=f1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Zr(){return nh()}function g1(){return nh()}function nh(){return new si(n=>n.toString(),(n,e)=>n.isEqual(e))}var lz=new st(z.comparator),dz=new et(z.comparator);function ye(...n){let e=dz;for(let t of n)e=e.add(t);return e}var hz=new et(pe);function UT(){return hz}function $T(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ah(e)?"-0":e}}function m1(n){return{integerValue:""+n}}function y1(n,e){return KN(e)?m1(e):$T(n,e)}var Qu=class{constructor(){this._=void 0}};function fz(n,e,t){return n instanceof Bs?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Bm(s)&&(s=LT(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Ki?v1(n,e):n instanceof Qi?w1(n,e):function(i,s){let o=_1(i,s),u=tN(o)+tN(i.Pe);return KE(o)&&KE(i.Pe)?m1(u):$T(i.serializer,u)}(n,e)}function pz(n,e,t){return n instanceof Ki?v1(n,e):n instanceof Qi?w1(n,e):t}function _1(n,e){return n instanceof Us?function(r){return KE(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Bs=class extends Qu{},Ki=class extends Qu{constructor(e){super(),this.elements=e}};function v1(n,e){let t=I1(e);for(let r of n.elements)t.some(i=>ri(i,r))||t.push(r);return{arrayValue:{values:t}}}var Qi=class extends Qu{constructor(e){super(),this.elements=e}};function w1(n,e){let t=I1(e);for(let r of n.elements)t=t.filter(i=>!ri(i,r));return{arrayValue:{values:t}}}var Us=class extends Qu{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function tN(n){return ot(n.integerValue||n.doubleValue)}function I1(n){return dh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var ma=class{constructor(e,t){this.field=e,this.transform=t}};function gz(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ki&&i instanceof Ki||r instanceof Qi&&i instanceof Qi?Gu(r.elements,i.elements,ri):r instanceof Us&&i instanceof Us?ri(r.Pe,i.Pe):r instanceof Bs&&i instanceof Bs}(n.transform,e.transform)}var o0=class{constructor(e,t){this.version=e,this.transformResults=t}},gt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ug(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Yu=class{};function E1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new qs(n.key,gt.none()):new $s(n.key,n.data,gt.none());{let t=n.data,r=on.empty(),i=new et(wt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Pr(n.key,r,new qn(i.toArray()),gt.none())}}function mz(n,e,t){n instanceof $s?function(i,s,o){let u=i.value.clone(),c=rN(i.fieldTransforms,s,o.transformResults);u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Pr?function(i,s,o){if(!Ug(i.precondition,s))return void s.convertToUnknownDocument(o.version);let u=rN(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(T1(i)),c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function rh(n,e,t,r){return n instanceof $s?function(s,o,u,c){if(!Ug(s.precondition,o))return u;let d=s.value.clone(),f=iN(s.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Pr?function(s,o,u,c){if(!Ug(s.precondition,o))return u;let d=iN(s.fieldTransforms,c,o),f=o.data;return f.setAll(T1(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,o,u){return Ug(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(n,e,t)}function yz(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=_1(r.transform,i||null);s!=null&&(t===null&&(t=on.empty()),t.set(r.field,s))}return t||null}function nN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Gu(r,i,(s,o)=>gz(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var $s=class extends Yu{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Pr=class extends Yu{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function T1(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function rN(n,e,t){let r=new Map;Z(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,u=e.data.field(s.field);r.set(s.field,pz(o,u,t[i]))}return r}function iN(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,fz(s,o,e))}return r}var qs=class extends Yu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},hh=class extends Yu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var fh=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&mz(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=rh(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=rh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=g1();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,u=this.applyToLocalView(o,s.mutatedFields);u=t.has(i.key)?null:u;let c=E1(o,u);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ye())}isEqual(e){return this.batchId===e.batchId&&Gu(this.mutations,e.mutations,(t,r)=>nN(t,r))&&Gu(this.baseMutations,e.baseMutations,(t,r)=>nN(t,r))}},a0=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Z(e.mutations.length===r.length);let i=function(){return lz}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var ph=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var u0=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var At,Me;function D1(n){switch(n){default:return K();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function b1(n){if(n===void 0)return vt("GRPC error has no .code"),N.UNKNOWN;switch(n){case At.OK:return N.OK;case At.CANCELLED:return N.CANCELLED;case At.UNKNOWN:return N.UNKNOWN;case At.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case At.INTERNAL:return N.INTERNAL;case At.UNAVAILABLE:return N.UNAVAILABLE;case At.UNAUTHENTICATED:return N.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case At.NOT_FOUND:return N.NOT_FOUND;case At.ALREADY_EXISTS:return N.ALREADY_EXISTS;case At.PERMISSION_DENIED:return N.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case At.ABORTED:return N.ABORTED;case At.OUT_OF_RANGE:return N.OUT_OF_RANGE;case At.UNIMPLEMENTED:return N.UNIMPLEMENTED;case At.DATA_LOSS:return N.DATA_LOSS;default:return K()}}(Me=At||(At={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";var sN=null;function C1(){return new TextEncoder}var _z=new Ss([4294967295,4294967295],0);function oN(n){let e=C1().encode(n),t=new TE;return t.update(e),new Uint8Array(t.digest())}function aN(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ss([t,r],0),new Ss([i,s],0)]}var c0=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new la(`Invalid padding: ${t}`);if(r<0)throw new la(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new la(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new la(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ss.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Ss.fromNumber(r)));return i.compare(_z)===1&&(i=new Ss([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=oN(e),[r,i]=aN(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.Ie===0)return;let t=oN(e),[r,i]=aN(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},la=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var gh=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,mh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ne.min(),i,new st(pe),Mn(),ye())}},mh=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ye(),ye(),ye())}};var zu=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},tm=class{constructor(e,t){this.targetId=e,this.me=t}},nm=class{constructor(e,t,r=Et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},rm=class{constructor(){this.fe=0,this.ge=cN(),this.pe=Et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ye(),t=ye(),r=ye();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K()}}),new mh(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=cN()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Z(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},l0=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mn(),this.qe=uN(),this.Qe=new st(pe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(Xg(s))if(r===0){let o=new z(s.path);this.Ue(t,o,Rt.newNoDocument(o,ne.min()))}else Z(r===1);else{let o=this.Ye(t);if(o!==r){let u=this.Ze(e),c=u?this.Xe(u,e,o):1;if(c!==0){this.je(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}sN?.et(function(f,g,v,D,A){var R,x,k,j,O,U;let X={localCacheCount:f,existenceFilterCount:g.count,databaseId:v.database,projectId:v.projectId},$=g.unchangedNames;return $&&(X.bloomFilter={applied:A===0,hashCount:(R=$?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(j=(k=(x=$?.bits)===null||x===void 0?void 0:x.bitmap)===null||k===void 0?void 0:k.length)!==null&&j!==void 0?j:0,padding:(U=(O=$?.bits)===null||O===void 0?void 0:O.padding)!==null&&U!==void 0?U:0,mightContain:I=>{var m;return(m=D?.mightContain(I))!==null&&m!==void 0&&m}}),X}(o,e.me,this.Le.tt(),u,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,u;try{o=Fs(r).toUint8Array()}catch(c){if(c instanceof Qg)return Rr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new c0(o,i,s)}catch(c){return Rr(c instanceof la?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let u=this.Je(o);if(u){if(s.current&&Xg(u.target)){let c=new z(u.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Rt.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=ye();this.qe.forEach((s,o)=>{let u=!0;o.forEachWhile(c=>{let d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new gh(e,t,this.Qe,this.ke,r);return this.ke=Mn(),this.qe=uN(),this.Qe=new st(pe),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new rm,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new et(pe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||F("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new rm),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function uN(){return new st(z.comparator)}function cN(){return new st(z.comparator)}var vz={asc:"ASCENDING",desc:"DESCENDING"},wz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Iz={and:"AND",or:"OR"},d0=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function h0(n,e){return n.useProto3Json||Ah(e)?e:{value:e}}function Ju(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ez(n,e){return Ju(n,e.toTimestamp())}function It(n){return Z(!!n),ne.fromTimestamp(function(t){let r=Wi(t);return new dt(r.seconds,r.nanos)}(n))}function qT(n,e){return f0(n,e).canonicalString()}function f0(n,e){let t=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function S1(n){let e=Pe.fromString(n);return Z(L1(e)),e}function yh(n,e){return qT(n.databaseId,e.path)}function ti(n,e){let t=S1(e);if(t.get(1)!==n.databaseId.projectId)throw new V(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new V(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new z(M1(t))}function x1(n,e){return qT(n.databaseId,e)}function R1(n){let e=S1(n);return e.length===4?Pe.emptyPath():M1(e)}function p0(n){return new Pe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function M1(n){return Z(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function lN(n,e,t){return{name:yh(n,e),fields:t.value.mapValue.fields}}function P1(n,e,t){let r=ti(n,e.name),i=It(e.updateTime),s=e.createTime?It(e.createTime):ne.min(),o=new on({mapValue:{fields:e.fields}}),u=Rt.newFoundDocument(r,i,s,o);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function Tz(n,e){return"found"in e?function(r,i){Z(!!i.found),i.found.name,i.found.updateTime;let s=ti(r,i.found.name),o=It(i.found.updateTime),u=i.found.createTime?It(i.found.createTime):ne.min(),c=new on({mapValue:{fields:i.found.fields}});return Rt.newFoundDocument(s,o,u,c)}(n,e):"missing"in e?function(r,i){Z(!!i.missing),Z(!!i.readTime);let s=ti(r,i.missing),o=It(i.readTime);return Rt.newNoDocument(s,o)}(n,e):K()}function Dz(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(Z(f===void 0||typeof f=="string"),Et.fromBase64String(f||"")):(Z(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Et.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(d){let f=d.code===void 0?N.UNKNOWN:b1(d.code);return new V(f,d.message||"")}(o);t=new nm(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ti(n,r.document.name),s=It(r.document.updateTime),o=r.document.createTime?It(r.document.createTime):ne.min(),u=new on({mapValue:{fields:r.document.fields}}),c=Rt.newFoundDocument(i,s,o,u),d=r.targetIds||[],f=r.removedTargetIds||[];t=new zu(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ti(n,r.document),s=r.readTime?It(r.readTime):ne.min(),o=Rt.newNoDocument(i,s),u=r.removedTargetIds||[];t=new zu([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ti(n,r.document),s=r.removedTargetIds||[];t=new zu([],s,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new u0(i,s),u=r.targetId;t=new tm(u,o)}}return t}function _h(n,e){let t;if(e instanceof $s)t={update:lN(n,e.key,e.value)};else if(e instanceof qs)t={delete:yh(n,e.key)};else if(e instanceof Pr)t={update:lN(n,e.key,e.data),updateMask:Rz(e.fieldMask)};else{if(!(e instanceof hh))return K();t={verify:yh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let u=o.transform;if(u instanceof Bs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ki)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Qi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Us)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw K()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Ez(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K()}(n,e.precondition)),t}function g0(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?gt.updateTime(It(s.updateTime)):s.exists!==void 0?gt.exists(s.exists):gt.none()}(e.currentDocument):gt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,u){let c=null;if("setToServerValue"in u)Z(u.setToServerValue==="REQUEST_TIME"),c=new Bs;else if("appendMissingElements"in u){let f=u.appendMissingElements.values||[];c=new Ki(f)}else if("removeAllFromArray"in u){let f=u.removeAllFromArray.values||[];c=new Qi(f)}else"increment"in u?c=new Us(o,u.increment):K();let d=wt.fromServerFormat(u.fieldPath);return new ma(d,c)}(n,i)):[];if(e.update){e.update.name;let i=ti(n,e.update.name),s=new on({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let d=c.fieldPaths||[];return new qn(d.map(f=>wt.fromServerFormat(f)))}(e.updateMask);return new Pr(i,s,o,t,r)}return new $s(i,s,t,r)}if(e.delete){let i=ti(n,e.delete);return new qs(i,t)}if(e.verify){let i=ti(n,e.verify);return new hh(i,t)}return K()}function bz(n,e){return n&&n.length>0?(Z(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?It(i.updateTime):It(s);return o.isEqual(ne.min())&&(o=It(s)),new o0(o,i.transformResults||[])}(t,e))):[]}function N1(n,e){return{documents:[x1(n,e.path)]}}function k1(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=x1(n,i);let s=function(d){if(d.length!==0)return F1(Ye.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(f=>function(v){return{field:Lu(v.field),direction:Az(v.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let u=h0(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function O1(n){let e=R1(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Z(r===1);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(g){let v=V1(g);return v instanceof Ye&&jT(v)?v.getFilters():[v]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(v=>function(A){return new pa(ju(A.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(v))}(t.orderBy));let u=null;t.limit&&(u=function(g){let v;return v=typeof g=="object"?g.value:g,Ah(v)?null:v}(t.limit));let c=null;t.startAt&&(c=function(g){let v=!!g.before,D=g.values||[];return new ii(D,v)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let v=!g.before,D=g.values||[];return new ii(D,v)}(t.endAt)),c1(e,i,o,s,u,"F",c,d)}function Cz(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function V1(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ju(t.unaryFilter.field);return Ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ju(t.unaryFilter.field);return Ce.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ju(t.unaryFilter.field);return Ce.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ju(t.unaryFilter.field);return Ce.create(o,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(n):n.fieldFilter!==void 0?function(t){return Ce.create(ju(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ye.create(t.compositeFilter.filters.map(r=>V1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(t.compositeFilter.op))}(n):K()}function Az(n){return vz[n]}function Sz(n){return wz[n]}function xz(n){return Iz[n]}function Lu(n){return{fieldPath:n.canonicalString()}}function ju(n){return wt.fromServerFormat(n.fieldPath)}function F1(n){return n instanceof Ce?function(t){if(t.op==="=="){if(WP(t.value))return{unaryFilter:{field:Lu(t.field),op:"IS_NAN"}};if(HP(t.value))return{unaryFilter:{field:Lu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(WP(t.value))return{unaryFilter:{field:Lu(t.field),op:"IS_NOT_NAN"}};if(HP(t.value))return{unaryFilter:{field:Lu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lu(t.field),op:Sz(t.op),value:t.value}}}(n):n instanceof Ye?function(t){let r=t.getFilters().map(i=>F1(i));return r.length===1?r[0]:{compositeFilter:{op:xz(t.op),filters:r}}}(n):K()}function Rz(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function L1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Xu=class n{constructor(e,t,r,i,s=ne.min(),o=ne.min(),u=Et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var im=class{constructor(e){this.ct=e}};function Mz(n,e){let t;if(e.document)t=P1(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=z.fromSegments(e.noDocument.path),i=_a(e.noDocument.readTime);t=Rt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return K();{let r=z.fromSegments(e.unknownDocument.path),i=_a(e.unknownDocument.version);t=Rt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let s=new dt(i[0],i[1]);return ne.fromTimestamp(s)}(e.readTime)),t}function dN(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:sm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:yh(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ju(s,o.version.toTimestamp()),createTime:Ju(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ya(e.version)};else{if(!e.isUnknownDocument())return K();r.unknownDocument={path:t.path.toArray(),version:ya(e.version)}}return r}function sm(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ya(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _a(n){let e=new dt(n.seconds,n.nanoseconds);return ne.fromTimestamp(e)}function aa(n,e){let t=(e.baseMutations||[]).map(s=>g0(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let u=e.mutations[s+1];o.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>g0(n.ct,s)),i=dt.fromMillis(e.localWriteTimeMs);return new fh(e.batchId,i,t,r)}function eh(n){let e=_a(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?_a(n.lastLimboFreeSnapshotVersion):ne.min(),r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return Z(s.documents.length===1),In(cc(R1(s.documents[0])))}(n.query):function(s){return In(O1(s))}(n.query),new Xu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Et.fromBase64String(n.resumeToken))}function j1(n,e){let t=ya(e.snapshotVersion),r=ya(e.lastLimboFreeSnapshotVersion),i;i=Xg(e.target)?N1(n.ct,e.target):k1(n.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ga(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function zT(n){let e=O1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?em(e,e.limit,"L"):e}function xE(n,e){return new ph(e.largestBatchId,g0(n.ct,e.overlayMutation))}function hN(n,e){let t=e.path.lastSegment();return[n,wn(e.path.popLast()),t]}function fN(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ya(r.readTime),documentKey:wn(r.documentKey.path),largestBatchId:r.largestBatchId}}var m0=class{getBundleMetadata(e,t){return pN(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:_a(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return pN(e).put(function(i){return{bundleId:i.id,createTime:ya(It(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return gN(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:zT(s.bundledQuery),readTime:_a(s.readTime)}}(r)})}saveNamedQuery(e,t){return gN(e).put(function(i){return{name:i.name,readTime:ya(It(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function pN(n){return Ut(n,"bundles")}function gN(n){return Ut(n,"namedQueries")}var om=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Qd(e).get(hN(this.userId,t)).next(r=>r?xE(this.serializer,r):null)}getOverlays(e,t){let r=Zr();return P.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((s,o)=>{let u=new ph(t,o);i.push(this.ht(e,u))}),P.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(o=>i.add(wn(o.getCollectionPath())));let s=[];return i.forEach(o=>{let u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Qd(e).j("collectionPathOverlayIndex",u))}),P.waitFor(s)}getOverlaysForCollection(e,t,r){let i=Zr(),s=wn(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Qd(e).U("collectionPathOverlayIndex",o).next(u=>{for(let c of u){let d=xE(this.serializer,c);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let s=Zr(),o,u=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Qd(e).J({index:"collectionGroupOverlayIndex",range:u},(c,d,f)=>{let g=xE(this.serializer,d);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):f.done()}).next(()=>s)}ht(e,t){return Qd(e).put(function(i,s,o){let[u,c,d]=hN(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:_h(i.ct,o.mutation)}}(this.serializer,this.userId,t))}};function Qd(n){return Ut(n,"documentOverlays")}var y0=class{Pt(e){return Ut(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Et.fromUint8Array(r):Et.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Gi=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ot(e.integerValue));else if("doubleValue"in e){let r=ot(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),ah(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Wi(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Fs(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?t1(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Um(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):K()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",u=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ot(u)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),z.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Gi.vt=new Gi;function Pz(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function mN(n){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=Pz(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}var _0=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=mN(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=mN(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},v0=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},w0=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},ua=class{constructor(){this.jt=new _0,this.Ht=new v0(this.jt),this.Jt=new w0(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var ca=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function xs(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=yN(n.arrayValue,e.arrayValue),t!==0?t:(t=yN(n.directionalValue,e.directionalValue),t!==0?t:z.comparator(n.documentKey,e.documentKey)))}function yN(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var am=class{constructor(e){this.Xt=new et((t,r)=>wt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Z(e.collectionGroup===this.collectionId),this.nn)return!1;let t=UE(e);if(t!==void 0&&!this.sn(t))return!1;let r=sa(e),i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){let u=this.Xt.getIterator().getNext();if(!i.has(u.field.canonicalString())){let c=r[s];if(!this.on(u,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s){let u=r[s];if(o>=this.en.length||!this._n(this.en[o++],u))return!1}return!0}an(){if(this.nn)return null;let e=new et(wt.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new $u(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new $u(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new $u(r.field,r.dir==="asc"?0:1)));return new Hu(Hu.UNKNOWN_ID,this.collectionId,t,oh.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function B1(n){var e,t;if(Z(n instanceof Ce||n instanceof Ye),n instanceof Ce){if(n instanceof Jg){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Ce.create(n.field,"==",s)))||[];return Ye.create(i,"or")}return n}let r=n.filters.map(i=>B1(i));return Ye.create(r,n.op)}function Nz(n){if(n.getFilters().length===0)return[];let e=T0(B1(n));return Z(U1(e)),I0(e)||E0(e)?[e]:e.getFilters()}function I0(n){return n instanceof Ce}function E0(n){return n instanceof Ye&&jT(n)}function U1(n){return I0(n)||E0(n)||function(t){if(t instanceof Ye&&QE(t)){for(let r of t.getFilters())if(!I0(r)&&!E0(r))return!1;return!0}return!1}(n)}function T0(n){if(Z(n instanceof Ce||n instanceof Ye),n instanceof Ce)return n;if(n.filters.length===1)return T0(n.filters[0]);let e=n.filters.map(r=>T0(r)),t=Ye.create(e,n.op);return t=um(t),U1(t)?t:(Z(t instanceof Ye),Z(Ku(t)),Z(t.filters.length>1),t.filters.reduce((r,i)=>GT(r,i)))}function GT(n,e){let t;return Z(n instanceof Ce||n instanceof Ye),Z(e instanceof Ce||e instanceof Ye),t=n instanceof Ce?e instanceof Ce?function(i,s){return Ye.create([i,s],"and")}(n,e):_N(n,e):e instanceof Ce?_N(e,n):function(i,s){if(Z(i.filters.length>0&&s.filters.length>0),Ku(i)&&Ku(s))return o1(i,s.getFilters());let o=QE(i)?i:s,u=QE(i)?s:i,c=o.filters.map(d=>GT(d,u));return Ye.create(c,"or")}(n,e),um(t)}function _N(n,e){if(Ku(e))return o1(e,n.getFilters());{let t=e.filters.map(r=>GT(n,r));return Ye.create(t,"or")}}function um(n){if(Z(n instanceof Ce||n instanceof Ye),n instanceof Ce)return n;let e=n.getFilters();if(e.length===1)return um(e[0]);if(i1(n))return n;let t=e.map(i=>um(i)),r=[];return t.forEach(i=>{i instanceof Ce?r.push(i):i instanceof Ye&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ye.create(r,n.op)}var D0=class{constructor(){this.un=new vh}addToCollectionParentIndex(e,t){return this.un.add(t),P.resolve()}getCollectionParents(e,t){return P.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return P.resolve()}deleteFieldIndex(e,t){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,t){return P.resolve()}getDocumentsMatchingTarget(e,t){return P.resolve(null)}getIndexType(e,t){return P.resolve(0)}getFieldIndexes(e,t){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,t){return P.resolve(Zn.min())}getMinOffsetFromCollectionGroup(e,t){return P.resolve(Zn.min())}updateCollectionGroup(e,t,r){return P.resolve()}updateIndexEntries(e,t){return P.resolve()}},vh=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new et(Pe.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new et(Pe.comparator)).toArray()}};var kg=new Uint8Array(0),b0=class{constructor(e,t){this.databaseId=t,this.cn=new vh,this.ln=new si(r=>ga(r),(r,i)=>Sh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let s={collectionId:r,parent:wn(i)};return vN(e).put(s)}return P.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[qN(t),""],!1,!0);return vN(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==t)break;r.push(Xr(o.parent))}return r})}addFieldIndex(e,t){let r=Yd(e),i=function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let s=r.add(i);if(t.indexState){let o=ku(e);return s.next(u=>{o.put(fN(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let r=Yd(e),i=ku(e),s=Nu(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Yd(e),r=Nu(e),i=ku(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return P.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new am(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let r=Nu(e),i=!0,s=new Map;return P.forEach(this.hn(t),o=>this.Pn(e,o).next(u=>{i&&(i=!!u),s.set(o,u)})).next(()=>{if(i){let o=ye(),u=[];return P.forEach(s,(c,d)=>{F("IndexedDbIndexManager",`Using index ${function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map(U=>`${U.fieldPath}:${U.kind}`).join(",")}`}(c)} to execute ${ga(t)}`);let f=function(O,U){let X=UE(U);if(X===void 0)return null;for(let $ of Zg(O,X.fieldPath))switch($.op){case"array-contains-any":return $.value.arrayValue.values||[];case"array-contains":return[$.value]}return null}(d,c),g=function(O,U){let X=new Map;for(let $ of sa(U))for(let I of Zg(O,$.fieldPath))switch(I.op){case"==":case"in":X.set($.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return X.set($.fieldPath.canonicalString(),I.value),Array.from(X.values())}return null}(d,c),v=function(O,U){let X=[],$=!0;for(let I of sa(U)){let m=I.kind===0?XP(O,I.fieldPath,O.startAt):ZP(O,I.fieldPath,O.startAt);X.push(m.value),$&&($=m.inclusive)}return new ii(X,$)}(d,c),D=function(O,U){let X=[],$=!0;for(let I of sa(U)){let m=I.kind===0?ZP(O,I.fieldPath,O.endAt):XP(O,I.fieldPath,O.endAt);X.push(m.value),$&&($=m.inclusive)}return new ii(X,$)}(d,c),A=this.In(c,d,v),R=this.In(c,d,D),x=this.Tn(c,d,g),k=this.En(c.indexId,f,A,v.inclusive,R,D.inclusive,x);return P.forEach(k,j=>r.G(j,t.limit).next(O=>{O.forEach(U=>{let X=z.fromSegments(U.documentKey);o.has(X)||(o=o.add(X),u.push(X))})}))}).next(()=>u)}return P.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=Nz(Ye.create(e.filters,"and")).map(r=>i0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,u){let c=(t!=null?t.length:1)*Math.max(r.length,s.length),d=c/(t!=null?t.length:1),f=[];for(let g=0;g<c;++g){let v=t?this.dn(t[g/d]):kg,D=this.An(e,v,r[g%d],i),A=this.Rn(e,v,s[g%d],o),R=u.map(x=>this.An(e,v,x,!0));f.push(...this.createRange(D,A,R))}return f}An(e,t,r,i){let s=new ca(e,z.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){let s=new ca(e,z.empty(),t,r);return i?s.Zt():s}Pn(e,t){let r=new am(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let u of s)r.rn(u)&&(!o||u.fields.length>o.fields.length)&&(o=u);return o})}getIndexType(e,t){let r=2,i=this.hn(t);return P.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let d=new et(wt.comparator),f=!1;for(let g of c.filters)for(let v of g.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?f=!0:d=d.add(v.field));for(let g of c.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new ua;for(let i of sa(e)){let s=t.data.field(i.fieldPath);if(s==null)return null;let o=r.Yt(i.kind);Gi.vt.It(s,o)}return r.zt()}dn(e){let t=new ua;return Gi.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new ua;return Gi.vt.It(fa(this.databaseId,t),r.Yt(function(s){let o=sa(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new ua);let s=0;for(let o of sa(e)){let u=r[s++];for(let c of i)if(this.fn(t,o.fieldPath)&&dh(u))i=this.gn(i,o,u);else{let d=c.Yt(o.kind);Gi.vt.It(u,d)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let u of i){let c=new ua;c.seed(u.zt()),Gi.vt.It(o,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof Ce&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Yd(e),i=ku(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{let o=[];return P.forEach(s,u=>i.get([u.indexId,this.uid]).next(c=>{o.push(function(f,g){let v=g?new oh(g.sequenceNumber,new Zn(_a(g.readTime),new z(Xr(g.documentKey)),g.largestBatchId)):oh.empty(),D=f.fields.map(([A,R])=>new $u(wt.fromServerFormat(A),R));return new Hu(f.indexId,f.collectionGroup,D,v)}(u,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:pe(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Yd(e),s=ku(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(u=>P.forEach(u,c=>s.put(fN(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){let r=new Map;return P.forEach(t,(i,s)=>{let o=r.get(i.collectionGroup);return(o?P.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(u=>(r.set(i.collectionGroup,u),P.forEach(u,c=>this.wn(e,i,c).next(d=>{let f=this.Sn(s,c);return d.isEqual(f)?P.resolve():this.bn(e,s,c,d,f)}))))})}Dn(e,t,r,i){return Nu(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Nu(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Nu(e),s=new et(xs);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,u)=>{s=s.add(new ca(r.indexId,t,u.arrayValue,u.directionalValue))}).next(()=>s)}Sn(e,t){let r=new et(xs),i=this.Vn(t,e);if(i==null)return r;let s=UE(t);if(s!=null){let o=e.data.field(s.fieldPath);if(dh(o))for(let u of o.arrayValue.values||[])r=r.add(new ca(t.indexId,e.key,this.dn(u),i))}else r=r.add(new ca(t.indexId,e.key,kg,i));return r}bn(e,t,r,i,s){F("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(c,d,f,g,v){let D=c.getIterator(),A=d.getIterator(),R=Pu(D),x=Pu(A);for(;R||x;){let k=!1,j=!1;if(R&&x){let O=f(R,x);O<0?j=!0:O>0&&(k=!0)}else R!=null?j=!0:k=!0;k?(g(x),x=Pu(A)):j?(v(R),R=Pu(D)):(R=Pu(D),x=Pu(A))}}(i,s,xs,u=>{o.push(this.Dn(e,t,r,u))},u=>{o.push(this.vn(e,t,r,u))}),P.waitFor(o)}yn(e){let t=1;return ku(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,u)=>xs(o,u)).filter((o,u,c)=>!u||xs(o,c[u-1])!==0);let i=[];i.push(e);for(let o of r){let u=xs(o,e),c=xs(o,t);if(u===0)i[0]=e.Zt();else if(u>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(t);let s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];let u=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,kg,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,kg,[]];s.push(IDBKeyRange.bound(u,c))}return s}Cn(e,t){return xs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(wN)}getMinOffset(e,t){return P.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||K())).next(wN)}};function vN(n){return Ut(n,"collectionParents")}function Nu(n){return Ut(n,"indexEntries")}function Yd(n){return Ut(n,"indexConfiguration")}function ku(n){return Ut(n,"indexState")}function wN(n){Z(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;OT(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Zn(e.readTime,e.documentKey,t)}var IN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function $1(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),u=0,c=r.J({range:o},(f,g,v)=>(u++,v.delete()));s.push(c.next(()=>{Z(u===1)}));let d=[];for(let f of t.mutations){let g=QN(e,f.key.path,t.batchId);s.push(i.delete(g)),d.push(f.key)}return P.waitFor(s).next(()=>d)}function cm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw K();e=n.noDocument}return JSON.stringify(e).length}Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(41943040,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);var lm=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Z(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Rs(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let s=Bu(e),o=Rs(e);return o.add({}).next(u=>{Z(typeof u=="number");let c=new fh(u,t,r,i),d=function(D,A,R){let x=R.baseMutations.map(j=>_h(D.ct,j)),k=R.mutations.map(j=>_h(D.ct,j));return{userId:A,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:x,mutations:k}}(this.serializer,this.userId,c),f=[],g=new et((v,D)=>pe(v.canonicalString(),D.canonicalString()));for(let v of i){let D=QN(this.userId,v.key.path,u);g=g.add(v.key.path.popLast()),f.push(o.put(d)),f.push(s.put(D,j9))}return g.forEach(v=>{f.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Fn[u]=c.keys()}),P.waitFor(f).next(()=>c)})}lookupMutationBatch(e,t){return Rs(e).get(t).next(r=>r?(Z(r.userId===this.userId),aa(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?P.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Rs(e).J({index:"userMutationsIndex",range:i},(o,u,c)=>{u.userId===this.userId&&(Z(u.batchId>=r),s=aa(this.serializer,u)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Rs(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Rs(e).U("userMutationsIndex",t).next(r=>r.map(i=>aa(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Lg(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Bu(e).J({range:i},(o,u,c)=>{let[d,f,g]=o,v=Xr(f);if(d===this.userId&&t.path.isEqual(v))return Rs(e).get(g).next(D=>{if(!D)throw K();Z(D.userId===this.userId),s.push(aa(this.serializer,D))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new et(pe),i=[];return t.forEach(s=>{let o=Lg(this.userId,s.path),u=IDBKeyRange.lowerBound(o),c=Bu(e).J({range:u},(d,f,g)=>{let[v,D,A]=d,R=Xr(D);v===this.userId&&s.path.isEqual(R)?r=r.add(A):g.done()});i.push(c)}),P.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=Lg(this.userId,r),o=IDBKeyRange.lowerBound(s),u=new et(pe);return Bu(e).J({range:o},(c,d,f)=>{let[g,v,D]=c,A=Xr(v);g===this.userId&&r.isPrefixOf(A)?A.length===i&&(u=u.add(D)):f.done()}).next(()=>this.xn(e,u))}xn(e,t){let r=[],i=[];return t.forEach(s=>{i.push(Rs(e).get(s).next(o=>{if(o===null)throw K();Z(o.userId===this.userId),r.push(aa(this.serializer,o))}))}),P.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return $1(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),P.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return P.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Bu(e).J({range:r},(s,o,u)=>{if(s[0]===this.userId){let c=Xr(s[1]);i.push(c)}else u.done()}).next(()=>{Z(i.length===0)})})}containsKey(e,t){return q1(e,this.userId,t)}Nn(e){return z1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function q1(n,e,t){let r=Lg(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Bu(n).J({range:s,H:!0},(u,c,d)=>{let[f,g,v]=u;f===e&&g===i&&(o=!0),d.done()}).next(()=>o)}function Rs(n){return Ut(n,"mutations")}function Bu(n){return Ut(n,"documentMutations")}function z1(n){return Ut(n,"mutationQueues")}var Zu=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var C0=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Zu(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ne.fromTimestamp(new dt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ou(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Z(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,s=[];return Ou(e).J((o,u)=>{let c=eh(u);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>P.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Ou(e).J((r,i)=>{let s=eh(i);t(s)})}qn(e){return EN(e).get("targetGlobalKey").next(t=>(Z(t!==null),t))}Qn(e,t){return EN(e).put("targetGlobalKey",t)}Kn(e,t){return Ou(e).put(j1(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=ga(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Ou(e).J({range:i,index:"queryTargetsIndex"},(o,u,c)=>{let d=eh(u);Sh(t,d.target)&&(s=d,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){let i=[],s=Ms(e);return t.forEach(o=>{let u=wn(o.path);i.push(s.put({targetId:r,path:u})),i.push(this.referenceDelegate.addReference(e,r,o))}),P.waitFor(i)}removeMatchingKeys(e,t,r){let i=Ms(e);return P.forEach(t,s=>{let o=wn(s.path);return P.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){let r=Ms(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ms(e),s=ye();return i.J({range:r,H:!0},(o,u,c)=>{let d=Xr(o[1]),f=new z(d);s=s.add(f)}).next(()=>s)}containsKey(e,t){let r=wn(t.path),i=IDBKeyRange.bound([r],[qN(r)],!1,!0),s=0;return Ms(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,u],c,d)=>{o!==0&&(s++,d.done())}).next(()=>s>0)}ot(e,t){return Ou(e).get(t).next(r=>r?eh(r):null)}};function Ou(n){return Ut(n,"targets")}function EN(n){return Ut(n,"targetGlobal")}function Ms(n){return Ut(n,"targetDocuments")}function TN([n,e],[t,r]){let i=pe(n,t);return i===0?pe(e,r):i}var A0=class{constructor(e){this.Un=e,this.buffer=new et(TN),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();TN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},S0=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){F("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>S(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Hs(t)?F("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Gs(t)}yield this.Hn(3e5)}))}},x0=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return P.resolve($n.oe);let r=new A0(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(IN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IN):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,u,c,d,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,u=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Vu()<=Fr.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(u-o)+`ms
	Removed ${s} targets in `+(c-u)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function kz(n,e){return new x0(n,e)}var R0=class{constructor(e,t){this.db=e,this.garbageCollector=kz(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Og(e,r)}removeReference(e,t,r){return Og(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Og(e,t)}nr(e,t){return function(i,s){let o=!1;return z1(i).Y(u=>q1(i,u,s).next(c=>(c&&(o=!0),P.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.tr(e,(o,u)=>{if(u<=t){let c=this.nr(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ne.min()),Ms(e).delete(function(g){return[0,wn(g.path)]}(o))))});i.push(c)}}).next(()=>P.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Og(e,t)}tr(e,t){let r=Ms(e),i,s=$n.oe;return r.J({index:"documentTargetsIndex"},([o,u],{path:c,sequenceNumber:d})=>{o===0?(s!==$n.oe&&t(new z(Xr(i)),s),s=d,i=c):s=$n.oe}).next(()=>{s!==$n.oe&&t(new z(Xr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Og(n,e){return Ms(n).put(function(r,i){return{targetId:0,path:wn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var dm=class{constructor(){this.changes=new si(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?P.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var M0=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ia(e).put(r)}removeEntry(e,t,r){return ia(e).delete(function(s,o){let u=s.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],sm(o),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Rt.newInvalidDocument(t);return ia(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Jd(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Rt.newInvalidDocument(t)};return ia(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Jd(t))},(i,s)=>{r={document:this.ir(t,s),size:cm(s)}}).next(()=>r)}getEntries(e,t){let r=Mn();return this._r(e,t,(i,s)=>{let o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Mn(),i=new st(z.comparator);return this._r(e,t,(s,o)=>{let u=this.ir(s,o);r=r.insert(s,u),i=i.insert(s,cm(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return P.resolve();let i=new et(CN);t.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(Jd(i.first()),Jd(i.last())),o=i.getIterator(),u=o.getNext();return ia(e).J({index:"documentKeyIndex",range:s},(c,d,f)=>{let g=z.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;u&&CN(u,g)<0;)r(u,null),u=o.getNext();u&&u.isEqual(g)&&(r(u,d),u=o.hasNext()?o.getNext():null),u?f.$(Jd(u)):f.done()}).next(()=>{for(;u;)r(u,null),u=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){let o=t.path,u=[o.popLast().toArray(),o.lastSegment(),sm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ia(e).U(IDBKeyRange.bound(u,c,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let f=Mn();for(let g of d){let v=this.ir(z.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(Rh(t,v)||i.has(v.key))&&(f=f.insert(v.key,v))}return f})}getAllFromCollectionGroup(e,t,r,i){let s=Mn(),o=bN(t,r),u=bN(t,Zn.max());return ia(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(c,d,f)=>{let g=this.ir(z.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(g.key,g),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new P0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return DN(e).get("remoteDocumentGlobalKey").next(t=>(Z(!!t),t))}rr(e,t){return DN(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=Mz(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ne.min())))return r}return Rt.newInvalidDocument(e)}};function G1(n){return new M0(n)}var P0=class extends dm{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new si(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new et((s,o)=>pe(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let u=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,u.readTime)),o.isValidDocument()){let c=dN(this.cr.serializer,o);i=i.add(s.path.popLast());let d=cm(c);r+=d-u.size,t.push(this.cr.addEntry(e,s,c))}else if(r-=u.size,this.trackRemovals){let c=dN(this.cr.serializer,o.convertToNoDocument(ne.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),P.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function DN(n){return Ut(n,"remoteDocumentGlobal")}function ia(n){return Ut(n,"remoteDocumentsV14")}function Jd(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bN(n,e){let t=e.documentKey.path.toArray();return[n,sm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function CN(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=pe(t[s],r[s]),i)return i;return i=pe(t.length,r.length),i||(i=pe(t[t.length-2],r[r.length-2]),i||pe(t[t.length-1],r[r.length-1]))}var N0=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var hm=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&rh(r.mutation,i,qn.empty(),dt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ye()){let i=Zr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Zd();return s.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Zr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ye()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,u)=>{t.set(o,u)})})}computeViews(e,t,r,i){let s=Mn(),o=nh(),u=function(){return nh()}();return t.forEach((c,d)=>{let f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Pr)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),rh(f.mutation,d,f.mutation.getFieldMask(),dt.now())):o.set(d.key,qn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,f)=>o.set(d,f)),t.forEach((d,f)=>{var g;return u.set(d,new N0(f,(g=o.get(d))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,t){let r=nh(),i=new st((o,u)=>o-u),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let u of o)u.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let f=r.get(c)||qn.empty();f=u.applyToLocalView(d,f),r.set(c,f);let g=(i.get(u.batchId)||ye()).add(c);i=i.insert(u.batchId,g)})}).next(()=>{let o=[],u=i.getReverseIterator();for(;u.hasNext();){let c=u.getNext(),d=c.key,f=c.value,g=g1();f.forEach(v=>{if(!s.has(v)){let D=E1(t.get(v),r.get(v));D!==null&&g.set(v,D),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):BT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):P.resolve(Zr()),u=-1,c=s;return o.next(d=>P.forEach(d,(f,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(f)?P.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{c=c.insert(f,v)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,ye())).next(f=>({batchId:u,changes:p1(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(r=>{let i=Zd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Zd();return this.indexManager.getCollectionParents(e,s).next(u=>P.forEach(u,c=>{let d=function(g,v){return new Mr(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,v)=>{o=o.insert(g,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let f=d.getKey();o.get(f)===null&&(o=o.insert(f,Rt.newInvalidDocument(f)))});let u=Zd();return o.forEach((c,d)=>{let f=s.get(c);f!==void 0&&rh(f.mutation,d,qn.empty(),dt.now()),Rh(t,d)&&(u=u.insert(c,d))}),u})}};var k0=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return P.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:It(i.createTime)}}(t)),P.resolve()}getNamedQuery(e,t){return P.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:zT(i.bundledQuery),readTime:It(i.readTime)}}(t)),P.resolve()}};var O0=class{constructor(){this.overlays=new st(z.comparator),this.Ir=new Map}getOverlay(e,t){return P.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Zr();return P.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),P.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),P.resolve()}getOverlaysForCollection(e,t,r){let i=Zr(),s=t.length+1,o=new z(t.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){let c=u.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return P.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new st((d,f)=>d-f),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=Zr(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let u=Zr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>u.set(d,f)),!(u.size()>=i)););return P.resolve(u)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ph(t,r));let s=this.Ir.get(t);s===void 0&&(s=ye(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var V0=class{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,P.resolve()}};var wh=class{constructor(){this.Tr=new et(St.Er),this.dr=new et(St.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new St(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new St(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new z(new Pe([])),r=new St(t,e),i=new St(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new z(new Pe([])),r=new St(t,e),i=new St(t,e+1),s=ye();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new St(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},St=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return z.comparator(e.key,t.key)||pe(e.wr,t.wr)}static Ar(e,t){return pe(e.wr,t.wr)||z.comparator(e.key,t.key)}};var F0=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new et(St.Er)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new fh(s,t,r,i);this.mutationQueue.push(o);for(let u of i)this.br=this.br.add(new St(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,t){return P.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new St(t,0),i=new St(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let u=this.Dr(o.wr);s.push(u)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new et(pe);return t.forEach(i=>{let s=new St(i,0),o=new St(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],u=>{r=r.add(u.wr)})}),P.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;z.isDocumentKey(s)||(s=s.child(""));let o=new St(new z(s),0),u=new et(pe);return this.br.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(u=u.add(c.wr)),!0)},o),P.resolve(this.Cr(u))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Z(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return P.forEach(t.mutations,i=>{let s=new St(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new St(t,0),i=this.br.firstAfterOrEqual(r);return P.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var L0=class{constructor(e){this.Mr=e,this.docs=function(){return new st(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return P.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(t))}getEntries(e,t){let r=Mn();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Rt.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Mn(),o=t.path,u=new z(o.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){let{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||OT(GN(f),r)<=0||(i.has(f.key)||Rh(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,t,r,i){K()}Or(e,t){return P.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new j0(this)}getSize(e){return P.resolve(this.size)}},j0=class extends dm{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),P.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var B0=class{constructor(e){this.persistence=e,this.Nr=new si(t=>ga(t),Sh),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new wh,this.targetCount=0,this.kr=Zu.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),P.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Zu(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,P.resolve()}updateTargetData(e,t){return this.Kn(t),P.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return P.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),P.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),P.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return P.resolve(r)}containsKey(e,t){return P.resolve(this.Br.containsKey(t))}};var fm=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new $n(0),this.Kr=!1,this.Kr=!0,this.$r=new V0,this.referenceDelegate=e(this),this.Ur=new B0(this),this.indexManager=new D0,this.remoteDocumentCache=function(i){return new L0(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new im(t),this.Gr=new k0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new O0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new F0(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){F("MemoryPersistence","Starting transaction:",e);let i=new U0(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return P.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},U0=class extends Hg{constructor(e){super(),this.currentSequenceNumber=e}},pm=class n{constructor(e){this.persistence=e,this.Jr=new wh,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),P.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),P.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Xr,r=>{let i=z.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ne.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return P.or([()=>P.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var $0=class{constructor(e){this.serializer=e}O(e,t,r,i){let s=new Wg("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$P,{unique:!0}),c.createObjectStore("documentMutations")}(e),AN(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=P.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),AN(e)),o=o.next(()=>function(c){let d=c.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ne.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,d){return d.store("mutations").U().next(f=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$P,{unique:!0});let g=d.store("mutations"),v=f.map(D=>g.put(D));return P.waitFor(v)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let d=c.createObjectStore("documentOverlays",{keyPath:J9});d.createIndex("collectionPathOverlayIndex",X9,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",Z9,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let d=c.createObjectStore("remoteDocumentsV14",{keyPath:B9});d.createIndex("documentKeyIndex",U9),d.createIndex("collectionGroupIndex",$9)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:W9}).createIndex("sequenceNumberIndex",K9,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Q9}).createIndex("documentKeyIndex",Y9,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=cm(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>P.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(u=>P.forEach(u,c=>{Z(c.userId===s.userId);let d=aa(this.serializer,c);return $1(e,s.userId,d).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,u)=>{let c=new Pe(o),d=function(g){return[0,wn(g)]}(c);s.push(t.get(d).next(f=>f?P.resolve():(g=>t.put({targetId:0,path:wn(g),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>P.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:H9});let r=t.store("collectionParents"),i=new vh,s=o=>{if(i.add(o)){let u=o.lastSegment(),c=o.popLast();return r.put({collectionId:u,parent:wn(c)})}};return t.store("remoteDocuments").J({H:!0},(o,u)=>{let c=new Pe(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,u,c],d)=>{let f=Xr(u);return s(f.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let s=eh(i),o=j1(this.serializer,s);return t.put(o)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{let u=t.store("remoteDocumentsV14"),c=function(g){return g.document?new z(Pe.fromString(g.document.name).popFirst(5)):g.noDocument?z.fromSegments(g.noDocument.path):g.unknownDocument?z.fromSegments(g.unknownDocument.path):K()}(o).path.toArray(),d={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(u.put(d))}).next(()=>P.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=G1(this.serializer),s=new fm(pm.Zr,this.serializer.ct);return r.U().next(o=>{let u=new Map;return o.forEach(c=>{var d;let f=(d=u.get(c.userId))!==null&&d!==void 0?d:ye();aa(this.serializer,c).keys().forEach(g=>f=f.add(g)),u.set(c.userId,f)}),P.forEach(u,(c,d)=>{let f=new xt(d),g=om.lt(this.serializer,f),v=s.getIndexManager(f),D=lm.lt(f,this.serializer,v,s.referenceDelegate);return new hm(i,D,g,v).recalculateAndSaveOverlaysForDocumentKeys(new uh(t,$n.oe),c).next()})})}};function AN(n){n.createObjectStore("targetDocuments",{keyPath:z9}).createIndex("documentTargetsIndex",G9,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",q9,{unique:!0}),n.createObjectStore("targetGlobal")}var RE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",q0=class n{constructor(e,t,r,i,s,o,u,c,d,f,g=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=u,this.ci=d,this.li=f,this.hi=g,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=v=>Promise.resolve(),!n.D())throw new V(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new R0(this,i),this.Ai=t+"main",this.serializer=new im(c),this.Ri=new Vs(this.Ai,this.hi,new $0(this.serializer)),this.$r=new y0,this.Ur=new C0(this.referenceDelegate,this.serializer),this.remoteDocumentCache=G1(this.serializer),this.Gr=new m0,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,f===!1&&vt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new V(N.FAILED_PRECONDITION,RE);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new $n(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>S(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>S(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>S(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Vg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Hs(e))return F("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return F("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Xd(e).get("owner").next(t=>P.resolve(this.vi(t)))}Ci(e){return Vg(e).delete(this.clientId)}Fi(){return S(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Ut(t,"clientMetadata");return r.U().next(i=>{let s=this.xi(i,18e5),o=i.filter(u=>s.indexOf(u)===-1);return P.forEach(o,u=>r.delete(u.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?P.resolve(!0):Xd(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new V(N.FAILED_PRECONDITION,RE);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vg(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(s||o&&u)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&F("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return S(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new uh(e,$n.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Vg(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return lm.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new b0(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return om.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){F("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",s=function(c){return c===17?nz:c===16?tz:c===15?FT:c===14?XN:c===13?JN:c===12?ez:c===11?YN:void K()}(this.hi),o;return this.Ri.runTransaction(e,i,s,u=>(o=new uh(u,this.Qr?this.Qr.next():$n.oe),t==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new V(N.FAILED_PRECONDITION,HN);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(u=>(o.raiseOnCommittedEvent(),u))}Ki(e){return Xd(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new V(N.FAILED_PRECONDITION,RE)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xd(e).put("owner",t)}static D(){return Vs.D()}bi(e){let t=Xd(e);return t.get("owner").next(r=>this.vi(r)?(F("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):P.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(vt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;j_()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return F("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){vt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Xd(n){return Ut(n,"owner")}function Vg(n){return Ut(n,"clientMetadata")}function HT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var z0=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ye(),i=ye();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var G0=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var gm=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return j_()?8:WN(Kl())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new G0;return this.Xi(e,t,o).next(u=>{if(s.result=u,this.zi)return this.es(e,t,o,u.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Vu()<=Fr.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",Fu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),P.resolve()):(Vu()<=Fr.DEBUG&&F("QueryEngine","Query:",Fu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Vu()<=Fr.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",Fu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(t))):P.resolve())}Yi(e,t){if(eN(t))return P.resolve(null);let r=In(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=em(t,null,"F"),r=In(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ye(...s);return this.Ji.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.ts(t,u);return this.ns(t,d,o,c.readTime)?this.Yi(e,em(t,null,"F")):this.rs(e,d,t,c)}))})))}Zi(e,t,r,i){return eN(t)||i.isEqual(ne.min())?P.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?P.resolve(null):(Vu()<=Fr.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fu(t)),this.rs(e,o,t,zN(i,-1)).next(u=>u))})}ts(e,t){let r=new et(h1(e));return t.forEach((i,s)=>{Rh(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Vu()<=Fr.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Fu(t)),this.Ji.getDocumentsMatchingQuery(e,t,Zn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var H0=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new st(pe),this._s=new si(s=>ga(s),Sh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hm(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function H1(n,e,t,r){return new H0(n,e,t,r)}function W1(n,e){return S(this,null,function*(){let t=q(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],u=[],c=ye();for(let d of i){o.push(d.batchId);for(let f of d.mutations)c=c.add(f.key)}for(let d of s){u.push(d.batchId);for(let f of d.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:u}))})})})}function Oz(n,e){let t=q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,d,f){let g=d.batch,v=g.keys(),D=P.resolve();return v.forEach(A=>{D=D.next(()=>f.getEntry(c,A)).next(R=>{let x=d.docVersions.get(A);Z(x!==null),R.version.compareTo(x)<0&&(g.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),f.addEntry(R)))})}),D.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=ye();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(c=c.add(u.batch.mutations[d].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function K1(n){let e=q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function Vz(n,e){let t=q(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let u=[];e.targetChanges.forEach((f,g)=>{let v=i.get(g);if(!v)return;u.push(t.Ur.removeMatchingKeys(s,f.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(s,f.addedDocuments,g)));let D=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?D=D.withResumeToken(Et.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):f.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(f.resumeToken,r)),i=i.insert(g,D),function(R,x,k){return R.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(v,D,f)&&u.push(t.Ur.updateTargetData(s,D))});let c=Mn(),d=ye();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),u.push(Q1(s,o,e.documentUpdates).next(f=>{c=f.Ps,d=f.Is})),!r.isEqual(ne.min())){let f=t.Ur.getLastRemoteSnapshotVersion(s).next(g=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(f)}return P.waitFor(u).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.os=i,s))}function Q1(n,e,t){let r=ye(),i=ye();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Mn();return t.forEach((u,c)=>{let d=s.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(ne.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):F("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function Fz(n,e){let t=q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ec(n,e){let t=q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,P.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Xu(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function tc(n,e,t){return S(this,null,function*(){let r=q(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Hs(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function mm(n,e,t){let r=q(n),i=ne.min(),s=ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){let g=q(c),v=g._s.get(f);return v!==void 0?P.resolve(g.os.get(v)):g.Ur.getTargetData(d,f)}(r,o,In(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,u.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:ne.min(),t?s:ye())).next(u=>(X1(r,d1(e),u),{documents:u,Ts:s})))}function Y1(n,e){let t=q(n),r=q(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function J1(n,e){let t=q(n),r=t.us.get(e)||ne.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,zN(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(X1(t,e,i),i))}function X1(n,e,t){let r=n.us.get(e)||ne.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function Lz(n,e,t,r){return S(this,null,function*(){let i=q(n),s=ye(),o=Mn();for(let d of t){let f=e.Es(d.metadata.name);d.document&&(s=s.add(f));let g=e.ds(d);g.setReadTime(e.As(d.metadata.readTime)),o=o.insert(f,g)}let u=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield ec(i,function(f){return In(cc(Pe.fromString(`__bundle__/docs/${f}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>Q1(d,u,o).next(f=>(u.apply(d),f)).next(f=>i.Ur.removeMatchingKeysForTargetId(d,c.targetId).next(()=>i.Ur.addMatchingKeys(d,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,f.Ps,f.Is)).next(()=>f.Ps)))})}function jz(r,i){return S(this,arguments,function*(n,e,t=ye()){let s=yield ec(n,In(zT(e.bundledQuery))),o=q(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{let c=It(e.readTime);if(s.snapshotVersion.compareTo(c)>=0)return o.Gr.saveNamedQuery(u,e);let d=s.withResumeToken(Et.EMPTY_BYTE_STRING,c);return o.os=o.os.insert(d.targetId,d),o.Ur.updateTargetData(u,d).next(()=>o.Ur.removeMatchingKeysForTargetId(u,s.targetId)).next(()=>o.Ur.addMatchingKeys(u,t,s.targetId)).next(()=>o.Gr.saveNamedQuery(u,e))})})}function SN(n,e){return`firestore_clients_${n}_${e}`}function xN(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ME(n,e){return`firestore_targets_${n}_${e}`}var ym=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new V(i.error.code,i.error.message))),o?new n(e,t,i.state,s):(vt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},ih=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new V(r.error.code,r.error.message))),s?new n(e,r.state,i):(vt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},_m=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=UT();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=KN(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new n(e,s):(vt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},W0=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(vt("SharedClientState",`Failed to parse online state: ${e}`),null)}},Ih=class{constructor(){this.activeTargetIds=UT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},sh=class{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new st(pe),this.started=!1,this.bs=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=SN(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Ih),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return S(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(SN(this.persistenceKey,r));if(i){let s=_m.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(ME(this.persistenceKey,e));if(i){let s=ih.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ME(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return F("SharedClientState","READ",e,t),t}setItem(e,t){F("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){F("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(F("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>S(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(s){let o=$n.oe;if(s!=null)try{let u=JSON.parse(s);Z(typeof u=="number"),o=u}catch(u){vt("SharedClientState","Failed to read sequence number from WebStorage",u)}return o}(t.newValue);r!==$n.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new ym(this.currentUser,e,t,r),s=xN(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){let t=xN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=ME(this.persistenceKey,e),s=new ih(e,t,r);this.setItem(i,s.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return _m.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return ym.Rs(new xt(s),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return ih.Rs(i,t)}Ls(e){return W0.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return S(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);F("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],u=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||u.push(c)}),this.syncEngine.io(o,u).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=UT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},vm=class{constructor(){this.so=new Ih,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ih,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var K0=class{_o(e){}shutdown(){}};var wm=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Fg=null;function PE(){return Fg===null?Fg=function(){return 268435456+Math.round(2147483648*Math.random())}():Fg++,"0x"+Fg.toString(16)}var Bz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Q0=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var sn="WebChannelConnection",Y0=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let u=PE(),c=this.xo(t,r.toUriEncodedString());F("RestConnection",`Sending RPC '${t}' ${u}:`,c,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(t,c,d,i).then(f=>(F("RestConnection",`Received RPC '${t}' ${u}: `,f),f),f=>{throw Rr("RestConnection",`RPC '${t}' ${u} failed with error: `,f,"url: ",c,"request:",i),f})}Lo(t,r,i,s,o,u){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+uc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=Bz[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=PE();return new Promise((o,u)=>{let c=new DE;c.setWithCredentials(!0),c.listenOnce(bE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Kd.NO_ERROR:let f=c.getResponseJson();F(sn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Kd.TIMEOUT:F(sn,`RPC '${e}' ${s} timed out`),u(new V(N.DEADLINE_EXCEEDED,"Request time out"));break;case Kd.HTTP_ERROR:let g=c.getStatus();if(F(sn,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);let D=v?.error;if(D&&D.status&&D.message){let A=function(x){let k=x.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(k)>=0?k:N.UNKNOWN}(D.status);u(new V(A,D.message))}else u(new V(N.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new V(N.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{F(sn,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);F(sn,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=PE(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=SE(),u=AE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let f=s.join("");F(sn,`Creating RPC '${e}' stream ${i}: ${f}`,c);let g=o.createWebChannel(f,c),v=!1,D=!1,A=new Q0({Io:x=>{D?F(sn,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(v||(F(sn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),F(sn,`RPC '${e}' stream ${i} sending:`,x),g.send(x))},To:()=>g.close()}),R=(x,k,j)=>{x.listen(k,O=>{try{j(O)}catch(U){setTimeout(()=>{throw U},0)}})};return R(g,Mu.EventType.OPEN,()=>{D||(F(sn,`RPC '${e}' stream ${i} transport opened.`),A.yo())}),R(g,Mu.EventType.CLOSE,()=>{D||(D=!0,F(sn,`RPC '${e}' stream ${i} transport closed`),A.So())}),R(g,Mu.EventType.ERROR,x=>{D||(D=!0,Rr(sn,`RPC '${e}' stream ${i} transport errored:`,x),A.So(new V(N.UNAVAILABLE,"The operation could not be completed")))}),R(g,Mu.EventType.MESSAGE,x=>{var k;if(!D){let j=x.data[0];Z(!!j);let O=j,U=O.error||((k=O[0])===null||k===void 0?void 0:k.error);if(U){F(sn,`RPC '${e}' stream ${i} received error:`,U);let X=U.status,$=function(_){let w=At[_];if(w!==void 0)return b1(w)}(X),I=U.message;$===void 0&&($=N.INTERNAL,I="Unknown error status: "+X+" with message "+U.message),D=!0,A.So(new V($,I)),g.close()}else F(sn,`RPC '${e}' stream ${i} received:`,j),A.bo(j)}}),R(u,CE.STAT_EVENT,x=>{x.stat===Ng.PROXY?F(sn,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Ng.NOPROXY&&F(sn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}};function Z1(){return typeof window<"u"?window:null}function $g(){return typeof document<"u"?document:null}function Mh(n){return new d0(n,!0)}var Eh=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Im=class{constructor(e,t,r,i,s,o,u,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Eh(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return S(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return S(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return S(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(vt(t.toString()),vt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new V(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>S(this,null,function*(){this.state=0,this.start()}))}I_(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},J0=class extends Im{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=Dz(this.serializer,e),r=function(s){if(!("targetChange"in s))return ne.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?It(o.readTime):ne.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=p0(this.serializer),t.addTarget=function(s,o){let u,c=o.target;if(u=Xg(c)?{documents:N1(s,c)}:{query:k1(s,c)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=A1(s,o.resumeToken);let d=h0(s,o.expectedCount);d!==null&&(u.expectedCount=d)}else if(o.snapshotVersion.compareTo(ne.min())>0){u.readTime=Ju(s,o.snapshotVersion.toTimestamp());let d=h0(s,o.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);let r=Cz(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=p0(this.serializer),t.removeTarget=e,this.a_(t)}},X0=class extends Im{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Z(!!e.streamToken),this.lastStreamToken=e.streamToken,Z(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=bz(e.writeResults,e.commitTime),r=It(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=p0(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>_h(this.serializer,r))};this.a_(t)}};var Z0=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new V(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,f0(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(N.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Lo(e,f0(t,r),i,o,u,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(N.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},eT=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(vt(t),this.D_=!1):F("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var tT=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>S(this,null,function*(){Ws(this)&&(F("RemoteStore","Restarting streams for network reachability change."),yield function(c){return S(this,null,function*(){let d=q(c);d.L_.add(4),yield lc(d),d.q_.set("Unknown"),d.L_.delete(4),yield Ph(d)})}(this))}))}),this.q_=new eT(r,i)}};function Ph(n){return S(this,null,function*(){if(Ws(n))for(let e of n.B_)yield e(!0)})}function lc(n){return S(this,null,function*(){for(let e of n.B_)yield e(!1)})}function $m(n,e){let t=q(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),QT(t)?KT(t):hc(t).r_()&&WT(t,e))}function nc(n,e){let t=q(n),r=hc(t);t.N_.delete(e),r.r_()&&ek(t,e),t.N_.size===0&&(r.r_()?r.o_():Ws(t)&&t.q_.set("Unknown"))}function WT(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hc(n).A_(e)}function ek(n,e){n.Q_.xe(e),hc(n).R_(e)}function KT(n){n.Q_=new l0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),hc(n).start(),n.q_.v_()}function QT(n){return Ws(n)&&!hc(n).n_()&&n.N_.size>0}function Ws(n){return q(n).L_.size===0}function tk(n){n.Q_=void 0}function Uz(n){return S(this,null,function*(){n.q_.set("Online")})}function $z(n){return S(this,null,function*(){n.N_.forEach((e,t)=>{WT(n,e)})})}function qz(n,e){return S(this,null,function*(){tk(n),QT(n)?(n.q_.M_(e),KT(n)):n.q_.set("Unknown")})}function zz(n,e,t){return S(this,null,function*(){if(n.q_.set("Online"),e instanceof nm&&e.state===2&&e.cause)try{yield function(i,s){return S(this,null,function*(){let o=s.cause;for(let u of s.targetIds)i.N_.has(u)&&(yield i.remoteSyncer.rejectListen(u,o),i.N_.delete(u),i.Q_.removeTarget(u))})}(n,e)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Em(n,r)}else if(e instanceof zu?n.Q_.Ke(e):e instanceof tm?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ne.min()))try{let r=yield K1(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let u=s.Q_.rt(o);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let f=s.N_.get(d);f&&s.N_.set(d,f.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,d)=>{let f=s.N_.get(c);if(!f)return;s.N_.set(c,f.withResumeToken(Et.EMPTY_BYTE_STRING,f.snapshotVersion)),ek(s,c);let g=new Xu(f.target,c,d,f.sequenceNumber);WT(s,g)}),s.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){F("RemoteStore","Failed to raise snapshot:",r),yield Em(n,r)}})}function Em(n,e,t){return S(this,null,function*(){if(!Hs(e))throw e;n.L_.add(1),yield lc(n),n.q_.set("Offline"),t||(t=()=>K1(n.localStore)),n.asyncQueue.enqueueRetryable(()=>S(this,null,function*(){F("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Ph(n)}))})}function nk(n,e){return e().catch(t=>Em(n,t,e))}function dc(n){return S(this,null,function*(){let e=q(n),t=zs(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Gz(e);)try{let i=yield Fz(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,Hz(e,i)}catch(i){yield Em(e,i)}rk(e)&&ik(e)})}function Gz(n){return Ws(n)&&n.O_.length<10}function Hz(n,e){n.O_.push(e);let t=zs(n);t.r_()&&t.V_&&t.m_(e.mutations)}function rk(n){return Ws(n)&&!zs(n).n_()&&n.O_.length>0}function ik(n){zs(n).start()}function Wz(n){return S(this,null,function*(){zs(n).p_()})}function Kz(n){return S(this,null,function*(){let e=zs(n);for(let t of n.O_)e.m_(t.mutations)})}function Qz(n,e,t){return S(this,null,function*(){let r=n.O_.shift(),i=a0.from(r,e,t);yield nk(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield dc(n)})}function Yz(n,e){return S(this,null,function*(){e&&zs(n).V_&&(yield function(r,i){return S(this,null,function*(){if(function(o){return D1(o)&&o!==N.ABORTED}(i.code)){let s=r.O_.shift();zs(r).s_(),yield nk(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield dc(r)}})}(n,e)),rk(n)&&ik(n)})}function RN(n,e){return S(this,null,function*(){let t=q(n);t.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");let r=Ws(t);t.L_.add(3),yield lc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Ph(t)})}function nT(n,e){return S(this,null,function*(){let t=q(n);e?(t.L_.delete(2),yield Ph(t)):e||(t.L_.add(2),yield lc(t),t.q_.set("Unknown"))})}function hc(n){return n.K_||(n.K_=function(t,r,i){let s=q(t);return s.w_(),new J0(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Uz.bind(null,n),Ro:$z.bind(null,n),mo:qz.bind(null,n),d_:zz.bind(null,n)}),n.B_.push(e=>S(this,null,function*(){e?(n.K_.s_(),QT(n)?KT(n):n.q_.set("Unknown")):(yield n.K_.stop(),tk(n))}))),n.K_}function zs(n){return n.U_||(n.U_=function(t,r,i){let s=q(t);return s.w_(),new X0(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Wz.bind(null,n),mo:Yz.bind(null,n),f_:Kz.bind(null,n),g_:Qz.bind(null,n)}),n.B_.push(e=>S(this,null,function*(){e?(n.U_.s_(),yield dc(n)):(yield n.U_.stop(),n.O_.length>0&&(F("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var rT=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Bt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,u=new n(e,t,o,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function fc(n,e){if(vt("AsyncQueue",`${e}: ${n}`),Hs(n))return new V(N.UNAVAILABLE,`${e}: ${n}`);throw n}var Tm=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||z.comparator(t.key,r.key):(t,r)=>z.comparator(t.key,r.key),this.keyedMap=Zd(),this.sortedSet=new st(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Dm=class{constructor(){this.W_=new st(z.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},rc=class n{constructor(e,t,r,i,s,o,u,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(u=>{o.push({type:0,doc:u})}),new n(e,t,Tm.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var iT=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},sT=class{constructor(){this.queries=MN(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=q(t),s=i.queries;i.queries=MN(),s.forEach((o,u)=>{for(let c of u.j_)c.onError(r)})})(this,new V(N.ABORTED,"Firestore shutting down"))}};function MN(){return new si(n=>l1(n),xh)}function YT(n,e){return S(this,null,function*(){let t=q(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new iT,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let u=fc(o,`Initialization of query '${Fu(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&XT(t)})}function JT(n,e){return S(this,null,function*(){let t=q(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Jz(n,e){let t=q(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let u of o.j_)u.X_(i)&&(r=!0);o.z_=i}}r&&XT(t)}function Xz(n,e,t){let r=q(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function XT(n){n.Y_.forEach(e=>{e.next()})}var oT,PN;(PN=oT||(oT={})).ea="default",PN.Cache="cache";var Th=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new rc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=rc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==oT.Cache}};var aT=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var bm=class{constructor(e){this.serializer=e}Es(e){return ti(this.serializer,e)}ds(e){return e.metadata.exists?P1(this.serializer,e.document,!1):Rt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return It(e)}},uT=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=sk(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Pe.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new bm(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.Es(i.metadata.name);for(let o of i.metadata.queries){let u=(t.get(o)||ye()).add(s);t.set(o,u)}}return t}complete(){return S(this,null,function*(){let e=yield Lz(this.localStore,new bm(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield jz(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function sk(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Cm=class{constructor(e){this.key=e}},Am=class{constructor(e){this.key=e}},Sm=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ye(),this.mutatedKeys=ye(),this.Aa=h1(e),this.Ra=new Tm(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Dm,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{let v=i.get(f),D=Rh(this.query,g)?g:null,A=!!v&&this.mutatedKeys.has(v.key),R=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations),x=!1;v&&D?v.data.isEqual(D.data)?A!==R&&(r.track({type:3,doc:D}),x=!0):this.ga(v,D)||(r.track({type:2,doc:D}),x=!0,(c&&this.Aa(D,c)>0||d&&this.Aa(D,d)<0)&&(u=!0)):!v&&D?(r.track({type:0,doc:D}),x=!0):v&&!D&&(r.track({type:1,doc:v}),x=!0,(c||d)&&(u=!0)),x&&(D?(o=o.add(D),s=R?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:u,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((f,g)=>function(D,A){let R=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return R(D)-R(A)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),i=i!=null&&i;let u=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new rc(this.query,e.Ra,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Dm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ye(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Am(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Cm(r))}),t}ba(e){this.Ta=e.Ts,this.da=ye();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return rc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},cT=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},lT=class{constructor(e){this.key=e,this.va=!1}},dT=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new si(u=>l1(u),xh),this.Ma=new Map,this.xa=new Set,this.Oa=new st(z.comparator),this.Na=new Map,this.La=new wh,this.Ba={},this.ka=new Map,this.qa=Zu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Zz(n,e,t=!0){return S(this,null,function*(){let r=qm(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield ok(r,e,t,!0),i})}function eG(n,e){return S(this,null,function*(){let t=qm(n);yield ok(t,e,!0,!1)})}function ok(n,e,t,r){return S(this,null,function*(){let i=yield ec(n.localStore,In(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),u;return r&&(u=yield ZT(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&$m(n.remoteStore,i),u})}function ZT(n,e,t,r,i){return S(this,null,function*(){n.Ka=(g,v,D)=>function(R,x,k,j){return S(this,null,function*(){let O=x.view.ma(k);O.ns&&(O=yield mm(R.localStore,x.query,!1).then(({documents:I})=>x.view.ma(I,O)));let U=j&&j.targetChanges.get(x.targetId),X=j&&j.targetMismatches.get(x.targetId)!=null,$=x.view.applyChanges(O,R.isPrimaryClient,U,X);return hT(R,x.targetId,$.wa),$.snapshot})}(n,g,v,D);let s=yield mm(n.localStore,e,!0),o=new Sm(e,s.Ts),u=o.ma(s.documents),c=mh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(u,n.isPrimaryClient,c);hT(n,t,d.wa);let f=new cT(e,t,o);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function tG(n,e,t){return S(this,null,function*(){let r=q(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!xh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield tc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&nc(r.remoteStore,i.targetId),ic(r,i.targetId)}).catch(Gs))):(ic(r,i.targetId),yield tc(r.localStore,i.targetId,!0))})}function nG(n,e){return S(this,null,function*(){let t=q(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),nc(t.remoteStore,r.targetId))})}function rG(n,e,t){return S(this,null,function*(){let r=rD(n);try{let i=yield function(o,u){let c=q(o),d=dt.now(),f=u.reduce((D,A)=>D.add(A.key),ye()),g,v;return c.persistence.runTransaction("Locally write mutations","readwrite",D=>{let A=Mn(),R=ye();return c.cs.getEntries(D,f).next(x=>{A=x,A.forEach((k,j)=>{j.isValidDocument()||(R=R.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(D,A)).next(x=>{g=x;let k=[];for(let j of u){let O=yz(j,g.get(j.key).overlayedDocument);O!=null&&k.push(new Pr(j.key,O,r1(O.value.mapValue),gt.exists(!0)))}return c.mutationQueue.addMutationBatch(D,d,k,u)}).next(x=>{v=x;let k=x.applyToLocalDocumentSet(g,R);return c.documentOverlayCache.saveOverlays(D,x.batchId,k)})}).then(()=>({batchId:v.batchId,changes:p1(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,u,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new st(pe)),d=d.insert(u,c),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,t),yield Xi(r,i.changes),yield dc(r.remoteStore)}catch(i){let s=fc(i,"Failed to persist write");t.reject(s)}})}function ak(n,e){return S(this,null,function*(){let t=q(n);try{let r=yield Vz(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(Z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Z(o.va):i.removedDocuments.size>0&&(Z(o.va),o.va=!1))}),yield Xi(t,r,e)}catch(r){yield Gs(r)}})}function NN(n,e,t){let r=q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let u=o.view.Z_(e);u.snapshot&&i.push(u.snapshot)}),function(o,u){let c=q(o);c.onlineState=u;let d=!1;c.queries.forEach((f,g)=>{for(let v of g.j_)v.Z_(u)&&(d=!0)}),d&&XT(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function iG(n,e,t){return S(this,null,function*(){let r=q(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new st(z.comparator);o=o.insert(s,Rt.newNoDocument(s,ne.min()));let u=ye().add(s),c=new gh(ne.min(),new Map,new st(pe),o,u);yield ak(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),nD(r)}else yield tc(r.localStore,e,!1).then(()=>ic(r,e,t)).catch(Gs)})}function sG(n,e){return S(this,null,function*(){let t=q(n),r=e.batch.batchId;try{let i=yield Oz(t.localStore,e);tD(t,r,null),eD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xi(t,i)}catch(i){yield Gs(i)}})}function oG(n,e,t){return S(this,null,function*(){let r=q(n);try{let i=yield function(o,u){let c=q(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,u).next(g=>(Z(g!==null),f=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);tD(r,e,t),eD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xi(r,i)}catch(i){yield Gs(i)}})}function aG(n,e){return S(this,null,function*(){let t=q(n);Ws(t.remoteStore)||F("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let u=q(o);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>u.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=fc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function eD(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function tD(n,e,t){let r=q(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ic(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||uk(n,r)})}function uk(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(nc(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),nD(n))}function hT(n,e,t){for(let r of t)r instanceof Cm?(n.La.addReference(r.key,e),uG(n,r)):r instanceof Am?(F("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||uk(n,r.key)):K()}function uG(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(F("SyncEngine","New document in limbo: "+t),n.xa.add(r),nD(n))}function nD(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new z(Pe.fromString(e)),r=n.qa.next();n.Na.set(r,new lT(t)),n.Oa=n.Oa.insert(t,r),$m(n.remoteStore,new Xu(In(cc(t.path)),r,"TargetPurposeLimboResolution",$n.oe))}}function Xi(n,e,t){return S(this,null,function*(){let r=q(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{o.push(r.Ka(c,e,t).then(d=>{var f;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(f=t?.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){i.push(d);let g=z0.Wi(c.targetId,d);s.push(g)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,d){return S(this,null,function*(){let f=q(c);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>P.forEach(d,v=>P.forEach(v.$i,D=>f.persistence.referenceDelegate.addReference(g,v.targetId,D)).next(()=>P.forEach(v.Ui,D=>f.persistence.referenceDelegate.removeReference(g,v.targetId,D)))))}catch(g){if(!Hs(g))throw g;F("LocalStore","Failed to update sequence numbers: "+g)}for(let g of d){let v=g.targetId;if(!g.fromCache){let D=f.os.get(v),A=D.snapshotVersion,R=D.withLastLimboFreeSnapshotVersion(A);f.os=f.os.insert(v,R)}}})}(r.localStore,s))})}function cG(n,e){return S(this,null,function*(){let t=q(n);if(!t.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());let r=yield W1(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(u=>{u.forEach(c=>{c.reject(new V(N.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xi(t,r.hs)}})}function lG(n,e){let t=q(n),r=t.Na.get(e);if(r&&r.va)return ye().add(r.key);{let i=ye(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let u=t.Fa.get(o);i=i.unionWith(u.view.Va)}return i}}function dG(n,e){return S(this,null,function*(){let t=q(n),r=yield mm(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&hT(t,e.targetId,i.wa),i})}function hG(n,e){return S(this,null,function*(){let t=q(n);return J1(t.localStore,e).then(r=>Xi(t,r))})}function fG(n,e,t,r){return S(this,null,function*(){let i=q(n),s=yield function(u,c){let d=q(u),f=q(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>f.Mn(g,c).next(v=>v?d.localDocuments.getDocuments(g,v):P.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?yield dc(i.remoteStore):t==="acknowledged"||t==="rejected"?(tD(i,e,r||null),eD(i,e),function(u,c){q(q(u).mutationQueue).On(c)}(i.localStore,e)):K(),yield Xi(i,s)):F("SyncEngine","Cannot apply mutation batch with id: "+e)})}function pG(n,e){return S(this,null,function*(){let t=q(n);if(qm(t),rD(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield kN(t,r.toArray());t.Qa=!0,yield nT(t.remoteStore,!0);for(let s of i)$m(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(ic(t,o),tc(t.localStore,o,!0))),nc(t.remoteStore,o)}),yield i,yield kN(t,r),function(o){let u=q(o);u.Na.forEach((c,d)=>{nc(u.remoteStore,d)}),u.La.pr(),u.Na=new Map,u.Oa=new st(z.comparator)}(t),t.Qa=!1,yield nT(t.remoteStore,!1)}})}function kN(n,e,t){return S(this,null,function*(){let r=q(n),i=[],s=[];for(let o of e){let u,c=r.Ma.get(o);if(c&&c.length!==0){u=yield ec(r.localStore,In(c[0]));for(let d of c){let f=r.Fa.get(d),g=yield dG(r,f);g.snapshot&&s.push(g.snapshot)}}else{let d=yield Y1(r.localStore,o);u=yield ec(r.localStore,d),yield ZT(r,ck(d),o,!1,u.resumeToken)}i.push(u)}return r.Ca.d_(s),i})}function ck(n){return c1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function gG(n){return function(t){return q(q(t).persistence).Qi()}(q(n).localStore)}function mG(n,e,t,r){return S(this,null,function*(){let i=q(n);if(i.Qa)return void F("SyncEngine","Ignoring unexpected query state notification.");let s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{let o=yield J1(i.localStore,d1(s[0])),u=gh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Et.EMPTY_BYTE_STRING);yield Xi(i,o,u);break}case"rejected":yield tc(i.localStore,e,!0),ic(i,e,r);break;default:K()}})}function yG(n,e,t){return S(this,null,function*(){let r=qm(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){F("SyncEngine","Adding an already active target "+i);continue}let s=yield Y1(r.localStore,i),o=yield ec(r.localStore,s);yield ZT(r,ck(s),o.targetId,!1,o.resumeToken),$m(r.remoteStore,o)}for(let i of t)r.Ma.has(i)&&(yield tc(r.localStore,i,!1).then(()=>{nc(r.remoteStore,i),ic(r,i)}).catch(Gs))}})}function qm(n){let e=q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ak.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iG.bind(null,e),e.Ca.d_=Jz.bind(null,e.eventManager),e.Ca.$a=Xz.bind(null,e.eventManager),e}function rD(n){let e=q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oG.bind(null,e),e}function _G(n,e,t){let r=q(n);(function(s,o,u){return S(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(D,A){let R=q(D),x=It(A.createTime);return R.persistence.runTransaction("hasNewerBundle","readonly",k=>R.Gr.getBundleMetadata(k,A.id)).then(k=>!!k&&k.createTime.compareTo(x)>=0)}(s.localStore,c))return yield o.close(),u._completeWith(function(D){return{taskState:"Success",documentsLoaded:D.totalDocuments,bytesLoaded:D.totalBytes,totalDocuments:D.totalDocuments,totalBytes:D.totalBytes}}(c)),Promise.resolve(new Set);u._updateProgress(sk(c));let d=new uT(c,s.localStore,o.serializer),f=yield o.Ua();for(;f;){let v=yield d.la(f);v&&u._updateProgress(v),f=yield o.Ua()}let g=yield d.complete();return yield Xi(s,g.Ia,void 0),yield function(D,A){let R=q(D);return R.persistence.runTransaction("Save bundle","readwrite",x=>R.Gr.saveBundleMetadata(x,A))}(s.localStore,c),u._completeWith(g.progress),Promise.resolve(g.Pa)}catch(c){return Rr("SyncEngine",`Loading bundle failed with ${c}`),u._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var fT=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return S(this,null,function*(){this.serializer=Mh(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return H1(this.persistence,new gm,t.initialUser,this.serializer)}Ga(t){return new fm(pm.Zr,this.serializer)}Wa(t){return new vm}terminate(){return S(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var xm=class n extends fT{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return S(this,null,function*(){yield df(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield rD(this.Ja.syncEngine),yield dc(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return H1(this.persistence,new gm,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new S0(r,e.asyncQueue,t)}Ha(e,t){let r=new GE(t,this.persistence);return new zE(e.asyncQueue,r)}Ga(e){let t=HT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new q0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Z1(),$g(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new vm}},pT=class n extends xm{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return S(this,null,function*(){yield df(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof sh&&(this.sharedClientState.syncEngine={no:fG.bind(null,t),ro:mG.bind(null,t),io:yG.bind(null,t),Qi:gG.bind(null,t),eo:hG.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>S(this,null,function*(){yield pG(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=Z1();if(!sh.D(t))throw new V(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=HT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sh(t,e.asyncQueue,r,e.clientId,e.initialUser)}},iD=(()=>{class n{initialize(t,r){return S(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>NN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=cG.bind(null,this.syncEngine),yield nT(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new sT}()}createDatastore(t){let r=Mh(t.databaseInfo.databaseId),i=function(o){return new Y0(o)}(t.databaseInfo);return function(o,u,c,d){return new Z0(o,u,c,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,u,c){return new tT(i,s,o,u,c)}(this.localStore,this.datastore,t.asyncQueue,r=>NN(this.syncEngine,r,0),function(){return wm.D()?new wm:new K0}())}createSyncEngine(t,r){return function(s,o,u,c,d,f,g){let v=new dT(s,o,u,c,d,f);return g&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return S(this,null,function*(){var t,r;yield function(s){return S(this,null,function*(){let o=q(s);F("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield lc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function ON(n,e=10240){let t=0;return{read(){return S(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return S(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var sc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):vt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var gT=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Bt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return S(this,null,function*(){return this.metadata.promise})}Ua(){return S(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return S(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new aT(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return S(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return S(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return S(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var mT=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return S(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new V(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,s){return S(this,null,function*(){let o=q(i),u={documents:s.map(g=>yh(o.serializer,g))},c=yield o.Lo("BatchGetDocuments",o.serializer.databaseId,Pe.emptyPath(),u,s.length),d=new Map;c.forEach(g=>{let v=Tz(o.serializer,g);d.set(v.key.toString(),v)});let f=[];return s.forEach(g=>{let v=d.get(g.toString());Z(!!v),f.push(v)}),f})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new qs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return S(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=z.fromPath(r);this.mutations.push(new hh(i,this.precondition(i)))}),yield function(r,i){return S(this,null,function*(){let s=q(r),o={writes:i.map(u=>_h(s.serializer,u))};yield s.Mo("Commit",s.serializer.databaseId,Pe.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw K();t=ne.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new V(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ne.min())?gt.exists(!1):gt.updateTime(t):gt.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ne.min()))throw new V(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gt.updateTime(t)}return gt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var yT=class{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new Eh(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>S(this,null,function*(){let e=new mT(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Ah(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!D1(t)}return!1}};var _T=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=xt.UNAUTHENTICATED,this.clientId=zg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>S(this,null,function*(){F("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(F("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Bt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=fc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function NE(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>S(this,null,function*(){r.isEqual(i)||(yield W1(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function VN(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield sD(n);F("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>RN(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>RN(e.remoteStore,i)),n._onlineComponents=e})}function sD(n){return S(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{yield NE(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Rr("Error using user provided cache. Falling back to memory cache: "+t),yield NE(n,new fT)}}else F("FirestoreClient","Using default OfflineComponentProvider"),yield NE(n,new fT);return n._offlineComponents})}function zm(n){return S(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),yield VN(n,n._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),yield VN(n,new iD))),n._onlineComponents})}function lk(n){return sD(n).then(e=>e.persistence)}function oD(n){return sD(n).then(e=>e.localStore)}function dk(n){return zm(n).then(e=>e.remoteStore)}function aD(n){return zm(n).then(e=>e.syncEngine)}function vG(n){return zm(n).then(e=>e.datastore)}function oc(n){return S(this,null,function*(){let e=yield zm(n),t=e.eventManager;return t.onListen=Zz.bind(null,e.syncEngine),t.onUnlisten=tG.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=eG.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=nG.bind(null,e.syncEngine),t})}function wG(n){return n.asyncQueue.enqueue(()=>S(this,null,function*(){let e=yield lk(n),t=yield dk(n);return e.setNetworkEnabled(!0),function(i){let s=q(i);return s.L_.delete(0),Ph(s)}(t)}))}function IG(n){return n.asyncQueue.enqueue(()=>S(this,null,function*(){let e=yield lk(n),t=yield dk(n);return e.setNetworkEnabled(!1),function(i){return S(this,null,function*(){let s=q(i);s.L_.add(0),yield lc(s),s.q_.set("Offline")})}(t)}))}function EG(n,e){let t=new Bt;return n.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return function(i,s,o){return S(this,null,function*(){try{let u=yield function(d,f){let g=q(d);return g.persistence.runTransaction("read document","readonly",v=>g.localDocuments.getDocument(v,f))}(i,s);u.isFoundDocument()?o.resolve(u):u.isNoDocument()?o.resolve(null):o.reject(new V(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){let c=fc(u,`Failed to get document '${s} from cache`);o.reject(c)}})}(yield oD(n),e,t)})),t.promise}function hk(n,e,t={}){let r=new Bt;return n.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return function(s,o,u,c,d){let f=new sc({next:v=>{f.Za(),o.enqueueAndForget(()=>JT(s,g));let D=v.docs.has(u);!D&&v.fromCache?d.reject(new V(N.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&v.fromCache&&c&&c.source==="server"?d.reject(new V(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),g=new Th(cc(u.path),f,{includeMetadataChanges:!0,_a:!0});return YT(s,g)}(yield oc(n),n.asyncQueue,e,t,r)})),r.promise}function TG(n,e){let t=new Bt;return n.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return function(i,s,o){return S(this,null,function*(){try{let u=yield mm(i,s,!0),c=new Sm(s,u.Ts),d=c.ma(u.documents),f=c.applyChanges(d,!1);o.resolve(f.snapshot)}catch(u){let c=fc(u,`Failed to execute query '${s} against cache`);o.reject(c)}})}(yield oD(n),e,t)})),t.promise}function fk(n,e,t={}){let r=new Bt;return n.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return function(s,o,u,c,d){let f=new sc({next:v=>{f.Za(),o.enqueueAndForget(()=>JT(s,g)),v.fromCache&&c.source==="server"?d.reject(new V(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),g=new Th(u,f,{includeMetadataChanges:!0,_a:!0});return YT(s,g)}(yield oc(n),n.asyncQueue,e,t,r)})),r.promise}function DG(n,e){let t=new sc(e);return n.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return function(i,s){q(i).Y_.add(s),s.next()}(yield oc(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return function(i,s){q(i).Y_.delete(s)}(yield oc(n),t)}))}}function bG(n,e,t,r){let i=function(o,u){let c;return c=typeof o=="string"?C1().encode(o):o,function(f,g){return new gT(f,g)}(function(f,g){if(f instanceof Uint8Array)return ON(f,g);if(f instanceof ArrayBuffer)return ON(new Uint8Array(f),g);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),u)}(t,Mh(e));n.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){_G(yield aD(n),i,r)}))}function CG(n,e){return n.asyncQueue.enqueue(()=>S(this,null,function*(){return function(r,i){let s=q(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield oD(n),e)}))}function pk(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var FN=new Map;function uD(n,e,t){if(!t)throw new V(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cD(n,e,t,r){if(e===!0&&r===!0)throw new V(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function LN(n){if(!z.isDocumentKey(n))throw new V(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jN(n){if(z.isDocumentKey(n))throw new V(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Gm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K()}function Ue(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new V(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Gm(n);throw new V(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function gk(n,e){if(e<=0)throw new V(N.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Rm=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},va=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new kE;switch(r.type){case"firstParty":return new LE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return S(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=FN.get(t);r&&(F("ComponentProvider","Removing Datastore"),FN.delete(t),r.terminate())}(this),Promise.resolve()}};function lD(n,e,t,r={}){var i;let s=(n=Ue(n,va))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Rr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=xt.MOCK_USER;else{u=MA(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new V(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new xt(d)}n._authCredentials=new OE(new qg(u,c))}}var en=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},nt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ni=class n extends en{constructor(e,t,r){super(e,t,cc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new nt(this.firestore,null,new z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Nh(n,e,...t){if(n=ct(n),uD("collection","path",e),n instanceof va){let r=Pe.fromString(e,...t);return jN(r),new ni(n,null,r)}{if(!(n instanceof nt||n instanceof ni))throw new V(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Pe.fromString(e,...t));return jN(r),new ni(n.firestore,null,r)}}function dD(n,e){if(n=Ue(n,va),uD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new V(N.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new en(n,null,function(r){return new Mr(Pe.emptyPath(),r)}(e))}function pc(n,e,...t){if(n=ct(n),arguments.length===1&&(e=zg.newId()),uD("doc","path",e),n instanceof va){let r=Pe.fromString(e,...t);return LN(r),new nt(n,null,new z(r))}{if(!(n instanceof nt||n instanceof ni))throw new V(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Pe.fromString(e,...t));return LN(r),new nt(n.firestore,n instanceof ni?n.converter:null,new z(r))}}function Hm(n,e){return n=ct(n),e=ct(e),(n instanceof nt||n instanceof ni)&&(e instanceof nt||e instanceof ni)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Wm(n,e){return n=ct(n),e=ct(e),n instanceof en&&e instanceof en&&n.firestore===e.firestore&&xh(n._query,e._query)&&n.converter===e.converter}var Mm=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Eh(this,"async_queue_retry"),this.Vu=()=>{let r=$g();r&&F("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=$g();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=$g();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Bt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return S(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Hs(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(r);throw vt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=rT.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&K()}verifyOperationInProgress(){}wu(){return S(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function vT(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var wT=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Bt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var mk=-1,ht=class extends va{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Mm,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return S(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Mm(e),this._firestoreClient=void 0,yield e}})}};function tn(n){if(n._terminated)throw new V(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yk(n),n._firestoreClient}function yk(n){var e,t,r;let i=n._freezeSettings(),s=function(u,c,d,f){return new HE(u,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,pk(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new _T(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(u){let c=u?._online.build();return{_offline:u?._offline.build(c),_online:c}}(n._componentsProvider))}function hD(n,e){Rr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return _k(n,iD.provider,{build:r=>new xm(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function fD(n){return S(this,null,function*(){Rr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();_k(n,iD.provider,{build:t=>new pT(t,e.cacheSizeBytes)})})}function _k(n,e,t){if((n=Ue(n,ht))._firestoreClient||n._terminated)throw new V(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new V(N.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},yk(n)}function pD(n){if(n._initialized&&!n._terminated)throw new V(N.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Bt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{yield function(r){return S(this,null,function*(){if(!Vs.D())return Promise.resolve();let i=r+"main";yield Vs.delete(i)})}(HT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function gD(n){return function(t){let r=new Bt;return t.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return aG(yield aD(t),r)})),r.promise}(tn(n=Ue(n,ht)))}function mD(n){return wG(tn(n=Ue(n,ht)))}function yD(n){return IG(tn(n=Ue(n,ht)))}function _D(n,e){let t=tn(n=Ue(n,ht)),r=new wT;return bG(t,n._databaseId,e,r),r}function vD(n,e){return CG(tn(n=Ue(n,ht)),e).then(t=>t?new en(n,null,t.query):null)}var oi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Et.fromBase64String(e))}catch(t){throw new V(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Nr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new V(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Yi=class{constructor(e){this._methodName=e}};var wa=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new V(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new V(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}};var Dh=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var AG=/^__.*__$/,IT=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Pr(e,this.data,this.fieldMask,t,this.fieldTransforms):new $s(e,this.data,t,this.fieldTransforms)}},Pm=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Pr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function vk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var Nm=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return km(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(vk(this.Cu)&&AG.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},ET=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Mh(e)}Qu(e,t,r,i=!1){return new Nm({Cu:e,methodName:t,qu:r,path:wt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Da(n){let e=n._freezeSettings(),t=Mh(n._databaseId);return new ET(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Km(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);ED("Data must be an object, but it was:",o,r);let u=Ek(r,o),c,d;if(s.merge)c=new qn(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let g of s.mergeFields){let v=AT(e,g,t);if(!o.contains(v))throw new V(N.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);Dk(f,v)||f.push(v)}c=new qn(f),d=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=o.fieldTransforms;return new IT(new on(u),c,d)}var bh=class n extends Yi{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function wk(n,e,t){return new Nm({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var TT=class n extends Yi{_toFieldTransform(e){return new ma(e.path,new Bs)}isEqual(e){return e instanceof n}},DT=class n extends Yi{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=wk(this,e,!0),r=this.Ku.map(s=>ba(s,t)),i=new Ki(r);return new ma(e.path,i)}isEqual(e){return e instanceof n&&B_(this.Ku,e.Ku)}},bT=class n extends Yi{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=wk(this,e,!0),r=this.Ku.map(s=>ba(s,t)),i=new Qi(r);return new ma(e.path,i)}isEqual(e){return e instanceof n&&B_(this.Ku,e.Ku)}},CT=class n extends Yi{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Us(e.serializer,y1(e.serializer,this.$u));return new ma(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function wD(n,e,t,r){let i=n.Qu(1,e,t);ED("Data must be an object, but it was:",i,r);let s=[],o=on.empty();Ta(r,(c,d)=>{let f=TD(e,c,t);d=ct(d);let g=i.Nu(f);if(d instanceof bh)s.push(f);else{let v=ba(d,g);v!=null&&(s.push(f),o.set(f,v))}});let u=new qn(s);return new Pm(o,u,i.fieldTransforms)}function ID(n,e,t,r,i,s){let o=n.Qu(1,e,t),u=[AT(e,r,t)],c=[i];if(s.length%2!=0)throw new V(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)u.push(AT(e,s[v])),c.push(s[v+1]);let d=[],f=on.empty();for(let v=u.length-1;v>=0;--v)if(!Dk(d,u[v])){let D=u[v],A=c[v];A=ct(A);let R=o.Nu(D);if(A instanceof bh)d.push(D);else{let x=ba(A,R);x!=null&&(d.push(D),f.set(D,x))}}let g=new qn(d);return new Pm(f,g,o.fieldTransforms)}function Ik(n,e,t,r=!1){return ba(t,n.Qu(r?4:3,e))}function ba(n,e){if(Tk(n=ct(n)))return ED("Unsupported field value:",e,n),Ek(n,e);if(n instanceof Yi)return function(r,i){if(!vk(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let u of r){let c=ba(u,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return y1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=dt.fromDate(r);return{timestampValue:Ju(i.serializer,s)}}if(r instanceof dt){let s=new dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ju(i.serializer,s)}}if(r instanceof wa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof oi)return{bytesValue:A1(i.serializer,r._byteString)};if(r instanceof nt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:qT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Dh)return function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return $T(u.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Gm(r)}`)}(n,e)}function Ek(n,e){let t={};return ZN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ta(n,(r,i)=>{let s=ba(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Tk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof dt||n instanceof wa||n instanceof oi||n instanceof nt||n instanceof Yi||n instanceof Dh)}function ED(n,e,t){if(!Tk(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Gm(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function AT(n,e,t){if((e=ct(e))instanceof Nr)return e._internalPath;if(typeof e=="string")return TD(n,e);throw km("Field path arguments must be of type string or ",n,!1,void 0,t)}var SG=new RegExp("[~\\*/\\[\\]]");function TD(n,e,t){if(e.search(SG)>=0)throw km(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nr(...e.split("."))._internalPath}catch{throw km(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function km(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new V(N.INVALID_ARGUMENT,u+n+c)}function Dk(n,e){return n.some(t=>t.isEqual(e))}var Ia=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ST(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Qm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},ST=class extends Ia{data(){return super.data()}};function Qm(n,e){return typeof e=="string"?TD(n,e):e instanceof Nr?e._internalPath:e._delegate._internalPath}function bk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new V(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ch=class{},Ea=class extends Ch{};function ai(n,e,...t){let r=[];e instanceof Ch&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof xT).length,u=s.filter(c=>c instanceof Om).length;if(o>1||o>0&&u>0)throw new V(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Om=class n extends Ea{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Ak(e._query,t),new en(e.firestore,e.converter,s0(e._query,t))}_parse(e){let t=Da(e.firestore);return function(s,o,u,c,d,f,g){let v;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new V(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){UN(g,f);let D=[];for(let A of g)D.push(BN(c,s,A));v={arrayValue:{values:D}}}else v=BN(c,s,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||UN(g,f),v=Ik(u,o,g,f==="in"||f==="not-in");return Ce.create(d,f,v)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function DD(n,e,t){let r=e,i=Qm("where",n);return Om._create(i,r,t)}var xT=class n extends Ch{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ye.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,u=s.getFlattenedFilters();for(let c of u)Ak(o,c),o=s0(o,c)}(e._query,t),new en(e.firestore,e.converter,s0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var RT=class n extends Ea{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new V(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new V(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pa(s,o)}(e._query,this._field,this._direction);return new en(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Mr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function bD(n,e="asc"){let t=e,r=Qm("orderBy",n);return RT._create(r,t)}var Vm=class n extends Ea{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new en(e.firestore,e.converter,em(e._query,this._limit,this._limitType))}};function CD(n){return gk("limit",n),Vm._create("limit",n,"F")}function AD(n){return gk("limitToLast",n),Vm._create("limitToLast",n,"L")}var Fm=class n extends Ea{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Ck(e,this.type,this._docOrFields,this._inclusive);return new en(e.firestore,e.converter,function(i,s){return new Mr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}};function SD(...n){return Fm._create("startAt",n,!0)}function xD(...n){return Fm._create("startAfter",n,!1)}var Lm=class n extends Ea{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Ck(e,this.type,this._docOrFields,this._inclusive);return new en(e.firestore,e.converter,function(i,s){return new Mr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}};function RD(...n){return Lm._create("endBefore",n,!1)}function MD(...n){return Lm._create("endAt",n,!0)}function Ck(n,e,t,r){if(t[0]=ct(t[0]),t[0]instanceof Ia)return function(s,o,u,c,d){if(!c)throw new V(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);let f=[];for(let g of qu(s))if(g.field.isKeyField())f.push(fa(o,c.key));else{let v=c.data.field(g.field);if(Bm(v))throw new V(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){let D=g.field.canonicalString();throw new V(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${D}' (used as the orderBy) does not exist.`)}f.push(v)}return new ii(f,d)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Da(n.firestore);return function(o,u,c,d,f,g){let v=o.explicitOrderBy;if(f.length>v.length)throw new V(N.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let D=[];for(let A=0;A<f.length;A++){let R=f[A];if(v[A].field.isKeyField()){if(typeof R!="string")throw new V(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof R}`);if(!BT(o)&&R.indexOf("/")!==-1)throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${R}' contains a slash.`);let x=o.path.child(Pe.fromString(R));if(!z.isDocumentKey(x))throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);let k=new z(x);D.push(fa(u,k))}else{let x=Ik(c,d,R);D.push(x)}}return new ii(D,g)}(n._query,n.firestore._databaseId,i,e,t,r)}}function BN(n,e,t){if(typeof(t=ct(t))=="string"){if(t==="")throw new V(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BT(e)&&t.indexOf("/")!==-1)throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Pe.fromString(t));if(!z.isDocumentKey(r))throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fa(n,new z(r))}if(t instanceof nt)return fa(n,t._key);throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gm(t)}.`)}function UN(n,e){if(!Array.isArray(n)||n.length===0)throw new V(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ak(n,e){let t=function(i,s){for(let o of i)for(let u of o.getFlattenedFilters())if(s.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new V(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new V(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ac=class{convertValue(e,t="none"){switch(ha(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ta(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ot(o.doubleValue));return new Dh(s)}convertGeoPoint(e){return new wa(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=LT(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ch(e));default:return null}}convertTimestamp(e){let t=Wi(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Pe.fromString(e);Z(L1(r));let i=new Ls(r.get(1),r.get(3)),s=new z(r.popFirst(5));return i.isEqual(t)||vt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Ym(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var MT=class extends ac{constructor(e){super(),this.firestore=e}convertBytes(e){return new oi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,t)}};var Hi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},er=class extends Ia{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ks(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Qm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ks=class extends er{data(e={}){return super.data(e)}},kr=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ks(this._firestore,this._userDataWriter,r.key,r,new Hi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new V(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(u=>{let c=new ks(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Hi(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{let c=new ks(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Hi(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,f=-1;return u.type!==0&&(d=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),f=o.indexOf(u.doc.key)),{type:xG(u.type),doc:c,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function xG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function Jm(n,e){return n instanceof er&&e instanceof er?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof kr&&e instanceof kr&&n._firestore===e._firestore&&Wm(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function PD(n){n=Ue(n,nt);let e=Ue(n.firestore,ht);return hk(tn(e),n._key).then(t=>UD(e,n,t))}var Ji=class extends ac{constructor(e){super(),this.firestore=e}convertBytes(e){return new oi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,t)}};function ND(n){n=Ue(n,nt);let e=Ue(n.firestore,ht),t=tn(e),r=new Ji(e);return EG(t,n._key).then(i=>new er(e,r,n._key,i,new Hi(i!==null&&i.hasLocalMutations,!0),n.converter))}function kD(n){n=Ue(n,nt);let e=Ue(n.firestore,ht);return hk(tn(e),n._key,{source:"server"}).then(t=>UD(e,n,t))}function OD(n){n=Ue(n,en);let e=Ue(n.firestore,ht),t=tn(e),r=new Ji(e);return bk(n._query),fk(t,n._query).then(i=>new kr(e,r,n,i))}function VD(n){n=Ue(n,en);let e=Ue(n.firestore,ht),t=tn(e),r=new Ji(e);return TG(t,n._query).then(i=>new kr(e,r,n,i))}function FD(n){n=Ue(n,en);let e=Ue(n.firestore,ht),t=tn(e),r=new Ji(e);return fk(t,n._query,{source:"server"}).then(i=>new kr(e,r,n,i))}function Xm(n,e,t){n=Ue(n,nt);let r=Ue(n.firestore,ht),i=Ym(n.converter,e,t);return gc(r,[Km(Da(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,gt.none())])}function Zm(n,e,t,...r){n=Ue(n,nt);let i=Ue(n.firestore,ht),s=Da(i),o;return o=typeof(e=ct(e))=="string"||e instanceof Nr?ID(s,"updateDoc",n._key,e,t,r):wD(s,"updateDoc",n._key,e),gc(i,[o.toMutation(n._key,gt.exists(!0))])}function LD(n){return gc(Ue(n.firestore,ht),[new qs(n._key,gt.none())])}function jD(n,e){let t=Ue(n.firestore,ht),r=pc(n),i=Ym(n.converter,e);return gc(t,[Km(Da(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,gt.exists(!1))]).then(()=>r)}function ey(n,...e){var t,r,i;n=ct(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||vT(e[o])||(s=e[o],o++);let u={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(vT(e[o])){let g=e[o];e[o]=(t=g.next)===null||t===void 0?void 0:t.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let c,d,f;if(n instanceof nt)d=Ue(n.firestore,ht),f=cc(n._key.path),c={next:g=>{e[o]&&e[o](UD(d,n,g))},error:e[o+1],complete:e[o+2]};else{let g=Ue(n,en);d=Ue(g.firestore,ht),f=g._query;let v=new Ji(d);c={next:D=>{e[o]&&e[o](new kr(d,v,g,D))},error:e[o+1],complete:e[o+2]},bk(n._query)}return function(v,D,A,R){let x=new sc(R),k=new Th(D,x,A);return v.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return YT(yield oc(v),k)})),()=>{x.Za(),v.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return JT(yield oc(v),k)}))}}(tn(d),f,u,c)}function BD(n,e){return DG(tn(n=Ue(n,ht)),vT(e)?e:{next:e})}function gc(n,e){return function(r,i){let s=new Bt;return r.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return rG(yield aD(r),i,s)})),s.promise}(tn(n),e)}function UD(n,e,t){let r=t.docs.get(e._key),i=new Ji(n);return new er(n,i,e._key,r,new Hi(t.hasPendingWrites,t.fromCache),e.converter)}var RG={maxAttempts:5};var jm=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Da(e)}set(e,t,r){this._verifyNotCommitted();let i=Ps(e,this._firestore),s=Ym(i.converter,t,r),o=Km(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,gt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let s=Ps(e,this._firestore),o;return o=typeof(t=ct(t))=="string"||t instanceof Nr?ID(this._dataReader,"WriteBatch.update",s._key,t,r,i):wD(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,gt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Ps(e,this._firestore);return this._mutations=this._mutations.concat(new qs(t._key,gt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new V(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ps(n,e){if((n=ct(n)).firestore!==e)throw new V(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var PT=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Da(t)}get(t){let r=Ps(t,this._firestore),i=new MT(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return K();let o=s[0];if(o.isFoundDocument())return new Ia(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Ia(this._firestore,i,r._key,null,r.converter);throw K()})}set(t,r,i){let s=Ps(t,this._firestore),o=Ym(s.converter,r,i),u=Km(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,u),this}update(t,r,i,...s){let o=Ps(t,this._firestore),u;return u=typeof(r=ct(r))=="string"||r instanceof Nr?ID(this._dataReader,"Transaction.update",o._key,r,i,s):wD(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,u),this}delete(t){let r=Ps(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Ps(e,this._firestore),r=new Ji(this._firestore);return super.get(e).then(i=>new er(this._firestore,r,t._key,i._document,new Hi(!1,!1),t.converter))}};function $D(n,e,t){n=Ue(n,ht);let r=Object.assign(Object.assign({},RG),t);return function(s){if(s.maxAttempts<1)throw new V(N.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,u){let c=new Bt;return s.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){let d=yield vG(s);new yT(s.asyncQueue,d,u,o,c).au()})),c.promise}(tn(n),i=>e(new PT(n,i)),r)}function qD(){return new bh("deleteField")}function zD(){return new TT("serverTimestamp")}function GD(...n){return new DT("arrayUnion",n)}function HD(...n){return new bT("arrayRemove",n)}function WD(n){return new CT("increment",n)}(function(e,t=!0){(function(i){uc=i})(OA),Ql(new bo("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),u=new ht(new VE(r.getProvider("auth-internal")),new BE(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new V(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ls(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),Ri(jP,"4.7.3",e),Ri(jP,"4.7.3","esm2017")})();var MG="@firebase/firestore-compat",PG="0.3.38";function ZD(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new V("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Sk(){if(typeof Uint8Array>"u")throw new V("unimplemented","Uint8Arrays are not available in this environment.")}function xk(){if(!e1())throw new V("unimplemented","Blobs are unavailable in Firestore in this environment.")}var ty=class n{constructor(e){this._delegate=e}static fromBase64String(e){return xk(),new n(oi.fromBase64String(e))}static fromUint8Array(e){return Sk(),new n(oi.fromUint8Array(e))}toBase64(){return xk(),this._delegate.toBase64()}toUint8Array(){return Sk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function KD(n){return NG(n,["next","error","complete"])}function NG(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var QD=class{enableIndexedDbPersistence(e,t){return hD(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return fD(e._delegate)}clearIndexedDbPersistence(e){return pD(e._delegate)}},ny=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ls||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Rr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){lD(this._delegate,e,t,r)}enableNetwork(){return mD(this._delegate)}disableNetwork(){return yD(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,cD("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return gD(this._delegate)}onSnapshotsInSync(e){return BD(this._delegate,e)}get app(){if(!this._appCompat)throw new V("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new _c(this,Nh(this._delegate,e))}catch(t){throw En(t,"collection()","Firestore.collection()")}}doc(e){try{return new ui(this,pc(this._delegate,e))}catch(t){throw En(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xa(this,dD(this._delegate,e))}catch(t){throw En(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return $D(this._delegate,t=>e(new ry(this,t)))}batch(){return tn(this._delegate),new iy(new jm(this._delegate,e=>gc(this._delegate,e)))}loadBundle(e){return _D(this._delegate,e)}namedQuery(e){return vD(this._delegate,e).then(t=>t?new xa(this,t):null)}},mc=class extends ac{constructor(e){super(),this.firestore=e}convertBytes(e){return new ty(new oi(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return ui.forKey(t,this.firestore,null)}};function kG(n){NT(n)}var ry=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new mc(e)}get(e){let t=Ca(e);return this._delegate.get(t).then(r=>new Aa(this._firestore,new er(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Ca(e);return r?(ZD("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=Ca(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=Ca(e);return this._delegate.delete(t),this}},iy=class{constructor(e){this._delegate=e}set(e,t,r){let i=Ca(e);return r?(ZD("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=Ca(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=Ca(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},yc=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new ks(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Sa(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new n(e,new mc(e),t),i.set(t,s)),s}};yc.INSTANCES=new WeakMap;var ui=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mc(e)}static forPath(e,t,r){if(e.length%2!==0)throw new V("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new nt(t._delegate,r,new z(e)))}static forKey(e,t,r){return new n(t,new nt(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new _c(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new _c(this.firestore,Nh(this._delegate,e))}catch(t){throw En(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ct(e),e instanceof nt?Hm(this._delegate,e):!1}set(e,t){t=ZD("DocumentReference.set",t);try{return t?Xm(this._delegate,e,t):Xm(this._delegate,e)}catch(r){throw En(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?Zm(this._delegate,e):Zm(this._delegate,e,t,...r)}catch(i){throw En(i,"updateDoc()","DocumentReference.update()")}}delete(){return LD(this._delegate)}onSnapshot(...e){let t=Rk(e),r=Mk(e,i=>new Aa(this.firestore,new er(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ey(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=ND(this._delegate):e?.source==="server"?t=kD(this._delegate):t=PD(this._delegate),t.then(r=>new Aa(this.firestore,new er(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(yc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function En(n,e,t){return n.message=n.message.replace(e,t),n}function Rk(n){for(let e of n)if(typeof e=="object"&&!KD(e))return e;return{}}function Mk(n,e){var t,r;let i;return KD(n[0])?i=n[0]:KD(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Aa=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ui(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Jm(this._delegate,e._delegate)}},Sa=class extends Aa{data(e){let t=this._delegate.data(e);return this._delegate._converter||$N(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},xa=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mc(e)}where(e,t,r){try{return new n(this.firestore,ai(this._delegate,DD(e,t,r)))}catch(i){throw En(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,ai(this._delegate,bD(e,t)))}catch(r){throw En(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,ai(this._delegate,CD(e)))}catch(t){throw En(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,ai(this._delegate,AD(e)))}catch(t){throw En(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,ai(this._delegate,SD(...e)))}catch(t){throw En(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,ai(this._delegate,xD(...e)))}catch(t){throw En(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,ai(this._delegate,RD(...e)))}catch(t){throw En(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,ai(this._delegate,MD(...e)))}catch(t){throw En(t,"endAt()","Query.endAt()")}}isEqual(e){return Wm(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=VD(this._delegate):e?.source==="server"?t=FD(this._delegate):t=OD(this._delegate),t.then(r=>new kh(this.firestore,new kr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=Rk(e),r=Mk(e,i=>new kh(this.firestore,new kr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ey(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(yc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},YD=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Sa(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},kh=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new xa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Sa(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new YD(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Sa(this._firestore,r))})}isEqual(e){return Jm(this._delegate,e._delegate)}},_c=class n extends xa{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new ui(this.firestore,e):null}doc(e){try{return e===void 0?new ui(this.firestore,pc(this._delegate)):new ui(this.firestore,pc(this._delegate,e))}catch(t){throw En(t,"doc()","CollectionReference.doc()")}}add(e){return jD(this._delegate,e).then(t=>new ui(this.firestore,t))}isEqual(e){return Hm(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(yc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ca(n){return Ue(n,nt)}var JD=class n{constructor(...e){this._delegate=new Nr(...e)}static documentId(){return new n(wt.keyField().canonicalString())}isEqual(e){return e=ct(e),e instanceof Nr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var XD=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=zD();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=qD();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=GD(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=HD(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=WD(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var OG={Firestore:ny,GeoPoint:wa,Timestamp:dt,Blob:ty,Transaction:ry,WriteBatch:iy,DocumentReference:ui,DocumentSnapshot:Aa,Query:xa,QueryDocumentSnapshot:Sa,QuerySnapshot:kh,CollectionReference:_c,FieldPath:JD,FieldValue:XD,setLogLevel:kG,CACHE_SIZE_UNLIMITED:mk};function VG(n,e){n.INTERNAL.registerComponent(new bo("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},OG)))}function FG(n){VG(n,(e,t)=>new ny(e,t,new QD)),n.registerVersion(MG,PG)}FG(Tn);function LG(n,e=Zl){return new ve(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function Pk(n,e){return LG(n,e)}function jG(n,e){return Pk(n,e).pipe(ds(void 0),Ka(),se(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function nb(n,e){return Pk(n,e).pipe(se(t=>({payload:t,type:"query"})))}var sy=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:s}=Fk(r,t);return new ay(i,s,this.afs)}snapshotChanges(){return jG(this.ref,this.afs.schedulers.outsideAngular).pipe(vn)}valueChanges(e={}){return this.snapshotChanges().pipe(se(({payload:t})=>e.idField?Qe(W({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return xe(this.ref.get(e)).pipe(vn)}};function oy(n,e){return nb(n,e).pipe(ds(void 0),Ka(),se(t=>{let[r,i]=t,s=i.payload.docChanges(),o=s.map(u=>({type:u.type,payload:u}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((u,c)=>{let d=s.find(g=>g.doc.ref.isEqual(u.ref)),f=r?.payload.docs.find(g=>g.ref.isEqual(u.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(u.metadata)||!d&&f&&JSON.stringify(f.metadata)===JSON.stringify(u.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:u}})}),o}))}function Nk(n,e,t){return oy(n,t).pipe(ls((r,i)=>BG(r,i.map(s=>s.payload),e),[]),Uf(),se(r=>r.map(i=>({type:i.type,payload:i}))))}function BG(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=UG(n,r))}),n}function eb(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function UG(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return eb(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return eb(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return eb(n,e.oldIndex,1);break}return n}function kk(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var ay=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=oy(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(se(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ds(void 0),Ka(),qt(([r,i])=>i.length>0||!r),se(([,r])=>r),vn)}auditTrail(e){return this.stateChanges(e).pipe(ls((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=kk(e);return Nk(this.query,t,this.afs.schedulers.outsideAngular).pipe(vn)}valueChanges(e={}){return nb(this.query,this.afs.schedulers.outsideAngular).pipe(se(t=>t.payload.docs.map(r=>e.idField?Qe(W({},r.data()),{[e.idField]:r.id}):r.data())),vn)}get(e){return xe(this.query.get(e)).pipe(vn)}add(e){return this.ref.add(e)}doc(e){return new sy(this.ref.doc(e),this.afs)}},tb=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?oy(this.query,this.afs.schedulers.outsideAngular).pipe(vn):oy(this.query,this.afs.schedulers.outsideAngular).pipe(se(t=>t.filter(r=>e.indexOf(r.type)>-1)),qt(t=>t.length>0),vn)}auditTrail(e){return this.stateChanges(e).pipe(ls((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=kk(e);return Nk(this.query,t,this.afs.schedulers.outsideAngular).pipe(vn)}valueChanges(e={}){return nb(this.query,this.afs.schedulers.outsideAngular).pipe(se(r=>r.payload.docs.map(i=>e.idField?W({[e.idField]:i.id},i.data()):i.data())),vn)}get(e){return xe(this.query.get(e)).pipe(vn)}},Ok=new Y("angularfire2.enableFirestorePersistence"),Vk=new Y("angularfire2.firestore.persistenceSettings"),$G=new Y("angularfire2.firestore.settings"),qG=new Y("angularfire2.firestore.use-emulator");function Fk(n,e=t=>t){return{query:e(n),ref:n}}var rb=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,u,c,d,f,g,v,D,A,R,x,k,j){this.schedulers=c;let O=Wd(t,u,r),U=f;g&&EE(O,u,v,A,R,x,D,k),[this.firestore,this.persistenceEnabled$]=Mg(`${O.name}.firestore`,"AngularFirestore",O.name,()=>{let X=u.runOutsideAngular(()=>O.firestore());if(s&&X.settings(s),U&&X.useEmulator(...U),i&&!Zo(o)){let $=()=>{try{return xe(X.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),ie(!1)}};return[X,u.runOutsideAngular($)]}else return[X,ie(!1)]},[s,U,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:s,query:o}=Fk(i,r),u=this.schedulers.ngZone.run(()=>s);return new ay(u,o,this)}collectionGroup(t,r){let i=r||(o=>o),s=this.firestore.collectionGroup(t);return new tb(i(s),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new sy(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(B(xu),B(Ru,8),B(Ok,8),B($G,8),B(Sn),B(Re),B(Gd),B(Vk,8),B(qG,8),B(VP,8),B(mE,8),B(yE,8),B(_E,8),B(vE,8),B(wE,8),B(IE,8),B(Cs,8))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Lk=(()=>{class n{constructor(){Tn.registerVersion("angularfire",ra.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Ok,useValue:!0},{provide:Vk,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=jt({type:n});static \u0275inj=Lt({providers:[rb]})}return n})();var Wk=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(De(fu),De(zo))}}static{this.\u0275dir=rn({type:n})}}return n})(),GG=(()=>{class n extends Wk{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=hu(n)))(i||n)}})()}static{this.\u0275dir=rn({type:n,features:[ji]})}}return n})(),Kk=new Y("");var HG={provide:Kk,useExisting:$o(()=>py),multi:!0};function WG(){let n=Qr()?Qr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var KG=new Y(""),py=(()=>{class n extends Wk{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!WG())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(De(fu),De(zo),De(KG,8))}}static{this.\u0275dir=rn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&zt("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[_d([HG]),ji]})}}return n})();function QG(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var sb=new Y(""),Qk=new Y("");function YG(n){return QG(n.value)?{required:!0}:null}function jk(n){return null}function Yk(n){return n!=null}function Jk(n){return Yo(n)?xe(n):n}function Xk(n){let e={};return n.forEach(t=>{e=t!=null?W(W({},e),t):e}),Object.keys(e).length===0?null:e}function Zk(n,e){return e.map(t=>t(n))}function JG(n){return!n.validate}function eO(n){return n.map(e=>JG(e)?e:t=>e.validate(t))}function XG(n){if(!n)return null;let e=n.filter(Yk);return e.length==0?null:function(t){return Xk(Zk(t,e))}}function ob(n){return n!=null?XG(eO(n)):null}function ZG(n){if(!n)return null;let e=n.filter(Yk);return e.length==0?null:function(t){let r=Zk(t,e).map(Jk);return rv(r).pipe(se(Xk))}}function ab(n){return n!=null?ZG(eO(n)):null}function Bk(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function eH(n){return n._rawValidators}function tH(n){return n._rawAsyncValidators}function ib(n){return n?Array.isArray(n)?n:[n]:[]}function cy(n,e){return Array.isArray(n)?n.includes(e):n===e}function Uk(n,e){let t=ib(e);return ib(n).forEach(i=>{cy(t,i)||t.push(i)}),t}function $k(n,e){return ib(e).filter(t=>!cy(n,t))}var ly=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ob(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ab(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},wc=class extends ly{get formDirective(){return null}get path(){return null}},Lh=class extends ly{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},dy=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},nH={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Mee=Qe(W({},nH),{"[class.ng-submitted]":"isSubmitted"}),tO=(()=>{class n extends dy{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(De(Lh,2))}}static{this.\u0275dir=rn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ho("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ji]})}}return n})(),nO=(()=>{class n extends dy{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(De(wc,10))}}static{this.\u0275dir=rn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ho("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[ji]})}}return n})();var Oh="VALID",uy="INVALID",vc="PENDING",Vh="DISABLED";function rO(n){return(gy(n)?n.validators:n)||null}function rH(n){return Array.isArray(n)?ob(n):n||null}function iO(n,e){return(gy(e)?e.asyncValidators:n)||null}function iH(n){return Array.isArray(n)?ab(n):n||null}function gy(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function sH(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ee(1e3,"");if(!r[t])throw new ee(1001,"")}function oH(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ee(1002,"")})}var hy=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Oh}get invalid(){return this.status===uy}get pending(){return this.status==vc}get disabled(){return this.status===Vh}get enabled(){return this.status!==Vh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Uk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Uk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators($k(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators($k(e,this._rawAsyncValidators))}hasValidator(e){return cy(this._rawValidators,e)}hasAsyncValidator(e){return cy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=vc,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Vh,this.errors=null,this._forEachChild(r=>{r.disable(Qe(W({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Qe(W({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Oh,this._forEachChild(r=>{r.enable(Qe(W({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Qe(W({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Oh||this.status===vc)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vh:Oh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=vc,this._hasOwnPendingAsyncValidator=!0;let t=Jk(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new bt,this.statusChanges=new bt}_calculateStatus(){return this._allControlsDisabled()?Vh:this.errors?uy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vc)?vc:this._anyControlsHaveStatus(uy)?uy:Oh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gy(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=rH(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=iH(this._rawAsyncValidators)}},fy=class extends hy{constructor(e,t,r){super(rO(t),iO(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){oH(this,!0,e),Object.keys(e).forEach(r=>{sH(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ub=new Y("CallSetDisabledState",{providedIn:"root",factory:()=>cb}),cb="always";function aH(n,e){return[...e.path,n]}function sO(n,e,t=cb){oO(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),cH(n,e),dH(n,e),lH(n,e),uH(n,e)}function qk(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function uH(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function oO(n,e){let t=eH(n);e.validator!==null?n.setValidators(Bk(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=tH(n);e.asyncValidator!==null?n.setAsyncValidators(Bk(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();qk(e._rawValidators,i),qk(e._rawAsyncValidators,i)}function cH(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&aO(n,e)})}function lH(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&aO(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function aO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function dH(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function hH(n,e){n==null,oO(n,e)}function fH(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function pH(n){return Object.getPrototypeOf(n.constructor)===GG}function gH(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function mH(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===py?t=s:pH(s)?r=s:i=s}),i||r||t||null}var yH={provide:wc,useExisting:$o(()=>lb)},Fh=Promise.resolve(),lb=(()=>{class n extends wc{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new bt,this.form=new fy({},ob(t),ab(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Fh.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),sO(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Fh.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Fh.then(()=>{let r=this._findContainer(t.path),i=new fy({});hH(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Fh.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Fh.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,gH(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(De(sb,10),De(Qk,10),De(ub,8))}}static{this.\u0275dir=rn({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&zt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[Fn.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_d([yH]),ji]})}}return n})();function zk(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Gk(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var _H=class extends hy{constructor(e=null,t,r){super(rO(t),iO(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gy(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Gk(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){zk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){zk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Gk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var vH={provide:Lh,useExisting:$o(()=>db)},Hk=Promise.resolve(),db=(()=>{class n extends Lh{constructor(t,r,i,s,o,u){super(),this._changeDetectorRef=o,this.callSetDisabledState=u,this.control=new _H,this._registered=!1,this.name="",this.update=new bt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=mH(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),fH(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){sO(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Hk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&wd(r);Hk.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?aH(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(De(wc,9),De(sb,10),De(Qk,10),De(Kk,10),De(Jo,8),De(ub,8))}}static{this.\u0275dir=rn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Fn.None,"disabled","isDisabled"],model:[Fn.None,"ngModel","model"],options:[Fn.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_d([vH]),ji,qo]})}}return n})(),uO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=rn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var wH=(()=>{class n{constructor(){this._validator=jk}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):jk,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=rn({type:n,features:[qo]})}}return n})();var IH={provide:sb,useExisting:$o(()=>hb),multi:!0};var hb=(()=>{class n extends wH{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=wd,this.createValidator=t=>YG}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=hu(n)))(i||n)}})()}static{this.\u0275dir=rn({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Up("required",i._enabled?"":null)},inputs:{required:"required"},features:[_d([IH]),ji]})}}return n})();var EH=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=jt({type:n})}static{this.\u0275inj=Lt({})}}return n})();var cO=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ub,useValue:t.callSetDisabledState??cb}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=jt({type:n})}static{this.\u0275inj=Lt({imports:[EH]})}}return n})();var lO=(()=>{class n{constructor(t,r){this.firestore=t,this.router=r,this.name="",this.email="",this.specialization="",this.password="",this.loginEmail="",this.loginPassword=""}register(){let t={name:this.name,email:this.email,specialization:this.specialization,password:this.password};this.firestore.collection("doctors").add(t).then(()=>{alert("User registered successfully"),this.router.navigate(["/dashboard"])})}login(){this.firestore.collection("doctors",t=>t.where("email","==",this.loginEmail).where("password","==",this.loginPassword)).get().subscribe(t=>{t.empty?alert("Invalid credentials"):(alert("Login successful"),this.router.navigate(["/dashboard"]))})}static{this.\u0275fac=function(r){return new(r||n)(De(rb),De(Sr))}}static{this.\u0275cmp=Kr({type:n,selectors:[["app-login"]],decls:19,vars:6,consts:[[1,"login-container"],[1,"form-container"],[3,"ngSubmit"],["type","text","name","name","placeholder","Name","required","",3,"ngModelChange","ngModel"],["type","email","name","email","placeholder","Email","required","",3,"ngModelChange","ngModel"],["type","text","name","specialization","placeholder","Specialization","required","",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","Password","required","",3,"ngModelChange","ngModel"],["type","submit"],["type","email","name","loginEmail","placeholder","Email","required","",3,"ngModelChange","ngModel"],["type","password","name","loginPassword","placeholder","Password","required","",3,"ngModelChange","ngModel"]],template:function(r,i){r&1&&(oe(0,"div",0)(1,"div",1)(2,"h2"),me(3,"Register"),ue(),oe(4,"form",2),zt("ngSubmit",function(){return i.register()}),oe(5,"input",3),ws("ngModelChange",function(o){return Qo(i.name,o)||(i.name=o),o}),ue(),oe(6,"input",4),ws("ngModelChange",function(o){return Qo(i.email,o)||(i.email=o),o}),ue(),oe(7,"input",5),ws("ngModelChange",function(o){return Qo(i.specialization,o)||(i.specialization=o),o}),ue(),oe(8,"input",6),ws("ngModelChange",function(o){return Qo(i.password,o)||(i.password=o),o}),ue(),oe(9,"button",7),me(10,"Register"),ue()()(),oe(11,"div",1)(12,"h2"),me(13,"Login"),ue(),oe(14,"form",2),zt("ngSubmit",function(){return i.login()}),oe(15,"input",8),ws("ngModelChange",function(o){return Qo(i.loginEmail,o)||(i.loginEmail=o),o}),ue(),oe(16,"input",9),ws("ngModelChange",function(o){return Qo(i.loginPassword,o)||(i.loginPassword=o),o}),ue(),oe(17,"button",7),me(18,"Login"),ue()()()()),r&2&&(lt(5),vs("ngModel",i.name),lt(),vs("ngModel",i.email),lt(),vs("ngModel",i.specialization),lt(),vs("ngModel",i.password),lt(7),vs("ngModel",i.loginEmail),lt(),vs("ngModel",i.loginPassword))},dependencies:[uO,py,tO,nO,hb,db,lb],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:40px;padding:50px}.login-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:20px;border-radius:8px;box-shadow:0 4px 6px #0000001a}.login-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#00796b}.login-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.login-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:4px}.login-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;background-color:#00796b;color:#fff;border:none;border-radius:4px;cursor:pointer}.login-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00574b}"]})}}return n})();var dO=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},DH=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],u=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},hO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,u=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,f=s>>2,g=(s&3)<<4|u>>4,v=(u&15)<<2|d>>6,D=d&63;c||(D=64,o||(v=64)),r.push(t[f],t[g],t[v],t[D])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(dO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):DH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||u==null||d==null||g==null)throw new fb;let v=s<<2|u>>4;if(r.push(v),d!==64){let D=u<<4&240|d>>2;if(r.push(D),g!==64){let A=d<<6&192|g;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},fb=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},bH=function(n){let e=dO(n);return hO.encodeByteArray(e,!0)},pb=function(n){return bH(n).replace(/\./g,"")},CH=function(n){try{return hO.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function AH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var SH=()=>AH().__FIREBASE_DEFAULTS__,xH=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},RH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&CH(n[1]);return e&&JSON.parse(e)},MH=()=>{try{return SH()||xH()||RH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};function fO(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PH(){var n;let e=(n=MH())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pO(){return!PH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gb(){try{return typeof indexedDB=="object"}catch{return!1}}function gO(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var NH="FirebaseError",Zi=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=NH,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jh.prototype.create)}},jh=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?kH(s,r):"Error",u=`${this.serviceName}: ${o} (${i}).`;return new Zi(i,u,r)}};function kH(n,e){return n.replace(OH,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var OH=/\{\$([^}]+)}/g;var Oee=4*60*60*1e3;function mO(n){return n&&n._delegate?n._delegate:n}var Ks=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var VH=[],Ne=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Ne||{}),FH={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},LH=Ne.INFO,jH={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},BH=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=jH[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ic=class{constructor(e){this.name=e,this._logLevel=LH,this._logHandler=BH,this._userLogHandler=null,VH.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}};var yb=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($H(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function $H(n){let e=n.getComponent();return e?.type==="VERSION"}var _b="@firebase/app",yO="0.10.17";var es=new Ic("@firebase/app"),qH="@firebase/app-compat",zH="@firebase/analytics-compat",GH="@firebase/analytics",HH="@firebase/app-check-compat",WH="@firebase/app-check",KH="@firebase/auth",QH="@firebase/auth-compat",YH="@firebase/database",JH="@firebase/data-connect",XH="@firebase/database-compat",ZH="@firebase/functions",e6="@firebase/functions-compat",t6="@firebase/installations",n6="@firebase/installations-compat",r6="@firebase/messaging",i6="@firebase/messaging-compat",s6="@firebase/performance",o6="@firebase/performance-compat",a6="@firebase/remote-config",u6="@firebase/remote-config-compat",c6="@firebase/storage",l6="@firebase/storage-compat",d6="@firebase/firestore",h6="@firebase/vertexai",f6="@firebase/firestore-compat",p6="firebase",g6="11.1.0";var m6={[_b]:"fire-core",[qH]:"fire-core-compat",[GH]:"fire-analytics",[zH]:"fire-analytics-compat",[WH]:"fire-app-check",[HH]:"fire-app-check-compat",[KH]:"fire-auth",[QH]:"fire-auth-compat",[YH]:"fire-rtdb",[JH]:"fire-data-connect",[XH]:"fire-rtdb-compat",[ZH]:"fire-fn",[e6]:"fire-fn-compat",[t6]:"fire-iid",[n6]:"fire-iid-compat",[r6]:"fire-fcm",[i6]:"fire-fcm-compat",[s6]:"fire-perf",[o6]:"fire-perf-compat",[a6]:"fire-rc",[u6]:"fire-rc-compat",[c6]:"fire-gcs",[l6]:"fire-gcs-compat",[d6]:"fire-fst",[f6]:"fire-fst-compat",[h6]:"fire-vertex","fire-js":"fire-js",[p6]:"fire-js-all"};var y6=new Map,_6=new Map,_O=new Map;function vO(n,e){try{n.container.addComponent(e)}catch(t){es.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Bh(n){let e=n.name;if(_O.has(e))return es.debug(`There were multiple attempts to register component ${e}.`),!1;_O.set(e,n);for(let t of y6.values())vO(t,n);for(let t of _6.values())vO(t,n);return!0}var v6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ib=new jh("app","Firebase",v6);var TO=g6;function Ec(n,e,t){var r;let i=(r=m6[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),es.warn(u.join(" "));return}Bh(new Ks(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var w6="firebase-heartbeat-database",I6=1,Uh="firebase-heartbeat-store",mb=null;function DO(){return mb||(mb=kA(w6,I6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Uh)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ib.create("idb-open",{originalErrorMessage:n.message})})),mb}function E6(n){return S(this,null,function*(){try{let t=(yield DO()).transaction(Uh),r=yield t.objectStore(Uh).get(bO(n));return yield t.done,r}catch(e){if(e instanceof Zi)es.warn(e.message);else{let t=Ib.create("idb-get",{originalErrorMessage:e?.message});es.warn(t.message)}}})}function wO(n,e){return S(this,null,function*(){try{let r=(yield DO()).transaction(Uh,"readwrite");yield r.objectStore(Uh).put(e,bO(n)),yield r.done}catch(t){if(t instanceof Zi)es.warn(t.message);else{let r=Ib.create("idb-set",{originalErrorMessage:t?.message});es.warn(r.message)}}})}function bO(n){return`${n.name}!${n.options.appId}`}var T6=1024,D6=30*24*60*60*1e3,vb=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new wb(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return S(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=IO();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let u=new Date(o.date).valueOf();return Date.now()-u<=D6}),this._storage.overwrite(this._heartbeatsCache))}catch(r){es.warn(r)}})}getHeartbeatsHeader(){return S(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=IO(),{heartbeatsToSend:r,unsentEntries:i}=b6(this._heartbeatsCache.heartbeats),s=pb(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return es.warn(t),""}})}};function IO(){return new Date().toISOString().substring(0,10)}function b6(n,e=T6){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),EO(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),EO(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var wb=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return gb()?gO().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield E6(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return wO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return wO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function EO(n){return pb(JSON.stringify({version:2,heartbeats:n})).length}function C6(n){Bh(new Ks("platform-logger",e=>new yb(e),"PRIVATE")),Bh(new Ks("heartbeat",e=>new vb(e),"PRIVATE")),Ec(_b,yO,n),Ec(_b,yO,"esm2017"),Ec("fire-js","")}C6("");var CO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},AO={};var Qs,Eb;(function(){var n;function e(I,m){function _(){}_.prototype=m.prototype,I.D=m.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(w,E,b){for(var y=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)y[Nt-2]=arguments[Nt];return m.prototype[E].apply(w,y)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,m,_){_||(_=0);var w=Array(16);if(typeof m=="string")for(var E=0;16>E;++E)w[E]=m.charCodeAt(_++)|m.charCodeAt(_++)<<8|m.charCodeAt(_++)<<16|m.charCodeAt(_++)<<24;else for(E=0;16>E;++E)w[E]=m[_++]|m[_++]<<8|m[_++]<<16|m[_++]<<24;m=I.g[0],_=I.g[1],E=I.g[2];var b=I.g[3],y=m+(b^_&(E^b))+w[0]+3614090360&4294967295;m=_+(y<<7&4294967295|y>>>25),y=b+(E^m&(_^E))+w[1]+3905402710&4294967295,b=m+(y<<12&4294967295|y>>>20),y=E+(_^b&(m^_))+w[2]+606105819&4294967295,E=b+(y<<17&4294967295|y>>>15),y=_+(m^E&(b^m))+w[3]+3250441966&4294967295,_=E+(y<<22&4294967295|y>>>10),y=m+(b^_&(E^b))+w[4]+4118548399&4294967295,m=_+(y<<7&4294967295|y>>>25),y=b+(E^m&(_^E))+w[5]+1200080426&4294967295,b=m+(y<<12&4294967295|y>>>20),y=E+(_^b&(m^_))+w[6]+2821735955&4294967295,E=b+(y<<17&4294967295|y>>>15),y=_+(m^E&(b^m))+w[7]+4249261313&4294967295,_=E+(y<<22&4294967295|y>>>10),y=m+(b^_&(E^b))+w[8]+1770035416&4294967295,m=_+(y<<7&4294967295|y>>>25),y=b+(E^m&(_^E))+w[9]+2336552879&4294967295,b=m+(y<<12&4294967295|y>>>20),y=E+(_^b&(m^_))+w[10]+4294925233&4294967295,E=b+(y<<17&4294967295|y>>>15),y=_+(m^E&(b^m))+w[11]+2304563134&4294967295,_=E+(y<<22&4294967295|y>>>10),y=m+(b^_&(E^b))+w[12]+1804603682&4294967295,m=_+(y<<7&4294967295|y>>>25),y=b+(E^m&(_^E))+w[13]+4254626195&4294967295,b=m+(y<<12&4294967295|y>>>20),y=E+(_^b&(m^_))+w[14]+2792965006&4294967295,E=b+(y<<17&4294967295|y>>>15),y=_+(m^E&(b^m))+w[15]+1236535329&4294967295,_=E+(y<<22&4294967295|y>>>10),y=m+(E^b&(_^E))+w[1]+4129170786&4294967295,m=_+(y<<5&4294967295|y>>>27),y=b+(_^E&(m^_))+w[6]+3225465664&4294967295,b=m+(y<<9&4294967295|y>>>23),y=E+(m^_&(b^m))+w[11]+643717713&4294967295,E=b+(y<<14&4294967295|y>>>18),y=_+(b^m&(E^b))+w[0]+3921069994&4294967295,_=E+(y<<20&4294967295|y>>>12),y=m+(E^b&(_^E))+w[5]+3593408605&4294967295,m=_+(y<<5&4294967295|y>>>27),y=b+(_^E&(m^_))+w[10]+38016083&4294967295,b=m+(y<<9&4294967295|y>>>23),y=E+(m^_&(b^m))+w[15]+3634488961&4294967295,E=b+(y<<14&4294967295|y>>>18),y=_+(b^m&(E^b))+w[4]+3889429448&4294967295,_=E+(y<<20&4294967295|y>>>12),y=m+(E^b&(_^E))+w[9]+568446438&4294967295,m=_+(y<<5&4294967295|y>>>27),y=b+(_^E&(m^_))+w[14]+3275163606&4294967295,b=m+(y<<9&4294967295|y>>>23),y=E+(m^_&(b^m))+w[3]+4107603335&4294967295,E=b+(y<<14&4294967295|y>>>18),y=_+(b^m&(E^b))+w[8]+1163531501&4294967295,_=E+(y<<20&4294967295|y>>>12),y=m+(E^b&(_^E))+w[13]+2850285829&4294967295,m=_+(y<<5&4294967295|y>>>27),y=b+(_^E&(m^_))+w[2]+4243563512&4294967295,b=m+(y<<9&4294967295|y>>>23),y=E+(m^_&(b^m))+w[7]+1735328473&4294967295,E=b+(y<<14&4294967295|y>>>18),y=_+(b^m&(E^b))+w[12]+2368359562&4294967295,_=E+(y<<20&4294967295|y>>>12),y=m+(_^E^b)+w[5]+4294588738&4294967295,m=_+(y<<4&4294967295|y>>>28),y=b+(m^_^E)+w[8]+2272392833&4294967295,b=m+(y<<11&4294967295|y>>>21),y=E+(b^m^_)+w[11]+1839030562&4294967295,E=b+(y<<16&4294967295|y>>>16),y=_+(E^b^m)+w[14]+4259657740&4294967295,_=E+(y<<23&4294967295|y>>>9),y=m+(_^E^b)+w[1]+2763975236&4294967295,m=_+(y<<4&4294967295|y>>>28),y=b+(m^_^E)+w[4]+1272893353&4294967295,b=m+(y<<11&4294967295|y>>>21),y=E+(b^m^_)+w[7]+4139469664&4294967295,E=b+(y<<16&4294967295|y>>>16),y=_+(E^b^m)+w[10]+3200236656&4294967295,_=E+(y<<23&4294967295|y>>>9),y=m+(_^E^b)+w[13]+681279174&4294967295,m=_+(y<<4&4294967295|y>>>28),y=b+(m^_^E)+w[0]+3936430074&4294967295,b=m+(y<<11&4294967295|y>>>21),y=E+(b^m^_)+w[3]+3572445317&4294967295,E=b+(y<<16&4294967295|y>>>16),y=_+(E^b^m)+w[6]+76029189&4294967295,_=E+(y<<23&4294967295|y>>>9),y=m+(_^E^b)+w[9]+3654602809&4294967295,m=_+(y<<4&4294967295|y>>>28),y=b+(m^_^E)+w[12]+3873151461&4294967295,b=m+(y<<11&4294967295|y>>>21),y=E+(b^m^_)+w[15]+530742520&4294967295,E=b+(y<<16&4294967295|y>>>16),y=_+(E^b^m)+w[2]+3299628645&4294967295,_=E+(y<<23&4294967295|y>>>9),y=m+(E^(_|~b))+w[0]+4096336452&4294967295,m=_+(y<<6&4294967295|y>>>26),y=b+(_^(m|~E))+w[7]+1126891415&4294967295,b=m+(y<<10&4294967295|y>>>22),y=E+(m^(b|~_))+w[14]+2878612391&4294967295,E=b+(y<<15&4294967295|y>>>17),y=_+(b^(E|~m))+w[5]+4237533241&4294967295,_=E+(y<<21&4294967295|y>>>11),y=m+(E^(_|~b))+w[12]+1700485571&4294967295,m=_+(y<<6&4294967295|y>>>26),y=b+(_^(m|~E))+w[3]+2399980690&4294967295,b=m+(y<<10&4294967295|y>>>22),y=E+(m^(b|~_))+w[10]+4293915773&4294967295,E=b+(y<<15&4294967295|y>>>17),y=_+(b^(E|~m))+w[1]+2240044497&4294967295,_=E+(y<<21&4294967295|y>>>11),y=m+(E^(_|~b))+w[8]+1873313359&4294967295,m=_+(y<<6&4294967295|y>>>26),y=b+(_^(m|~E))+w[15]+4264355552&4294967295,b=m+(y<<10&4294967295|y>>>22),y=E+(m^(b|~_))+w[6]+2734768916&4294967295,E=b+(y<<15&4294967295|y>>>17),y=_+(b^(E|~m))+w[13]+1309151649&4294967295,_=E+(y<<21&4294967295|y>>>11),y=m+(E^(_|~b))+w[4]+4149444226&4294967295,m=_+(y<<6&4294967295|y>>>26),y=b+(_^(m|~E))+w[11]+3174756917&4294967295,b=m+(y<<10&4294967295|y>>>22),y=E+(m^(b|~_))+w[2]+718787259&4294967295,E=b+(y<<15&4294967295|y>>>17),y=_+(b^(E|~m))+w[9]+3951481745&4294967295,I.g[0]=I.g[0]+m&4294967295,I.g[1]=I.g[1]+(E+(y<<21&4294967295|y>>>11))&4294967295,I.g[2]=I.g[2]+E&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.u=function(I,m){m===void 0&&(m=I.length);for(var _=m-this.blockSize,w=this.B,E=this.h,b=0;b<m;){if(E==0)for(;b<=_;)i(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<m;)if(w[E++]=I.charCodeAt(b++),E==this.blockSize){i(this,w),E=0;break}}else for(;b<m;)if(w[E++]=I[b++],E==this.blockSize){i(this,w),E=0;break}}this.h=E,this.o+=m},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var m=1;m<I.length-8;++m)I[m]=0;var _=8*this.o;for(m=I.length-8;m<I.length;++m)I[m]=_&255,_/=256;for(this.u(I),I=Array(16),m=_=0;4>m;++m)for(var w=0;32>w;w+=8)I[_++]=this.g[m]>>>w&255;return I};function s(I,m){var _=u;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=m(I)}function o(I,m){this.h=m;for(var _=[],w=!0,E=I.length-1;0<=E;E--){var b=I[E]|0;w&&b==m||(_[E]=b,w=!1)}this.g=_}var u={};function c(I){return-128<=I&&128>I?s(I,function(m){return new o([m|0],0>m?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return g;if(0>I)return x(d(-I));for(var m=[],_=1,w=0;I>=_;w++)m[w]=I/_|0,_*=4294967296;return new o(m,0)}function f(I,m){if(I.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(I.charAt(0)=="-")return x(f(I.substring(1),m));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=d(Math.pow(m,8)),w=g,E=0;E<I.length;E+=8){var b=Math.min(8,I.length-E),y=parseInt(I.substring(E,E+b),m);8>b?(b=d(Math.pow(m,b)),w=w.j(b).add(d(y))):(w=w.j(_),w=w.add(d(y)))}return w}var g=c(0),v=c(1),D=c(16777216);n=o.prototype,n.m=function(){if(R(this))return-x(this).m();for(var I=0,m=1,_=0;_<this.g.length;_++){var w=this.i(_);I+=(0<=w?w:4294967296+w)*m,m*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(A(this))return"0";if(R(this))return"-"+x(this).toString(I);for(var m=d(Math.pow(I,6)),_=this,w="";;){var E=U(_,m).g;_=k(_,E.j(m));var b=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=E,A(_))return b+w;for(;6>b.length;)b="0"+b;w=b+w}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function A(I){if(I.h!=0)return!1;for(var m=0;m<I.g.length;m++)if(I.g[m]!=0)return!1;return!0}function R(I){return I.h==-1}n.l=function(I){return I=k(this,I),R(I)?-1:A(I)?0:1};function x(I){for(var m=I.g.length,_=[],w=0;w<m;w++)_[w]=~I.g[w];return new o(_,~I.h).add(v)}n.abs=function(){return R(this)?x(this):this},n.add=function(I){for(var m=Math.max(this.g.length,I.g.length),_=[],w=0,E=0;E<=m;E++){var b=w+(this.i(E)&65535)+(I.i(E)&65535),y=(b>>>16)+(this.i(E)>>>16)+(I.i(E)>>>16);w=y>>>16,b&=65535,y&=65535,_[E]=y<<16|b}return new o(_,_[_.length-1]&-2147483648?-1:0)};function k(I,m){return I.add(x(m))}n.j=function(I){if(A(this)||A(I))return g;if(R(this))return R(I)?x(this).j(x(I)):x(x(this).j(I));if(R(I))return x(this.j(x(I)));if(0>this.l(D)&&0>I.l(D))return d(this.m()*I.m());for(var m=this.g.length+I.g.length,_=[],w=0;w<2*m;w++)_[w]=0;for(w=0;w<this.g.length;w++)for(var E=0;E<I.g.length;E++){var b=this.i(w)>>>16,y=this.i(w)&65535,Nt=I.i(E)>>>16,rr=I.i(E)&65535;_[2*w+2*E]+=y*rr,j(_,2*w+2*E),_[2*w+2*E+1]+=b*rr,j(_,2*w+2*E+1),_[2*w+2*E+1]+=y*Nt,j(_,2*w+2*E+1),_[2*w+2*E+2]+=b*Nt,j(_,2*w+2*E+2)}for(w=0;w<m;w++)_[w]=_[2*w+1]<<16|_[2*w];for(w=m;w<2*m;w++)_[w]=0;return new o(_,0)};function j(I,m){for(;(I[m]&65535)!=I[m];)I[m+1]+=I[m]>>>16,I[m]&=65535,m++}function O(I,m){this.g=I,this.h=m}function U(I,m){if(A(m))throw Error("division by zero");if(A(I))return new O(g,g);if(R(I))return m=U(x(I),m),new O(x(m.g),x(m.h));if(R(m))return m=U(I,x(m)),new O(x(m.g),m.h);if(30<I.g.length){if(R(I)||R(m))throw Error("slowDivide_ only works with positive integers.");for(var _=v,w=m;0>=w.l(I);)_=X(_),w=X(w);var E=$(_,1),b=$(w,1);for(w=$(w,2),_=$(_,2);!A(w);){var y=b.add(w);0>=y.l(I)&&(E=E.add(_),b=y),w=$(w,1),_=$(_,1)}return m=k(I,E.j(m)),new O(E,m)}for(E=g;0<=I.l(m);){for(_=Math.max(1,Math.floor(I.m()/m.m())),w=Math.ceil(Math.log(_)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),b=d(_),y=b.j(m);R(y)||0<y.l(I);)_-=w,b=d(_),y=b.j(m);A(b)&&(b=v),E=E.add(b),I=k(I,y)}return new O(E,I)}n.A=function(I){return U(this,I).h},n.and=function(I){for(var m=Math.max(this.g.length,I.g.length),_=[],w=0;w<m;w++)_[w]=this.i(w)&I.i(w);return new o(_,this.h&I.h)},n.or=function(I){for(var m=Math.max(this.g.length,I.g.length),_=[],w=0;w<m;w++)_[w]=this.i(w)|I.i(w);return new o(_,this.h|I.h)},n.xor=function(I){for(var m=Math.max(this.g.length,I.g.length),_=[],w=0;w<m;w++)_[w]=this.i(w)^I.i(w);return new o(_,this.h^I.h)};function X(I){for(var m=I.g.length+1,_=[],w=0;w<m;w++)_[w]=I.i(w)<<1|I.i(w-1)>>>31;return new o(_,I.h)}function $(I,m){var _=m>>5;m%=32;for(var w=I.g.length-_,E=[],b=0;b<w;b++)E[b]=0<m?I.i(b+_)>>>m|I.i(b+_+1)<<32-m:I.i(b+_);return new o(E,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Eb=AO.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Qs=AO.Integer=o}).apply(typeof CO<"u"?CO:typeof self<"u"?self:typeof window<"u"?window:{});var my=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ts={};var Tb,A6,Tc,Db,$h,yy,bb,Cb,Ab;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,h){return a==Array.prototype||a==Object.prototype||(a[l]=h.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof my=="object"&&my];for(var l=0;l<a.length;++l){var h=a[l];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,l){if(l)e:{var h=r;a=a.split(".");for(var p=0;p<a.length-1;p++){var T=a[p];if(!(T in h))break e;h=h[T]}a=a[a.length-1],p=h[a],l=l(p),l!=p&&l!=null&&e(h,a,{configurable:!0,writable:!0,value:l})}}function s(a,l){a instanceof String&&(a+="");var h=0,p=!1,T={next:function(){if(!p&&h<a.length){var C=h++;return{value:l(C,a[C]),done:!1}}return p=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(a){return a||function(){return s(this,function(l,h){return h})}});var o=o||{},u=this||self;function c(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function d(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function f(a,l,h){return a.call.apply(a.bind,arguments)}function g(a,l,h){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,p),a.apply(l,T)}}return function(){return a.apply(l,arguments)}}function v(a,l,h){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,v.apply(null,arguments)}function D(a,l){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function A(a,l){function h(){}h.prototype=l.prototype,a.aa=l.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(p,T,C){for(var M=Array(arguments.length-2),re=2;re<arguments.length;re++)M[re-2]=arguments[re];return l.prototype[T].apply(p,M)}}function R(a){let l=a.length;if(0<l){let h=Array(l);for(let p=0;p<l;p++)h[p]=a[p];return h}return[]}function x(a,l){for(let h=1;h<arguments.length;h++){let p=arguments[h];if(c(p)){let T=a.length||0,C=p.length||0;a.length=T+C;for(let M=0;M<C;M++)a[T+M]=p[M]}else a.push(p)}}class k{constructor(l,h){this.i=l,this.j=h,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function j(a){return/^[\s\xa0]*$/.test(a)}function O(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function U(a){return U[" "](a),a}U[" "]=function(){};var X=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function $(a,l,h){for(let p in a)l.call(h,a[p],p,a)}function I(a,l){for(let h in a)l.call(void 0,a[h],h,a)}function m(a){let l={};for(let h in a)l[h]=a[h];return l}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,l){let h,p;for(let T=1;T<arguments.length;T++){p=arguments[T];for(h in p)a[h]=p[h];for(let C=0;C<_.length;C++)h=_[C],Object.prototype.hasOwnProperty.call(p,h)&&(a[h]=p[h])}}function E(a){var l=1;a=a.split(":");let h=[];for(;0<l&&a.length;)h.push(a.shift()),l--;return a.length&&h.push(a.join(":")),h}function b(a){u.setTimeout(()=>{throw a},0)}function y(){var a=Zs;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class Nt{constructor(){this.h=this.g=null}add(l,h){let p=rr.get();p.set(l,h),this.h?this.h.next=p:this.g=p,this.h=p}}var rr=new k(()=>new i_,a=>a.reset());class i_{constructor(){this.next=this.g=this.h=null}set(l,h){this.h=l,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let ir,sr=!1,Zs=new Nt,Wc=()=>{let a=u.Promise.resolve(void 0);ir=()=>{a.then(s_)}};var s_=()=>{for(var a;a=y();){try{a.h.call(a.g)}catch(h){b(h)}var l=rr;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}sr=!1};function Kt(){this.s=this.s,this.C=this.C}Kt.prototype.s=!1,Kt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Kt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Fe(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}Fe.prototype.h=function(){this.defaultPrevented=!0};var o_=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};u.addEventListener("test",h,l),u.removeEventListener("test",h,l)}catch{}return a}();function or(a,l){if(Fe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(X){e:{try{U(l.nodeName);var T=!0;break e}catch{}T=!1}T||(l=null)}}else h=="mouseover"?l=a.fromElement:h=="mouseout"&&(l=a.toElement);this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:a_[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&or.aa.h.call(this)}}A(or,Fe);var a_={2:"touch",3:"pen",4:"mouse"};or.prototype.h=function(){or.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ar="closure_listenable_"+(1e6*Math.random()|0),u_=0;function c_(a,l,h,p,T){this.listener=a,this.proxy=null,this.src=l,this.type=h,this.capture=!!p,this.ha=T,this.key=++u_,this.da=this.fa=!1}function fi(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function pi(a){this.src=a,this.g={},this.h=0}pi.prototype.add=function(a,l,h,p,T){var C=a.toString();a=this.g[C],a||(a=this.g[C]=[],this.h++);var M=to(a,l,p,T);return-1<M?(l=a[M],h||(l.fa=!1)):(l=new c_(l,this.src,C,!!p,T),l.fa=h,a.push(l)),l};function eo(a,l){var h=l.type;if(h in a.g){var p=a.g[h],T=Array.prototype.indexOf.call(p,l,void 0),C;(C=0<=T)&&Array.prototype.splice.call(p,T,1),C&&(fi(l),a.g[h].length==0&&(delete a.g[h],a.h--))}}function to(a,l,h,p){for(var T=0;T<a.length;++T){var C=a[T];if(!C.da&&C.listener==l&&C.capture==!!h&&C.ha==p)return T}return-1}var no="closure_lm_"+(1e6*Math.random()|0),ro={};function Kc(a,l,h,p,T){if(p&&p.once)return Yc(a,l,h,p,T);if(Array.isArray(l)){for(var C=0;C<l.length;C++)Kc(a,l[C],h,p,T);return null}return h=ao(h),a&&a[ar]?a.K(l,h,d(p)?!!p.capture:!!p,T):Qc(a,l,h,!1,p,T)}function Qc(a,l,h,p,T,C){if(!l)throw Error("Invalid event type");var M=d(T)?!!T.capture:!!T,re=so(a);if(re||(a[no]=re=new pi(a)),h=re.add(l,h,p,M,C),h.proxy)return h;if(p=l_(),h.proxy=p,p.src=a,p.listener=h,a.addEventListener)o_||(T=M),T===void 0&&(T=!1),a.addEventListener(l.toString(),p,T);else if(a.attachEvent)a.attachEvent(Xc(l.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function l_(){function a(h){return l.call(a.src,a.listener,h)}let l=d_;return a}function Yc(a,l,h,p,T){if(Array.isArray(l)){for(var C=0;C<l.length;C++)Yc(a,l[C],h,p,T);return null}return h=ao(h),a&&a[ar]?a.L(l,h,d(p)?!!p.capture:!!p,T):Qc(a,l,h,!0,p,T)}function Jc(a,l,h,p,T){if(Array.isArray(l))for(var C=0;C<l.length;C++)Jc(a,l[C],h,p,T);else p=d(p)?!!p.capture:!!p,h=ao(h),a&&a[ar]?(a=a.i,l=String(l).toString(),l in a.g&&(C=a.g[l],h=to(C,h,p,T),-1<h&&(fi(C[h]),Array.prototype.splice.call(C,h,1),C.length==0&&(delete a.g[l],a.h--)))):a&&(a=so(a))&&(l=a.g[l.toString()],a=-1,l&&(a=to(l,h,p,T)),(h=-1<a?l[a]:null)&&io(h))}function io(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[ar])eo(l.i,a);else{var h=a.type,p=a.proxy;l.removeEventListener?l.removeEventListener(h,p,a.capture):l.detachEvent?l.detachEvent(Xc(h),p):l.addListener&&l.removeListener&&l.removeListener(p),(h=so(l))?(eo(h,a),h.h==0&&(h.src=null,l[no]=null)):fi(a)}}}function Xc(a){return a in ro?ro[a]:ro[a]="on"+a}function d_(a,l){if(a.da)a=!0;else{l=new or(l,this);var h=a.listener,p=a.ha||a.src;a.fa&&io(a),a=h.call(p,l)}return a}function so(a){return a=a[no],a instanceof pi?a:null}var oo="__closure_events_fn_"+(1e9*Math.random()>>>0);function ao(a){return typeof a=="function"?a:(a[oo]||(a[oo]=function(l){return a.handleEvent(l)}),a[oo])}function Le(){Kt.call(this),this.i=new pi(this),this.M=this,this.F=null}A(Le,Kt),Le.prototype[ar]=!0,Le.prototype.removeEventListener=function(a,l,h,p){Jc(this,a,l,h,p)};function qe(a,l){var h,p=a.F;if(p)for(h=[];p;p=p.F)h.push(p);if(a=a.M,p=l.type||l,typeof l=="string")l=new Fe(l,a);else if(l instanceof Fe)l.target=l.target||a;else{var T=l;l=new Fe(p,a),w(l,T)}if(T=!0,h)for(var C=h.length-1;0<=C;C--){var M=l.g=h[C];T=gi(M,p,!0,l)&&T}if(M=l.g=a,T=gi(M,p,!0,l)&&T,T=gi(M,p,!1,l)&&T,h)for(C=0;C<h.length;C++)M=l.g=h[C],T=gi(M,p,!1,l)&&T}Le.prototype.N=function(){if(Le.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var h=a.g[l],p=0;p<h.length;p++)fi(h[p]);delete a.g[l],a.h--}}this.F=null},Le.prototype.K=function(a,l,h,p){return this.i.add(String(a),l,!1,h,p)},Le.prototype.L=function(a,l,h,p){return this.i.add(String(a),l,!0,h,p)};function gi(a,l,h,p){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var T=!0,C=0;C<l.length;++C){var M=l[C];if(M&&!M.da&&M.capture==h){var re=M.listener,Ae=M.ha||M.src;M.fa&&eo(a.i,M),T=re.call(Ae,p)!==!1&&T}}return T&&!p.defaultPrevented}function Zc(a,l,h){if(typeof a=="function")h&&(a=v(a,h));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:u.setTimeout(a,l||0)}function el(a){a.g=Zc(()=>{a.g=null,a.i&&(a.i=!1,el(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class h_ extends Kt{constructor(l,h){super(),this.m=l,this.l=h,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:el(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ur(a){Kt.call(this),this.h=a,this.g={}}A(ur,Kt);var tl=[];function nl(a){$(a.g,function(l,h){this.g.hasOwnProperty(h)&&io(l)},a),a.g={}}ur.prototype.N=function(){ur.aa.N.call(this),nl(this)},ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uo=u.JSON.stringify,f_=u.JSON.parse,p_=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function co(){}co.prototype.h=null;function rl(a){return a.h||(a.h=a.i())}function il(){}var cr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lo(){Fe.call(this,"d")}A(lo,Fe);function ho(){Fe.call(this,"c")}A(ho,Fe);var ln={},sl=null;function mi(){return sl=sl||new Le}ln.La="serverreachability";function ol(a){Fe.call(this,ln.La,a)}A(ol,Fe);function lr(a){let l=mi();qe(l,new ol(l))}ln.STAT_EVENT="statevent";function al(a,l){Fe.call(this,ln.STAT_EVENT,a),this.stat=l}A(al,Fe);function ze(a){let l=mi();qe(l,new al(l,a))}ln.Ma="timingevent";function ul(a,l){Fe.call(this,ln.Ma,a),this.size=l}A(ul,Fe);function dr(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},l)}function hr(){this.g=!0}hr.prototype.xa=function(){this.g=!1};function g_(a,l,h,p,T,C){a.info(function(){if(a.g)if(C)for(var M="",re=C.split("&"),Ae=0;Ae<re.length;Ae++){var J=re[Ae].split("=");if(1<J.length){var je=J[0];J=J[1];var Be=je.split("_");M=2<=Be.length&&Be[1]=="type"?M+(je+"="+J+"&"):M+(je+"=redacted&")}}else M=null;else M=C;return"XMLHTTP REQ ("+p+") [attempt "+T+"]: "+l+`
`+h+`
`+M})}function m_(a,l,h,p,T,C,M){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+T+"]: "+l+`
`+h+`
`+C+" "+M})}function Pn(a,l,h,p){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+__(a,h)+(p?" "+p:"")})}function y_(a,l){a.info(function(){return"TIMEOUT: "+l})}hr.prototype.info=function(){};function __(a,l){if(!a.g)return l;if(!l)return null;try{var h=JSON.parse(l);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var p=h[a];if(!(2>p.length)){var T=p[1];if(Array.isArray(T)&&!(1>T.length)){var C=T[0];if(C!="noop"&&C!="stop"&&C!="close")for(var M=1;M<T.length;M++)T[M]=""}}}}return uo(h)}catch{return l}}var yi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},cl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fo;function _i(){}A(_i,co),_i.prototype.g=function(){return new XMLHttpRequest},_i.prototype.i=function(){return{}},fo=new _i;function Qt(a,l,h,p){this.j=a,this.i=l,this.l=h,this.R=p||1,this.U=new ur(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ll}function ll(){this.i=null,this.g="",this.h=!1}var dl={},po={};function go(a,l,h){a.L=1,a.v=Ei(kt(l)),a.m=h,a.P=!0,hl(a,null)}function hl(a,l){a.F=Date.now(),vi(a),a.A=kt(a.v);var h=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),Cl(h.i,"t",p),a.C=0,h=a.j.J,a.h=new ll,a.g=zl(a.j,h?l:null,!a.m),0<a.O&&(a.M=new h_(v(a.Y,a,a.g),a.O)),l=a.U,h=a.g,p=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(tl[0]=T.toString()),T=tl);for(var C=0;C<T.length;C++){var M=Kc(h,T[C],p||l.handleEvent,!1,l.h||l);if(!M)break;l.g[M.key]=M}l=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),lr(),g_(a.i,a.u,a.A,a.l,a.R,a.m)}Qt.prototype.ca=function(a){a=a.target;let l=this.M;l&&Ot(a)==3?l.j():this.Y(a)},Qt.prototype.Y=function(a){try{if(a==this.g)e:{let Be=Ot(this.g);var l=this.g.Ba();let On=this.g.Z();if(!(3>Be)&&(Be!=3||this.g&&(this.h.h||this.g.oa()||Nl(this.g)))){this.J||Be!=4||l==7||(l==8||0>=On?lr(3):lr(2)),mo(this);var h=this.g.Z();this.X=h;t:if(fl(this)){var p=Nl(this.g);a="";var T=p.length,C=Ot(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dn(this),fr(this);var M="";break t}this.h.i=new u.TextDecoder}for(l=0;l<T;l++)this.h.h=!0,a+=this.h.i.decode(p[l],{stream:!(C&&l==T-1)});p.length=0,this.h.g+=a,this.C=0,M=this.h.g}else M=this.g.oa();if(this.o=h==200,m_(this.i,this.u,this.A,this.l,this.R,Be,h),this.o){if(this.T&&!this.K){t:{if(this.g){var re,Ae=this.g;if((re=Ae.g?Ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(re)){var J=re;break t}}J=null}if(h=J)Pn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yo(this,h);else{this.o=!1,this.s=3,ze(12),dn(this),fr(this);break e}}if(this.P){h=!0;let ut;for(;!this.J&&this.C<M.length;)if(ut=v_(this,M),ut==po){Be==4&&(this.s=4,ze(14),h=!1),Pn(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==dl){this.s=4,ze(15),Pn(this.i,this.l,M,"[Invalid Chunk]"),h=!1;break}else Pn(this.i,this.l,ut,null),yo(this,ut);if(fl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||M.length!=0||this.h.h||(this.s=1,ze(16),h=!1),this.o=this.o&&h,!h)Pn(this.i,this.l,M,"[Invalid Chunked Response]"),dn(this),fr(this);else if(0<M.length&&!this.W){this.W=!0;var je=this.j;je.g==this&&je.ba&&!je.M&&(je.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),To(je),je.M=!0,ze(11))}}else Pn(this.i,this.l,M,null),yo(this,M);Be==4&&dn(this),this.o&&!this.J&&(Be==4?Bl(this.j,this):(this.o=!1,vi(this)))}else V_(this.g),h==400&&0<M.indexOf("Unknown SID")?(this.s=3,ze(12)):(this.s=0,ze(13)),dn(this),fr(this)}}}catch{}finally{}};function fl(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function v_(a,l){var h=a.C,p=l.indexOf(`
`,h);return p==-1?po:(h=Number(l.substring(h,p)),isNaN(h)?dl:(p+=1,p+h>l.length?po:(l=l.slice(p,p+h),a.C=p+h,l)))}Qt.prototype.cancel=function(){this.J=!0,dn(this)};function vi(a){a.S=Date.now()+a.I,pl(a,a.I)}function pl(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=dr(v(a.ba,a),l)}function mo(a){a.B&&(u.clearTimeout(a.B),a.B=null)}Qt.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(y_(this.i,this.A),this.L!=2&&(lr(),ze(17)),dn(this),this.s=2,fr(this)):pl(this,this.S-a)};function fr(a){a.j.G==0||a.J||Bl(a.j,a)}function dn(a){mo(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,nl(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function yo(a,l){try{var h=a.j;if(h.G!=0&&(h.g==a||_o(h.h,a))){if(!a.K&&_o(h.h,a)&&h.G==3){try{var p=h.Da.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var T=p;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Ai(h),bi(h);else break e;Eo(h),ze(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=dr(v(h.Za,h),6e3));if(1>=yl(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else fn(h,11)}else if((a.K||h.g==a)&&Ai(h),!j(l))for(T=h.Da.g.parse(l),l=0;l<T.length;l++){let J=T[l];if(h.T=J[0],J=J[1],h.G==2)if(J[0]=="c"){h.K=J[1],h.ia=J[2];let je=J[3];je!=null&&(h.la=je,h.j.info("VER="+h.la));let Be=J[4];Be!=null&&(h.Aa=Be,h.j.info("SVER="+h.Aa));let On=J[5];On!=null&&typeof On=="number"&&0<On&&(p=1.5*On,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;let ut=a.g;if(ut){let xi=ut.g?ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xi){var C=p.h;C.g||xi.indexOf("spdy")==-1&&xi.indexOf("quic")==-1&&xi.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(vo(C,C.h),C.h=null))}if(p.D){let Do=ut.g?ut.g.getResponseHeader("X-HTTP-Session-Id"):null;Do&&(p.ya=Do,ae(p.I,p.D,Do))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var M=a;if(p.qa=ql(p,p.J?p.ia:null,p.W),M.K){_l(p.h,M);var re=M,Ae=p.L;Ae&&(re.I=Ae),re.B&&(mo(re),vi(re)),p.g=M}else Ll(p);0<h.i.length&&Ci(h)}else J[0]!="stop"&&J[0]!="close"||fn(h,7);else h.G==3&&(J[0]=="stop"||J[0]=="close"?J[0]=="stop"?fn(h,7):Io(h):J[0]!="noop"&&h.l&&h.l.ta(J),h.v=0)}}lr(4)}catch{}}var w_=class{constructor(a,l){this.g=a,this.map=l}};function gl(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ml(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function yl(a){return a.h?1:a.g?a.g.size:0}function _o(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function vo(a,l){a.g?a.g.add(l):a.h=l}function _l(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}gl.prototype.cancel=function(){if(this.i=vl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function vl(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let h of a.g.values())l=l.concat(h.D);return l}return R(a.i)}function I_(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var l=[],h=a.length,p=0;p<h;p++)l.push(a[p]);return l}l=[],h=0;for(p in a)l[h++]=a[p];return l}function E_(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var l=[];a=a.length;for(var h=0;h<a;h++)l.push(h);return l}l=[],h=0;for(let p in a)l[h++]=p;return l}}}function wl(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var h=E_(a),p=I_(a),T=p.length,C=0;C<T;C++)l.call(void 0,p[C],h&&h[C],a)}var Il=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function T_(a,l){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var p=a[h].indexOf("="),T=null;if(0<=p){var C=a[h].substring(0,p);T=a[h].substring(p+1)}else C=a[h];l(C,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function hn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof hn){this.h=a.h,wi(this,a.j),this.o=a.o,this.g=a.g,Ii(this,a.s),this.l=a.l;var l=a.i,h=new mr;h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),El(this,h),this.m=a.m}else a&&(l=String(a).match(Il))?(this.h=!1,wi(this,l[1]||"",!0),this.o=pr(l[2]||""),this.g=pr(l[3]||"",!0),Ii(this,l[4]),this.l=pr(l[5]||"",!0),El(this,l[6]||"",!0),this.m=pr(l[7]||"")):(this.h=!1,this.i=new mr(null,this.h))}hn.prototype.toString=function(){var a=[],l=this.j;l&&a.push(gr(l,Tl,!0),":");var h=this.g;return(h||l=="file")&&(a.push("//"),(l=this.o)&&a.push(gr(l,Tl,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(gr(h,h.charAt(0)=="/"?C_:b_,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",gr(h,S_)),a.join("")};function kt(a){return new hn(a)}function wi(a,l,h){a.j=h?pr(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function Ii(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function El(a,l,h){l instanceof mr?(a.i=l,x_(a.i,a.h)):(h||(l=gr(l,A_)),a.i=new mr(l,a.h))}function ae(a,l,h){a.i.set(l,h)}function Ei(a){return ae(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function pr(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function gr(a,l,h){return typeof a=="string"?(a=encodeURI(a).replace(l,D_),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function D_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Tl=/[#\/\?@]/g,b_=/[#\?:]/g,C_=/[#\?]/g,A_=/[#\?@]/g,S_=/#/g;function mr(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function Yt(a){a.g||(a.g=new Map,a.h=0,a.i&&T_(a.i,function(l,h){a.add(decodeURIComponent(l.replace(/\+/g," ")),h)}))}n=mr.prototype,n.add=function(a,l){Yt(this),this.i=null,a=Nn(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(l),this.h+=1,this};function Dl(a,l){Yt(a),l=Nn(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function bl(a,l){return Yt(a),l=Nn(a,l),a.g.has(l)}n.forEach=function(a,l){Yt(this),this.g.forEach(function(h,p){h.forEach(function(T){a.call(l,T,p,this)},this)},this)},n.na=function(){Yt(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),h=[];for(let p=0;p<l.length;p++){let T=a[p];for(let C=0;C<T.length;C++)h.push(l[p])}return h},n.V=function(a){Yt(this);let l=[];if(typeof a=="string")bl(this,a)&&(l=l.concat(this.g.get(Nn(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)l=l.concat(a[h])}return l},n.set=function(a,l){return Yt(this),this.i=null,a=Nn(this,a),bl(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},n.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function Cl(a,l,h){Dl(a,l),0<h.length&&(a.i=null,a.g.set(Nn(a,l),R(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var h=0;h<l.length;h++){var p=l[h];let C=encodeURIComponent(String(p)),M=this.V(p);for(p=0;p<M.length;p++){var T=C;M[p]!==""&&(T+="="+encodeURIComponent(String(M[p]))),a.push(T)}}return this.i=a.join("&")};function Nn(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function x_(a,l){l&&!a.j&&(Yt(a),a.i=null,a.g.forEach(function(h,p){var T=p.toLowerCase();p!=T&&(Dl(this,p),Cl(this,T,h))},a)),a.j=l}function R_(a,l){let h=new hr;if(u.Image){let p=new Image;p.onload=D(Jt,h,"TestLoadImage: loaded",!0,l,p),p.onerror=D(Jt,h,"TestLoadImage: error",!1,l,p),p.onabort=D(Jt,h,"TestLoadImage: abort",!1,l,p),p.ontimeout=D(Jt,h,"TestLoadImage: timeout",!1,l,p),u.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else l(!1)}function M_(a,l){let h=new hr,p=new AbortController,T=setTimeout(()=>{p.abort(),Jt(h,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:p.signal}).then(C=>{clearTimeout(T),C.ok?Jt(h,"TestPingServer: ok",!0,l):Jt(h,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(T),Jt(h,"TestPingServer: error",!1,l)})}function Jt(a,l,h,p,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),p(h)}catch{}}function P_(){this.g=new p_}function N_(a,l,h){let p=h||"";try{wl(a,function(T,C){let M=T;d(T)&&(M=uo(T)),l.push(p+C+"="+encodeURIComponent(M))})}catch(T){throw l.push(p+"type="+encodeURIComponent("_badmap")),T}}function yr(a){this.l=a.Ub||null,this.j=a.eb||!1}A(yr,co),yr.prototype.g=function(){return new Ti(this.l,this.j)},yr.prototype.i=function(a){return function(){return a}}({});function Ti(a,l){Le.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Ti,Le),n=Ti.prototype,n.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,vr(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||u).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_r(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,vr(this)),this.g&&(this.readyState=3,vr(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Al(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Al(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?_r(this):vr(this),this.readyState==3&&Al(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,_r(this))},n.Qa=function(a){this.g&&(this.response=a,_r(this))},n.ga=function(){this.g&&_r(this)};function _r(a){a.readyState=4,a.l=null,a.j=null,a.v=null,vr(a)}n.setRequestHeader=function(a,l){this.u.append(a,l)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var h=l.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=l.next();return a.join(`\r
`)};function vr(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ti.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Sl(a){let l="";return $(a,function(h,p){l+=p,l+=":",l+=h,l+=`\r
`}),l}function wo(a,l,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=Sl(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):ae(a,l,h))}function he(a){Le.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(he,Le);var k_=/^https?$/i,O_=["POST","PUT"];n=he.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,l,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fo.g(),this.v=this.o?rl(this.o):rl(fo),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(C){xl(this,C);return}if(a=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var T in p)h.set(T,p[T]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let C of p.keys())h.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),T=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(O_,l,void 0))||p||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,M]of h)this.g.setRequestHeader(C,M);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pl(this),this.u=!0,this.g.send(a),this.u=!1}catch(C){xl(this,C)}};function xl(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,Rl(a),Di(a)}function Rl(a){a.A||(a.A=!0,qe(a,"complete"),qe(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,qe(this,"complete"),qe(this,"abort"),Di(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Di(this,!0)),he.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ml(this):this.bb())},n.bb=function(){Ml(this)};function Ml(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Ot(a)!=4||a.Z()!=2)){if(a.u&&Ot(a)==4)Zc(a.Ea,0,a);else if(qe(a,"readystatechange"),Ot(a)==4){a.h=!1;try{let M=a.Z();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var h;if(!(h=l)){var p;if(p=M===0){var T=String(a.D).match(Il)[1]||null;!T&&u.self&&u.self.location&&(T=u.self.location.protocol.slice(0,-1)),p=!k_.test(T?T.toLowerCase():"")}h=p}if(h)qe(a,"complete"),qe(a,"success");else{a.m=6;try{var C=2<Ot(a)?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.Z()+"]",Rl(a)}}finally{Di(a)}}}}function Di(a,l){if(a.g){Pl(a);let h=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||qe(a,"ready");try{h.onreadystatechange=p}catch{}}}function Pl(a){a.I&&(u.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Ot(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Ot(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),f_(l)}};function Nl(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function V_(a){let l={};a=(a.g&&2<=Ot(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(j(a[p]))continue;var h=E(a[p]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let C=l[T]||[];l[T]=C,C.push(h)}I(l,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(a,l,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||l}function kl(a){this.Aa=0,this.i=[],this.j=new hr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wr("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wr("baseRetryDelayMs",5e3,a),this.cb=wr("retryDelaySeedMs",1e4,a),this.Wa=wr("forwardChannelMaxRetries",2,a),this.wa=wr("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new gl(a&&a.concurrentRequestLimit),this.Da=new P_,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=kl.prototype,n.la=8,n.G=1,n.connect=function(a,l,h,p){ze(0),this.W=a,this.H=l||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=ql(this,null,this.W),Ci(this)};function Io(a){if(Ol(a),a.G==3){var l=a.U++,h=kt(a.I);if(ae(h,"SID",a.K),ae(h,"RID",l),ae(h,"TYPE","terminate"),Ir(a,h),l=new Qt(a,a.j,l),l.L=2,l.v=Ei(kt(h)),h=!1,u.navigator&&u.navigator.sendBeacon)try{h=u.navigator.sendBeacon(l.v.toString(),"")}catch{}!h&&u.Image&&(new Image().src=l.v,h=!0),h||(l.g=zl(l.j,null),l.g.ea(l.v)),l.F=Date.now(),vi(l)}$l(a)}function bi(a){a.g&&(To(a),a.g.cancel(),a.g=null)}function Ol(a){bi(a),a.u&&(u.clearTimeout(a.u),a.u=null),Ai(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function Ci(a){if(!ml(a.h)&&!a.s){a.s=!0;var l=a.Ga;ir||Wc(),sr||(ir(),sr=!0),Zs.add(l,a),a.B=0}}function F_(a,l){return yl(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=dr(v(a.Ga,a,l),Ul(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new Qt(this,this.j,a),C=this.o;if(this.S&&(C?(C=m(C),w(C,this.S)):C=this.S),this.m!==null||this.O||(T.H=C,C=null),this.P)e:{for(var l=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,4096<l){l=h;break e}if(l===4096||h===this.i.length-1){l=h+1;break e}}l=1e3}else l=1e3;l=Fl(this,T,l),h=kt(this.I),ae(h,"RID",a),ae(h,"CVER",22),this.D&&ae(h,"X-HTTP-Session-Id",this.D),Ir(this,h),C&&(this.O?l="headers="+encodeURIComponent(String(Sl(C)))+"&"+l:this.m&&wo(h,this.m,C)),vo(this.h,T),this.Ua&&ae(h,"TYPE","init"),this.P?(ae(h,"$req",l),ae(h,"SID","null"),T.T=!0,go(T,h,null)):go(T,h,l),this.G=2}}else this.G==3&&(a?Vl(this,a):this.i.length==0||ml(this.h)||Vl(this))};function Vl(a,l){var h;l?h=l.l:h=a.U++;let p=kt(a.I);ae(p,"SID",a.K),ae(p,"RID",h),ae(p,"AID",a.T),Ir(a,p),a.m&&a.o&&wo(p,a.m,a.o),h=new Qt(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),l&&(a.i=l.D.concat(a.i)),l=Fl(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),vo(a.h,h),go(h,p,l)}function Ir(a,l){a.H&&$(a.H,function(h,p){ae(l,p,h)}),a.l&&wl({},function(h,p){ae(l,p,h)})}function Fl(a,l,h){h=Math.min(a.i.length,h);var p=a.l?v(a.l.Na,a.l,a):null;e:{var T=a.i;let C=-1;for(;;){let M=["count="+h];C==-1?0<h?(C=T[0].g,M.push("ofs="+C)):C=0:M.push("ofs="+C);let re=!0;for(let Ae=0;Ae<h;Ae++){let J=T[Ae].g,je=T[Ae].map;if(J-=C,0>J)C=Math.max(0,T[Ae].g-100),re=!1;else try{N_(je,M,"req"+J+"_")}catch{p&&p(je)}}if(re){p=M.join("&");break e}}}return a=a.i.splice(0,h),l.D=a,p}function Ll(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;ir||Wc(),sr||(ir(),sr=!0),Zs.add(l,a),a.v=0}}function Eo(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=dr(v(a.Fa,a),Ul(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,jl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=dr(v(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ze(10),bi(this),jl(this))};function To(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function jl(a){a.g=new Qt(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=kt(a.qa);ae(l,"RID","rpc"),ae(l,"SID",a.K),ae(l,"AID",a.T),ae(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&ae(l,"TO",a.ja),ae(l,"TYPE","xmlhttp"),Ir(a,l),a.m&&a.o&&wo(l,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Ei(kt(l)),h.m=null,h.P=!0,hl(h,a)}n.Za=function(){this.C!=null&&(this.C=null,bi(this),Eo(this),ze(19))};function Ai(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function Bl(a,l){var h=null;if(a.g==l){Ai(a),To(a),a.g=null;var p=2}else if(_o(a.h,l))h=l.D,_l(a.h,l),p=1;else return;if(a.G!=0){if(l.o)if(p==1){h=l.m?l.m.length:0,l=Date.now()-l.F;var T=a.B;p=mi(),qe(p,new ul(p,h)),Ci(a)}else Ll(a);else if(T=l.s,T==3||T==0&&0<l.X||!(p==1&&F_(a,l)||p==2&&Eo(a)))switch(h&&0<h.length&&(l=a.h,l.i=l.i.concat(h)),T){case 1:fn(a,5);break;case 4:fn(a,10);break;case 3:fn(a,6);break;default:fn(a,2)}}}function Ul(a,l){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*l}function fn(a,l){if(a.j.info("Error code "+l),l==2){var h=v(a.fb,a),p=a.Xa;let T=!p;p=new hn(p||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||wi(p,"https"),Ei(p),T?R_(p.toString(),h):M_(p.toString(),h)}else ze(2);a.G=0,a.l&&a.l.sa(l),$l(a),Ol(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ze(2)):(this.j.info("Failed to ping google.com"),ze(1))};function $l(a){if(a.G=0,a.ka=[],a.l){let l=vl(a.h);(l.length!=0||a.i.length!=0)&&(x(a.ka,l),x(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function ql(a,l,h){var p=h instanceof hn?kt(h):new hn(h);if(p.g!="")l&&(p.g=l+"."+p.g),Ii(p,p.s);else{var T=u.location;p=T.protocol,l=l?l+"."+T.hostname:T.hostname,T=+T.port;var C=new hn(null);p&&wi(C,p),l&&(C.g=l),T&&Ii(C,T),h&&(C.l=h),p=C}return h=a.D,l=a.ya,h&&l&&ae(p,h,l),ae(p,"VER",a.la),Ir(a,p),p}function zl(a,l,h){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new he(new yr({eb:h})):new he(a.pa),l.Ha(a.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gl(){}n=Gl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Si(){}Si.prototype.g=function(a,l){return new Je(a,l)};function Je(a,l){Le.call(this),this.g=new kl(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!j(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!j(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new kn(this)}A(Je,Le),Je.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Je.prototype.close=function(){Io(this.g)},Je.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=uo(a),a=h);l.i.push(new w_(l.Ya++,a)),l.G==3&&Ci(l)},Je.prototype.N=function(){this.g.l=null,delete this.j,Io(this.g),delete this.g,Je.aa.N.call(this)};function Hl(a){lo.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let h in l){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}A(Hl,lo);function Wl(){ho.call(this),this.status=1}A(Wl,ho);function kn(a){this.g=a}A(kn,Gl),kn.prototype.ua=function(){qe(this.g,"a")},kn.prototype.ta=function(a){qe(this.g,new Hl(a))},kn.prototype.sa=function(a){qe(this.g,new Wl)},kn.prototype.ra=function(){qe(this.g,"b")},Si.prototype.createWebChannel=Si.prototype.g,Je.prototype.send=Je.prototype.o,Je.prototype.open=Je.prototype.m,Je.prototype.close=Je.prototype.close,Ab=ts.createWebChannelTransport=function(){return new Si},Cb=ts.getStatEventTarget=function(){return mi()},bb=ts.Event=ln,yy=ts.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yi.NO_ERROR=0,yi.TIMEOUT=8,yi.HTTP_ERROR=6,$h=ts.ErrorCode=yi,cl.COMPLETE="complete",Db=ts.EventType=cl,il.EventType=cr,cr.OPEN="a",cr.CLOSE="b",cr.ERROR="c",cr.MESSAGE="d",Le.prototype.listen=Le.prototype.K,Tc=ts.WebChannel=il,A6=ts.FetchXmlHttpFactory=yr,he.prototype.listenOnce=he.prototype.L,he.prototype.getLastError=he.prototype.Ka,he.prototype.getLastErrorCode=he.prototype.Ba,he.prototype.getStatus=he.prototype.Z,he.prototype.getResponseJson=he.prototype.Oa,he.prototype.getResponseText=he.prototype.oa,he.prototype.send=he.prototype.ea,he.prototype.setWithCredentials=he.prototype.Ha,Tb=ts.XhrIo=he}).apply(typeof my<"u"?my:typeof self<"u"?self:typeof window<"u"?window:{});var SO="@firebase/firestore";var un=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");var zc="11.0.2";var ka=new Ic("@firebase/firestore");function Dc(){return ka.logLevel}function Q(n,...e){if(ka.logLevel<=Ne.DEBUG){let t=e.map(hA);ka.debug(`Firestore (${zc}): ${n}`,...t)}}function rs(n,...e){if(ka.logLevel<=Ne.ERROR){let t=e.map(hA);ka.error(`Firestore (${zc}): ${n}`,...t)}}function Qh(n,...e){if(ka.logLevel<=Ne.WARN){let t=e.map(hA);ka.warn(`Firestore (${zc}): ${n}`,...t)}}function hA(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ge(n="Unexpected state"){let e=`FIRESTORE (${zc}) INTERNAL ASSERTION FAILED: `+n;throw rs(e),new Error(e)}function ft(n,e){n||ge()}function Ve(n,e){return n}var H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ce=class extends Zi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ys=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var kb=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ob=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(un.UNAUTHENTICATED))}shutdown(){}};var Vb=class{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Ys;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ys,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>S(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},u=c=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?u(c):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ys)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string"),new kb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string"),new un(e)}},Fb=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},Lb=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Fb(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(un.FIRST_PARTY))}shutdown(){}invalidateToken(){}},jb=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Bb=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ft(this.o===void 0);let r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ft(typeof t.token=="string"),this.R=t.token,new jb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function S6(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Ub=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=S6(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function Oe(n,e){return n<e?-1:n>e?1:0}function Pc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var nr=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ce(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var _e=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new nr(0,0))}static max(){return new n(new nr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ty=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ge(),r===void 0?r=e.length-t:r>e.length-t&&ge(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ht=class n extends Ty{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ce(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},x6=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Or=class n extends Ty{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return x6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new ce(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let u=e[i];if(u==="\\"){if(i+1===e.length)throw new ce(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ce(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(o=!o,i++):u!=="."||o?(r+=u,i++):(s(),i++)}if(s(),o)throw new ce(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var de=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ht.fromString(e))}static fromName(e){return new n(Ht.fromString(e).popFirst(5))}static empty(){return new n(Ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ht(e.slice()))}};var $b=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};$b.UNKNOWN_ID=-1;function R6(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=_e.fromTimestamp(r===1e9?new nr(t+1,0):new nr(t,r));return new Oa(i,de.empty(),e)}function M6(n){return new Oa(n.readTime,n.key,-1)}var Oa=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(_e.min(),de.empty(),-1)}static max(){return new n(_e.max(),de.empty(),-1)}};function P6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=de.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}var N6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",qb=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Yy(n){return S(this,null,function*(){if(n.code!==H.FAILED_PRECONDITION||n.message!==N6)throw n;Q("LocalStore","Unexpectedly lost primary lease")})}var L=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(u=>{++i,u.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),u=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(f=>{o[d]=f,++u,u===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function k6(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Gc(n){return n.name==="IndexedDbTransactionError"}var fA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Jy(n){return n==null}function Dy(n){return n===0&&1/n==-1/0}function O6(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xO(e)),e=V6(n.get(t),e);return xO(e)}function V6(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function xO(n){return n+""}var F6=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],mte=[...F6,"documentOverlays"],L6=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],j6=L6,B6=[...j6,"indexConfiguration","indexState","indexEntries"];var yte=[...B6,"globals"];function RO(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function uf(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function U6(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Tt=class n{constructor(e,t){this.comparator=e,this.root=t||ci.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sc(this.root,e,this.comparator,!0)}},Sc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ci=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();let e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}};ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1;ci.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,t,r,i,s){return this}insert(e,t,r){return new ci(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Wt=class n{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new by(this.data.getIterator())}getIteratorFrom(e){return new by(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},by=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ra=class n{constructor(e){this.fields=e,e.sort(Or.comparator)}static empty(){return new n([])}unionWith(e){let t=new Wt(Or.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Cy=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var cn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Cy("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};cn.EMPTY_BYTE_STRING=new cn("");var $6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(n){if(ft(!!n),typeof n=="string"){let e=0,t=$6.exec(n);if(ft(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:at(n.seconds),nanos:at(n.nanos)}}function at(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ss(n){return typeof n=="string"?cn.fromBase64String(n):cn.fromUint8Array(n)}function pA(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Xy(n){let e=n.mapValue.fields.__previous_value__;return pA(e)?Xy(e):e}function Yh(n){let e=is(n.mapValue.fields.__local_write_time__.timestampValue);return new nr(e.seconds,e.nanos)}var zb=class{constructor(e,t,r,i,s,o,u,c,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d}},Ay=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var _y={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Js(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?pA(n)?4:cV(n)?9007199254740991:uV(n)?10:11:ge()}function di(n,e){if(n===e)return!0;let t=Js(n);if(t!==Js(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Yh(n).isEqual(Yh(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=is(i.timestampValue),u=is(s.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ss(i.bytesValue).isEqual(ss(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return at(i.geoPointValue.latitude)===at(s.geoPointValue.latitude)&&at(i.geoPointValue.longitude)===at(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return at(i.integerValue)===at(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=at(i.doubleValue),u=at(s.doubleValue);return o===u?Dy(o)===Dy(u):isNaN(o)&&isNaN(u)}return!1}(n,e);case 9:return Pc(n.arrayValue.values||[],e.arrayValue.values||[],di);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},u=s.mapValue.fields||{};if(RO(o)!==RO(u))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!di(o[c],u[c])))return!1;return!0}(n,e);default:return ge()}}function Jh(n,e){return(n.values||[]).find(t=>di(t,e))!==void 0}function Nc(n,e){if(n===e)return 0;let t=Js(n),r=Js(e);if(t!==r)return Oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return function(s,o){let u=at(s.integerValue||s.doubleValue),c=at(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(n,e);case 3:return MO(n.timestampValue,e.timestampValue);case 4:return MO(Yh(n),Yh(e));case 5:return Oe(n.stringValue,e.stringValue);case 6:return function(s,o){let u=ss(s),c=ss(o);return u.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let u=s.split("/"),c=o.split("/");for(let d=0;d<u.length&&d<c.length;d++){let f=Oe(u[d],c[d]);if(f!==0)return f}return Oe(u.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let u=Oe(at(s.latitude),at(o.latitude));return u!==0?u:Oe(at(s.longitude),at(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return PO(n.arrayValue,e.arrayValue);case 10:return function(s,o){var u,c,d,f;let g=s.fields||{},v=o.fields||{},D=(u=g.value)===null||u===void 0?void 0:u.arrayValue,A=(c=v.value)===null||c===void 0?void 0:c.arrayValue,R=Oe(((d=D?.values)===null||d===void 0?void 0:d.length)||0,((f=A?.values)===null||f===void 0?void 0:f.length)||0);return R!==0?R:PO(D,A)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===_y.mapValue&&o===_y.mapValue)return 0;if(s===_y.mapValue)return 1;if(o===_y.mapValue)return-1;let u=s.fields||{},c=Object.keys(u),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let g=0;g<c.length&&g<f.length;++g){let v=Oe(c[g],f[g]);if(v!==0)return v;let D=Nc(u[c[g]],d[f[g]]);if(D!==0)return D}return Oe(c.length,f.length)}(n.mapValue,e.mapValue);default:throw ge()}}function MO(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);let t=is(n),r=is(e),i=Oe(t.seconds,r.seconds);return i!==0?i:Oe(t.nanos,r.nanos)}function PO(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Nc(t[i],r[i]);if(s)return s}return Oe(t.length,r.length)}function kc(n){return Gb(n)}function Gb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=is(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ss(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return de.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Gb(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Gb(t.fields[o])}`;return i+"}"}(n.mapValue):ge()}function Iy(n){switch(Js(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Xy(n);return e?16+Iy(e):16;case 5:return 2*n.stringValue.length;case 6:return ss(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Iy(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return uf(r.fields,(s,o)=>{i+=s.length+Iy(o)}),i}(n.mapValue);default:throw ge()}}function Hb(n){return!!n&&"integerValue"in n}function gA(n){return!!n&&"arrayValue"in n}function NO(n){return!!n&&"nullValue"in n}function kO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sb(n){return!!n&&"mapValue"in n}function uV(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function zh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return uf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=zh(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function cV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var ns=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zh(t)}setAll(e){let t=Or.emptyPath(),r={},i=[];e.forEach((o,u)=>{if(!t.isImmediateParentOf(u)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=u.popLast()}o?r[u.lastSegment()]=zh(o):i.push(u.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Sb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return di(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Sb(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){uf(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(zh(this.value))}};var Vr=class n{constructor(e,t,r,i,s,o,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=u}static newInvalidDocument(e){return new n(e,0,_e.min(),_e.min(),_e.min(),ns.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,_e.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,_e.min(),_e.min(),ns.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,_e.min(),_e.min(),ns.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ns.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ns.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Oc=class{constructor(e,t){this.position=e,this.inclusive=t}};function OO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=de.comparator(de.fromName(o.referenceValue),t.key):r=Nc(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function VO(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!di(n.position[t],e.position[t]))return!1;return!0}var Vc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function q6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Sy=class{},$t=class n extends Sy{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Kb(e,t,r):t==="array-contains"?new Jb(e,r):t==="in"?new Xb(e,r):t==="not-in"?new Zb(e,r):t==="array-contains-any"?new eC(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Qb(e,r):new Yb(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Nc(t,this.value)):t!==null&&Js(this.value)===Js(t)&&this.matchesComparison(Nc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},hi=class n extends Sy{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return lV(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function lV(n){return n.op==="and"}function dV(n){return z6(n)&&lV(n)}function z6(n){for(let e of n.filters)if(e instanceof hi)return!1;return!0}function Wb(n){if(n instanceof $t)return n.field.canonicalString()+n.op.toString()+kc(n.value);if(dV(n))return n.filters.map(e=>Wb(e)).join(",");{let e=n.filters.map(t=>Wb(t)).join(",");return`${n.op}(${e})`}}function hV(n,e){return n instanceof $t?function(r,i){return i instanceof $t&&r.op===i.op&&r.field.isEqual(i.field)&&di(r.value,i.value)}(n,e):n instanceof hi?function(r,i){return i instanceof hi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,u)=>s&&hV(o,i.filters[u]),!0):!1}(n,e):void ge()}function fV(n){return n instanceof $t?function(t){return`${t.field.canonicalString()} ${t.op} ${kc(t.value)}`}(n):n instanceof hi?function(t){return t.op.toString()+" {"+t.getFilters().map(fV).join(" ,")+"}"}(n):"Filter"}var Kb=class extends $t{constructor(e,t,r){super(e,t,r),this.key=de.fromName(r.referenceValue)}matches(e){let t=de.comparator(e.key,this.key);return this.matchesComparison(t)}},Qb=class extends $t{constructor(e,t){super(e,"in",t),this.keys=pV("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Yb=class extends $t{constructor(e,t){super(e,"not-in",t),this.keys=pV("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function pV(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>de.fromName(r.referenceValue))}var Jb=class extends $t{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return gA(t)&&Jh(t.arrayValue,this.value)}},Xb=class extends $t{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Jh(this.value.arrayValue,t)}},Zb=class extends $t{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Jh(this.value.arrayValue,t)}},eC=class extends $t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!gA(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Jh(this.value.arrayValue,r))}};var tC=class{constructor(e,t=null,r=[],i=[],s=null,o=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=u,this.ue=null}};function FO(n,e=null,t=[],r=[],i=null,s=null,o=null){return new tC(n,e,t,r,i,s,o)}function mA(n){let e=Ve(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Wb(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Jy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>kc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>kc(r)).join(",")),e.ue=t}return e.ue}function yA(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!q6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!hV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VO(n.startAt,e.startAt)&&VO(n.endAt,e.endAt)}function nC(n){return de.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Fc=class{constructor(e,t=null,r=[],i=[],s=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function G6(n,e,t,r,i,s,o,u){return new Fc(n,e,t,r,i,s,o,u)}function _A(n){return new Fc(n)}function LO(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function H6(n){return n.collectionGroup!==null}function Gh(n){let e=Ve(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Wt(Or.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Vc(s,r))}),t.has(Or.keyField().canonicalString())||e.ce.push(new Vc(Or.keyField(),r))}return e.ce}function li(n){let e=Ve(n);return e.le||(e.le=W6(e,Gh(n))),e.le}function W6(n,e){if(n.limitType==="F")return FO(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Vc(i.field,s)});let t=n.endAt?new Oc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Oc(n.startAt.position,n.startAt.inclusive):null;return FO(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function rC(n,e,t){return new Fc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Zy(n,e){return yA(li(n),li(e))&&n.limitType===e.limitType}function gV(n){return`${mA(li(n))}|lt:${n.limitType}`}function bc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>fV(i)).join(", ")}]`),Jy(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>kc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>kc(i)).join(",")),`Target(${r})`}(li(n))}; limitType=${n.limitType})`}function e_(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):de.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Gh(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,u,c){let d=OO(o,u,c);return o.inclusive?d<=0:d<0}(r.startAt,Gh(r),i)||r.endAt&&!function(o,u,c){let d=OO(o,u,c);return o.inclusive?d>=0:d>0}(r.endAt,Gh(r),i))}(n,e)}function K6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mV(n){return(e,t)=>{let r=!1;for(let i of Gh(n)){let s=Q6(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Q6(n,e,t){let r=n.field.isKeyField()?de.comparator(e.key,t.key):function(s,o,u){let c=o.data.field(s),d=u.data.field(s);return c!==null&&d!==null?Nc(c,d):ge()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ge()}}var os=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){uf(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return U6(this.inner)}size(){return this.innerSize}};var Y6=new Tt(de.comparator);function Xs(){return Y6}var yV=new Tt(de.comparator);function qh(...n){let e=yV;for(let t of n)e=e.insert(t.key,t);return e}function J6(n){let e=yV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ma(){return Hh()}function _V(){return Hh()}function Hh(){return new os(n=>n.toString(),(n,e)=>n.isEqual(e))}var vte=new Tt(de.comparator),X6=new Wt(de.comparator);function $e(...n){let e=X6;for(let t of n)e=e.add(t);return e}var Z6=new Wt(Oe);function e5(){return Z6}function t5(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dy(e)?"-0":e}}function n5(n){return{integerValue:""+n}}var Lc=class{constructor(){this._=void 0}};function r5(n,e,t){return n instanceof Xh?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&pA(s)&&(s=Xy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof jc?vV(n,e):n instanceof Bc?wV(n,e):function(i,s){let o=s5(i,s),u=jO(o)+jO(i.Pe);return Hb(o)&&Hb(i.Pe)?n5(u):t5(i.serializer,u)}(n,e)}function i5(n,e,t){return n instanceof jc?vV(n,e):n instanceof Bc?wV(n,e):t}function s5(n,e){return n instanceof Zh?function(r){return Hb(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Xh=class extends Lc{},jc=class extends Lc{constructor(e){super(),this.elements=e}};function vV(n,e){let t=IV(e);for(let r of n.elements)t.some(i=>di(i,r))||t.push(r);return{arrayValue:{values:t}}}var Bc=class extends Lc{constructor(e){super(),this.elements=e}};function wV(n,e){let t=IV(e);for(let r of n.elements)t=t.filter(i=>!di(i,r));return{arrayValue:{values:t}}}var Zh=class extends Lc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function jO(n){return at(n.integerValue||n.doubleValue)}function IV(n){return gA(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function o5(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof jc&&i instanceof jc||r instanceof Bc&&i instanceof Bc?Pc(r.elements,i.elements,di):r instanceof Zh&&i instanceof Zh?di(r.Pe,i.Pe):r instanceof Xh&&i instanceof Xh}(n.transform,e.transform)}var Wh=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ey(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ef=class{};function EV(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new iC(n.key,Wh.none()):new tf(n.key,n.data,Wh.none());{let t=n.data,r=ns.empty(),i=new Wt(Or.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Uc(n.key,r,new Ra(i.toArray()),Wh.none())}}function a5(n,e,t){n instanceof tf?function(i,s,o){let u=i.value.clone(),c=UO(i.fieldTransforms,s,o.transformResults);u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Uc?function(i,s,o){if(!Ey(i.precondition,s))return void s.convertToUnknownDocument(o.version);let u=UO(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(TV(i)),c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Kh(n,e,t,r){return n instanceof tf?function(s,o,u,c){if(!Ey(s.precondition,o))return u;let d=s.value.clone(),f=$O(s.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Uc?function(s,o,u,c){if(!Ey(s.precondition,o))return u;let d=$O(s.fieldTransforms,c,o),f=o.data;return f.setAll(TV(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,o,u){return Ey(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(n,e,t)}function BO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Pc(r,i,(s,o)=>o5(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var tf=class extends ef{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Uc=class extends ef{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function TV(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function UO(n,e,t){let r=new Map;ft(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,u=e.data.field(s.field);r.set(s.field,i5(o,u,t[i]))}return r}function $O(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,r5(s,o,e))}return r}var iC=class extends ef{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var sC=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&a5(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Kh(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Kh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=_V();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,u=this.applyToLocalView(o,s.mutatedFields);u=t.has(i.key)?null:u;let c=EV(o,u);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(_e.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$e())}isEqual(e){return this.batchId===e.batchId&&Pc(this.mutations,e.mutations,(t,r)=>BO(t,r))&&Pc(this.baseMutations,e.baseMutations,(t,r)=>BO(t,r))}};var oC=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var aC=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Mt,ke;function DV(n){if(n===void 0)return rs("GRPC error has no .code"),H.UNKNOWN;switch(n){case Mt.OK:return H.OK;case Mt.CANCELLED:return H.CANCELLED;case Mt.UNKNOWN:return H.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return H.INTERNAL;case Mt.UNAVAILABLE:return H.UNAVAILABLE;case Mt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Mt.NOT_FOUND:return H.NOT_FOUND;case Mt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Mt.ABORTED:return H.ABORTED;case Mt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Mt.DATA_LOSS:return H.DATA_LOSS;default:return ge()}}(ke=Mt||(Mt={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";var qO=null;function u5(){return new TextEncoder}var c5=new Qs([4294967295,4294967295],0);function zO(n){let e=u5().encode(n),t=new Eb;return t.update(e),new Uint8Array(t.digest())}function GO(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qs([t,r],0),new Qs([i,s],0)]}var uC=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Pa(`Invalid padding: ${t}`);if(r<0)throw new Pa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pa(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Pa(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Qs.fromNumber(this.Te)}Ee(e,t,r){let i=e.add(t.multiply(Qs.fromNumber(r)));return i.compare(c5)===1&&(i=new Qs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let t=zO(e),[r,i]=GO(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.Te===0)return;let t=zO(e),[r,i]=GO(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Pa=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var xy=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,nf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(_e.min(),i,new Tt(Oe),Xs(),$e())}},nf=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,$e(),$e(),$e())}};var xc=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Ry=class{constructor(e,t){this.targetId=e,this.me=t}},My=class{constructor(e,t,r=cn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Py=class{constructor(){this.fe=0,this.ge=HO(),this.pe=cn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=$e(),t=$e(),r=$e();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ge()}}),new nf(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=HO()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ft(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},cC=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Xs(),this.qe=vy(),this.Qe=vy(),this.Ke=new Tt(Oe)}$e(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{let r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:ge()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){let t=e.targetId,r=e.me.count,i=this.Ye(t);if(i){let s=i.target;if(nC(s))if(r===0){let o=new de(s.path);this.We(t,o,Vr.newNoDocument(o,_e.min()))}else ft(r===1);else{let o=this.Ze(t);if(o!==r){let u=this.Xe(e),c=u?this.et(u,e,o):1;if(c!==0){this.He(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,d)}qO?.tt(function(f,g,v,D,A){var R,x,k,j,O,U;let X={localCacheCount:f,existenceFilterCount:g.count,databaseId:v.database,projectId:v.projectId},$=g.unchangedNames;return $&&(X.bloomFilter={applied:A===0,hashCount:(R=$?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(j=(k=(x=$?.bits)===null||x===void 0?void 0:x.bitmap)===null||k===void 0?void 0:k.length)!==null&&j!==void 0?j:0,padding:(U=(O=$?.bits)===null||O===void 0?void 0:O.padding)!==null&&U!==void 0?U:0,mightContain:I=>{var m;return(m=D?.mightContain(I))!==null&&m!==void 0&&m}}),X}(o,e.me,this.Le.nt(),u,c))}}}}Xe(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,u;try{o=ss(r).toUint8Array()}catch(c){if(c instanceof Cy)return Qh("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new uC(o,i,s)}catch(c){return Qh(c instanceof Pa?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Te===0?null:u}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.nt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.We(t,s,null),i++)}),i}it(e){let t=new Map;this.Be.forEach((s,o)=>{let u=this.Ye(o);if(u){if(s.current&&nC(u.target)){let c=new de(u.target.path);this.st(c).has(o)||this.ot(o,c)||this.We(o,c,Vr.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=$e();this.Qe.forEach((s,o)=>{let u=!0;o.forEachWhile(c=>{let d=this.Ye(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new xy(e,t,this.Ke,this.ke,r);return this.ke=Xs(),this.qe=vy(),this.Qe=vy(),this.Ke=new Tt(Oe),i}Ue(e,t){if(!this.je(e))return;let r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;let i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){let t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new Py,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Wt(Oe),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Wt(Oe),this.qe=this.qe.insert(e,t)),t}je(e){let t=this.Ye(e)!==null;return t||Q("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Py),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function vy(){return new Tt(de.comparator)}function HO(){return new Tt(de.comparator)}var l5={asc:"ASCENDING",desc:"DESCENDING"},d5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},h5={and:"AND",or:"OR"},lC=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function dC(n,e){return n.useProto3Json||Jy(e)?e:{value:e}}function f5(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function p5(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Rc(n){return ft(!!n),_e.fromTimestamp(function(t){let r=is(t);return new nr(r.seconds,r.nanos)}(n))}function g5(n,e){return hC(n,e).canonicalString()}function hC(n,e){let t=function(i){return new Ht(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function bV(n){let e=Ht.fromString(n);return ft(RV(e)),e}function xb(n,e){let t=bV(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new de(AV(t))}function CV(n,e){return g5(n.databaseId,e)}function m5(n){let e=bV(n);return e.length===4?Ht.emptyPath():AV(e)}function WO(n){return new Ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AV(n){return ft(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function y5(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(ft(f===void 0||typeof f=="string"),cn.fromBase64String(f||"")):(ft(f===void 0||f instanceof Buffer||f instanceof Uint8Array),cn.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(d){let f=d.code===void 0?H.UNKNOWN:DV(d.code);return new ce(f,d.message||"")}(o);t=new My(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=xb(n,r.document.name),s=Rc(r.document.updateTime),o=r.document.createTime?Rc(r.document.createTime):_e.min(),u=new ns({mapValue:{fields:r.document.fields}}),c=Vr.newFoundDocument(i,s,o,u),d=r.targetIds||[],f=r.removedTargetIds||[];t=new xc(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=xb(n,r.document),s=r.readTime?Rc(r.readTime):_e.min(),o=Vr.newNoDocument(i,s),u=r.removedTargetIds||[];t=new xc([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=xb(n,r.document),s=r.removedTargetIds||[];t=new xc([],s,i,null)}else{if(!("filter"in e))return ge();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new aC(i,s),u=r.targetId;t=new Ry(u,o)}}return t}function _5(n,e){return{documents:[CV(n,e.path)]}}function v5(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=CV(n,i);let s=function(d){if(d.length!==0)return xV(hi.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(f=>function(v){return{field:Cc(v.field),direction:E5(v.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let u=dC(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ct:t,parent:i}}function w5(n){let e=m5(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ft(r===1);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(g){let v=SV(g);return v instanceof hi&&dV(v)?v.getFilters():[v]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(v=>function(A){return new Vc(Ac(A.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(v))}(t.orderBy));let u=null;t.limit&&(u=function(g){let v;return v=typeof g=="object"?g.value:g,Jy(v)?null:v}(t.limit));let c=null;t.startAt&&(c=function(g){let v=!!g.before,D=g.values||[];return new Oc(D,v)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let v=!g.before,D=g.values||[];return new Oc(D,v)}(t.endAt)),G6(e,i,o,s,u,"F",c,d)}function I5(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function SV(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ac(t.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ac(t.unaryFilter.field);return $t.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ac(t.unaryFilter.field);return $t.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ac(t.unaryFilter.field);return $t.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(n):n.fieldFilter!==void 0?function(t){return $t.create(Ac(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return hi.create(t.compositeFilter.filters.map(r=>SV(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ge()}}(t.compositeFilter.op))}(n):ge()}function E5(n){return l5[n]}function T5(n){return d5[n]}function D5(n){return h5[n]}function Cc(n){return{fieldPath:n.canonicalString()}}function Ac(n){return Or.fromServerFormat(n.fieldPath)}function xV(n){return n instanceof $t?function(t){if(t.op==="=="){if(kO(t.value))return{unaryFilter:{field:Cc(t.field),op:"IS_NAN"}};if(NO(t.value))return{unaryFilter:{field:Cc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kO(t.value))return{unaryFilter:{field:Cc(t.field),op:"IS_NOT_NAN"}};if(NO(t.value))return{unaryFilter:{field:Cc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cc(t.field),op:T5(t.op),value:t.value}}}(n):n instanceof hi?function(t){let r=t.getFilters().map(i=>xV(i));return r.length===1?r[0]:{compositeFilter:{op:D5(t.op),filters:r}}}(n):ge()}function RV(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var rf=class n{constructor(e,t,r,i,s=_e.min(),o=_e.min(),u=cn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var fC=class{constructor(e){this.ht=e}};function b5(n){let e=w5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?rC(e,e.limit,"L"):e}var Ny=class{constructor(){}Et(e,t){this.dt(e,t),t.At()}dt(e,t){if("nullValue"in e)this.Rt(t,5);else if("booleanValue"in e)this.Rt(t,10),t.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(t,15),t.Vt(at(e.integerValue));else if("doubleValue"in e){let r=at(e.doubleValue);isNaN(r)?this.Rt(t,13):(this.Rt(t,15),Dy(r)?t.Vt(0):t.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(t,20),typeof r=="string"&&(r=is(r)),t.ft(`${r.seconds||""}`),t.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,t),this.yt(t);else if("bytesValue"in e)this.Rt(t,30),t.wt(ss(e.bytesValue)),this.yt(t);else if("referenceValue"in e)this.St(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Rt(t,45),t.Vt(r.latitude||0),t.Vt(r.longitude||0)}else"mapValue"in e?cV(e)?this.Rt(t,Number.MAX_SAFE_INTEGER):uV(e)?this.bt(e.mapValue,t):(this.Dt(e.mapValue,t),this.yt(t)):"arrayValue"in e?(this.vt(e.arrayValue,t),this.yt(t)):ge()}gt(e,t){this.Rt(t,25),this.Ct(e,t)}Ct(e,t){t.ft(e)}Dt(e,t){let r=e.fields||{};this.Rt(t,55);for(let i of Object.keys(r))this.gt(i,t),this.dt(r[i],t)}bt(e,t){var r,i;let s=e.fields||{};this.Rt(t,53);let o="value",u=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Rt(t,15),t.Vt(at(u)),this.gt(o,t),this.dt(s[o],t)}vt(e,t){let r=e.values||[];this.Rt(t,50);for(let i of r)this.dt(i,t)}St(e,t){this.Rt(t,37),de.fromName(e).path.forEach(r=>{this.Rt(t,60),this.Ct(r,t)})}Rt(e,t){e.Vt(t)}yt(e){e.Vt(2)}};Ny.Ft=new Ny;var pC=class{constructor(){this.ln=new gC}addToCollectionParentIndex(e,t){return this.ln.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Oa.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Oa.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}},gC=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Wt(Ht.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Wt(Ht.comparator)).toArray()}};var wte=new Uint8Array(0);var KO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};tr.DEFAULT_COLLECTION_PERCENTILE=10,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tr.DEFAULT=new tr(41943040,tr.DEFAULT_COLLECTION_PERCENTILE,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tr.DISABLED=new tr(-1,0,0);var sf=class n{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new n(0)}static Qn(){return new n(-1)}};function QO([n,e],[t,r]){let i=Oe(n,t);return i===0?Oe(e,r):i}var mC=class{constructor(e){this.Gn=e,this.buffer=new Wt(QO),this.zn=0}jn(){return++this.zn}Hn(e){let t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();QO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},yC=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){Q("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>S(this,null,function*(){this.Jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Gc(t)?Q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Yy(t)}yield this.Yn(3e5)}))}},_C=class{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return L.resolve(fA.oe);let r=new mC(t);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(KO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KO):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,i,s,o,u,c,d,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,u=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Dc()<=Ne.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(u-o)+`ms
	Removed ${s} targets in `+(c-u)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function C5(n,e){return new _C(n,e)}var vC=class{constructor(){this.changes=new os(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var wC=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var IC=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Kh(r.mutation,i,Ra.empty(),nr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,$e()).next(()=>r))}getLocalViewOfDocuments(e,t,r=$e()){let i=Ma();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=qh();return s.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Ma();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,$e()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,u)=>{t.set(o,u)})})}computeViews(e,t,r,i){let s=Xs(),o=Hh(),u=function(){return Hh()}();return t.forEach((c,d)=>{let f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Uc)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Kh(f.mutation,d,f.mutation.getFieldMask(),nr.now())):o.set(d.key,Ra.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,f)=>o.set(d,f)),t.forEach((d,f)=>{var g;return u.set(d,new wC(f,(g=o.get(d))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,t){let r=Hh(),i=new Tt((o,u)=>o-u),s=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let u of o)u.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let f=r.get(c)||Ra.empty();f=u.applyToLocalView(d,f),r.set(c,f);let g=(i.get(u.batchId)||$e()).add(c);i=i.insert(u.batchId,g)})}).next(()=>{let o=[],u=i.getReverseIterator();for(;u.hasNext();){let c=u.getNext(),d=c.key,f=c.value,g=_V();f.forEach(v=>{if(!s.has(v)){let D=EV(t.get(v),r.get(v));D!==null&&g.set(v,D),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return de.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):H6(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):L.resolve(Ma()),u=-1,c=s;return o.next(d=>L.forEach(d,(f,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(f)?L.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{c=c.insert(f,v)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,$e())).next(f=>({batchId:u,changes:J6(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new de(t)).next(r=>{let i=qh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=qh();return this.indexManager.getCollectionParents(e,s).next(u=>L.forEach(u,c=>{let d=function(g,v){return new Fc(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,v)=>{o=o.insert(g,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let f=d.getKey();o.get(f)===null&&(o=o.insert(f,Vr.newInvalidDocument(f)))});let u=qh();return o.forEach((c,d)=>{let f=s.get(c);f!==void 0&&Kh(f.mutation,d,Ra.empty(),nr.now()),e_(t,d)&&(u=u.insert(c,d))}),u})}};var EC=class{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return L.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Rc(i.createTime)}}(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(i){return{name:i.name,query:b5(i.bundledQuery),readTime:Rc(i.readTime)}}(t)),L.resolve()}};var TC=class{constructor(){this.overlays=new Tt(de.comparator),this.Er=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ma();return L.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Tt(e,t,s)}),L.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Er.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){let i=Ma(),s=t.length+1,o=new de(t.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){let c=u.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return L.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Tt((d,f)=>d-f),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=Ma(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let u=Ma(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>u.set(d,f)),!(u.size()>=i)););return L.resolve(u)}Tt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new oC(t,r));let s=this.Er.get(t);s===void 0&&(s=$e(),this.Er.set(t,s)),this.Er.set(t,s.add(r.key))}};var DC=class{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}};var of=class{constructor(){this.dr=new Wt(Pt.Ar),this.Rr=new Wt(Pt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){let r=new Pt(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Pt(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){let t=new de(new Ht([])),r=new Pt(t,e),i=new Pt(t,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){let t=new de(new Ht([])),r=new Pt(t,e),i=new Pt(t,e+1),s=$e();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Pt(e,0),r=this.dr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Pt=class{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return de.comparator(e.key,t.key)||Oe(e.br,t.br)}static Vr(e,t){return Oe(e.br,t.br)||de.comparator(e.key,t.key)}};var bC=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Wt(Pt.Ar)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new sC(s,t,r,i);this.mutationQueue.push(o);for(let u of i)this.vr=this.vr.add(new Pt(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,t){return L.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Fr(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Pt(t,0),i=new Pt(t,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{let u=this.Cr(o.br);s.push(u)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Wt(Oe);return t.forEach(i=>{let s=new Pt(i,0),o=new Pt(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],u=>{r=r.add(u.br)})}),L.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;de.isDocumentKey(s)||(s=s.child(""));let o=new Pt(new de(s),0),u=new Wt(Oe);return this.vr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(u=u.add(c.br)),!0)},o),L.resolve(this.Mr(u))}Mr(e){let t=[];return e.forEach(r=>{let i=this.Cr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ft(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return L.forEach(t.mutations,i=>{let s=new Pt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){let r=new Pt(t,0),i=this.vr.firstAfterOrEqual(r);return L.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){let t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var CC=class{constructor(e){this.Nr=e,this.docs=function(){return new Tt(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():Vr.newInvalidDocument(t))}getEntries(e,t){let r=Xs();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Vr.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Xs(),o=t.path,u=new de(o.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){let{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||P6(M6(f),r)<=0||(i.has(f.key)||e_(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ge()}Lr(e,t){return L.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new AC(this)}getSize(e){return L.resolve(this.size)}},AC=class extends vC{constructor(e){super(),this.hr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),L.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}};var SC=class{constructor(e){this.persistence=e,this.Br=new os(t=>mA(t),yA),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.kr=0,this.qr=new of,this.targetCount=0,this.Qr=sf.qn()}forEachTarget(e,t){return this.Br.forEach((r,i)=>t(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),L.resolve()}Un(e){this.Br.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Qr=new sf(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Un(t),L.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Br.forEach((o,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){let r=this.Br.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),L.resolve()}getMatchingKeysForTargetId(e,t){let r=this.qr.Sr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.qr.containsKey(t))}};var ky=class{constructor(e,t){this.Kr={},this.overlays={},this.$r=new fA(0),this.Ur=!1,this.Ur=!0,this.Wr=new DC,this.referenceDelegate=e(this),this.Gr=new SC(this),this.indexManager=new pC,this.remoteDocumentCache=function(i){return new CC(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new fC(t),this.jr=new EC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new TC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new bC(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){Q("MemoryPersistence","Starting transaction:",e);let i=new xC(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,t){return L.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}},xC=class extends qb{constructor(e){super(),this.currentSequenceNumber=e}},RC=class n{constructor(e){this.persistence=e,this.Zr=new of,this.Xr=null}static ei(e){return new n(e)}get ti(){if(this.Xr)return this.Xr;throw ge()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),L.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.ti,r=>{let i=de.fromPath(r);return this.ni(e,i).next(s=>{s||t.removeEntry(i,_e.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return L.or([()=>L.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}},Oy=class n{constructor(e,t){this.persistence=e,this.ri=new os(r=>O6(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=C5(this,t)}static ei(e,t){return new n(e,t)}Hr(){}Jr(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){let t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return L.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?L.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,o=>this.ir(e,o,t).next(u=>{u||(r++,s.removeEntry(o,_e.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),L.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Iy(e.data.value)),t}ir(e,t,r){return L.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.ri.get(t);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var MC=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=i}static zi(e,t){let r=$e(),i=$e();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var PC=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var NC=class{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return pO()?8:k6(fO())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Xi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new PC;return this.ts(e,t,o).next(u=>{if(s.result=u,this.Hi)return this.ns(e,t,o,u.size)})}).next(()=>s.result)}ns(e,t,r,i){return r.documentReadCount<this.Ji?(Dc()<=Ne.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",bc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),L.resolve()):(Dc()<=Ne.DEBUG&&Q("QueryEngine","Query:",bc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Dc()<=Ne.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",bc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,li(t))):L.resolve())}Xi(e,t){if(LO(t))return L.resolve(null);let r=li(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=rC(t,null,"F"),r=li(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=$e(...s);return this.Zi.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.rs(t,u);return this.ss(t,d,o,c.readTime)?this.Xi(e,rC(t,null,"F")):this.os(e,d,t,c)}))})))}es(e,t,r,i){return LO(t)||i.isEqual(_e.min())?L.resolve(null):this.Zi.getDocuments(e,r).next(s=>{let o=this.rs(t,s);return this.ss(t,o,r,i)?L.resolve(null):(Dc()<=Ne.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bc(t)),this.os(e,o,t,R6(i,-1)).next(u=>u))})}rs(e,t){let r=new Wt(mV(e));return t.forEach((i,s)=>{e_(e,s)&&(r=r.add(s))}),r}ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,t,r){return Dc()<=Ne.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",bc(t)),this.Zi.getDocumentsMatchingQuery(e,t,Oa.min(),r)}os(e,t,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var kC=class{constructor(e,t,r,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new Tt(Oe),this.cs=new os(s=>mA(s),yA),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IC(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}};function A5(n,e,t,r){return new kC(n,e,t,r)}function MV(n,e){return S(this,null,function*(){let t=Ve(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],u=[],c=$e();for(let d of i){o.push(d.batchId);for(let f of d.mutations)c=c.add(f.key)}for(let d of s){u.push(d.batchId);for(let f of d.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ts:d,removedBatchIds:o,addedBatchIds:u}))})})})}function PV(n){let e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function S5(n,e){let t=Ve(n),r=e.snapshotVersion,i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;let u=[];e.targetChanges.forEach((f,g)=>{let v=i.get(g);if(!v)return;u.push(t.Gr.removeMatchingKeys(s,f.removedDocuments,g).next(()=>t.Gr.addMatchingKeys(s,f.addedDocuments,g)));let D=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?D=D.withResumeToken(cn.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):f.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(f.resumeToken,r)),i=i.insert(g,D),function(R,x,k){return R.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(v,D,f)&&u.push(t.Gr.updateTargetData(s,D))});let c=Xs(),d=$e();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),u.push(x5(s,o,e.documentUpdates).next(f=>{c=f.Is,d=f.Es})),!r.isEqual(_e.min())){let f=t.Gr.getLastRemoteSnapshotVersion(s).next(g=>t.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(f)}return L.waitFor(u).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.us=i,s))}function x5(n,e,t){let r=$e(),i=$e();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Xs();return t.forEach((u,c)=>{let d=s.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(_e.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):Q("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{Is:o,Es:i}})}function R5(n,e){let t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Gr.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):t.Gr.allocateTargetId(r).next(o=>(i=new rf(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}function OC(n,e,t){return S(this,null,function*(){let r=Ve(n),i=r.us.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Gc(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)})}function YO(n,e,t){let r=Ve(n),i=_e.min(),s=$e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){let g=Ve(c),v=g.cs.get(f);return v!==void 0?L.resolve(g.us.get(v)):g.Gr.getTargetData(d,f)}(r,o,li(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,u.targetId).next(c=>{s=c})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,t?i:_e.min(),t?s:$e())).next(u=>(M5(r,K6(e),u),{documents:u,ds:s})))}function M5(n,e,t){let r=n.ls.get(e)||_e.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ls.set(e,r)}var Vy=class{constructor(){this.activeTargetIds=e5()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var VC=class{constructor(){this._o=new Vy,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Vy,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var FC=class{uo(e){}shutdown(){}};var Fy=class{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.To)e(0)}Po(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var wy=null;function Rb(){return wy===null?wy=function(){return 268435456+Math.round(2147483648*Math.random())}():wy++,"0x"+wy.toString(16)}var P5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var LC=class{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}};var an="WebChannelConnection",jC=class extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(t,r,i,s,o){let u=Rb(),c=this.No(t,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${t}' ${u}:`,c,i);let d={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(d,s,o),this.Bo(t,c,d,i).then(f=>(Q("RestConnection",`Received RPC '${t}' ${u}: `,f),f),f=>{throw Qh("RestConnection",`RPC '${t}' ${u} failed with error: `,f,"url: ",c,"request:",i),f})}ko(t,r,i,s,o,u){return this.Oo(t,r,i,s,o)}Lo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}No(t,r){let i=P5[t];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,i){let s=Rb();return new Promise((o,u)=>{let c=new Tb;c.setWithCredentials(!0),c.listenOnce(Db.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case $h.NO_ERROR:let f=c.getResponseJson();Q(an,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case $h.TIMEOUT:Q(an,`RPC '${e}' ${s} timed out`),u(new ce(H.DEADLINE_EXCEEDED,"Request time out"));break;case $h.HTTP_ERROR:let g=c.getStatus();if(Q(an,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);let D=v?.error;if(D&&D.status&&D.message){let A=function(x){let k=x.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(k)>=0?k:H.UNKNOWN}(D.status);u(new ce(A,D.message))}else u(new ce(H.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new ce(H.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{Q(an,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);Q(an,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",d,r,15)})}qo(e,t,r){let i=Rb(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ab(),u=Cb(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Lo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let f=s.join("");Q(an,`Creating RPC '${e}' stream ${i}: ${f}`,c);let g=o.createWebChannel(f,c),v=!1,D=!1,A=new LC({Eo:x=>{D?Q(an,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(v||(Q(an,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),Q(an,`RPC '${e}' stream ${i} sending:`,x),g.send(x))},Ao:()=>g.close()}),R=(x,k,j)=>{x.listen(k,O=>{try{j(O)}catch(U){setTimeout(()=>{throw U},0)}})};return R(g,Tc.EventType.OPEN,()=>{D||(Q(an,`RPC '${e}' stream ${i} transport opened.`),A.So())}),R(g,Tc.EventType.CLOSE,()=>{D||(D=!0,Q(an,`RPC '${e}' stream ${i} transport closed`),A.Do())}),R(g,Tc.EventType.ERROR,x=>{D||(D=!0,Qh(an,`RPC '${e}' stream ${i} transport errored:`,x),A.Do(new ce(H.UNAVAILABLE,"The operation could not be completed")))}),R(g,Tc.EventType.MESSAGE,x=>{var k;if(!D){let j=x.data[0];ft(!!j);let O=j,U=O?.error||((k=O[0])===null||k===void 0?void 0:k.error);if(U){Q(an,`RPC '${e}' stream ${i} received error:`,U);let X=U.status,$=function(_){let w=Mt[_];if(w!==void 0)return DV(w)}(X),I=U.message;$===void 0&&($=H.INTERNAL,I="Unknown error status: "+X+" with message "+U.message),D=!0,A.Do(new ce($,I)),g.close()}else Q(an,`RPC '${e}' stream ${i} received:`,j),A.vo(j)}}),R(u,bb.STAT_EVENT,x=>{x.stat===yy.PROXY?Q(an,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===yy.NOPROXY&&Q(an,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.bo()},0),A}};function Mb(){return typeof document<"u"?document:null}function NV(n){return new lC(n,!0)}var Ly=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();let t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}};var BC=class{constructor(e,t,r,i,s,o,u,c){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Ly(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}stop(){return S(this,null,function*(){this.i_()&&(yield this.close(0))})}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}u_(){return S(this,null,function*(){if(this.s_())return this.close(0)})}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}close(e,t){return S(this,null,function*(){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(rs(t.toString()),rs("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.po(t)})}P_(){}auth(){this.state=1;let e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===t&&this.I_(r,i)},r=>{e(()=>{let i=new ce(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,t){let r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(()=>S(this,null,function*(){this.state=0,this.start()}))}E_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},UC=class extends BC{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();let t=y5(this.serializer,e),r=function(s){if(!("targetChange"in s))return _e.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?_e.min():o.readTime?Rc(o.readTime):_e.min()}(e);return this.listener.R_(t,r)}V_(e){let t={};t.database=WO(this.serializer),t.addTarget=function(s,o){let u,c=o.target;if(u=nC(c)?{documents:_5(s,c)}:{query:v5(s,c).ct},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=p5(s,o.resumeToken);let d=dC(s,o.expectedCount);d!==null&&(u.expectedCount=d)}else if(o.snapshotVersion.compareTo(_e.min())>0){u.readTime=f5(s,o.snapshotVersion.toTimestamp());let d=dC(s,o.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);let r=I5(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){let t={};t.database=WO(this.serializer),t.removeTarget=e,this.c_(t)}};var $C=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new ce(H.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,hC(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ce(H.UNKNOWN,s.toString())})}ko(e,t,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.ko(e,hC(t,r),i,o,u,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(H.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}},qC=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(rs(t),this.C_=!1):Q("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}};var zC=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(()=>S(this,null,function*(){lf(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),yield function(c){return S(this,null,function*(){let d=Ve(c);d.k_.add(4),yield cf(d),d.K_.set("Unknown"),d.k_.delete(4),yield t_(d)})}(this))}))}),this.K_=new qC(r,i)}};function t_(n){return S(this,null,function*(){if(lf(n))for(let e of n.q_)yield e(!0)})}function cf(n){return S(this,null,function*(){for(let e of n.q_)yield e(!1)})}function kV(n,e){let t=Ve(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),EA(t)?IA(t):Hc(t).s_()&&wA(t,e))}function vA(n,e){let t=Ve(n),r=Hc(t);t.B_.delete(e),r.s_()&&OV(t,e),t.B_.size===0&&(r.s_()?r.a_():lf(t)&&t.K_.set("Unknown"))}function wA(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Hc(n).V_(e)}function OV(n,e){n.U_.xe(e),Hc(n).m_(e)}function IA(n){n.U_=new cC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Hc(n).start(),n.K_.F_()}function EA(n){return lf(n)&&!Hc(n).i_()&&n.B_.size>0}function lf(n){return Ve(n).k_.size===0}function VV(n){n.U_=void 0}function N5(n){return S(this,null,function*(){n.K_.set("Online")})}function k5(n){return S(this,null,function*(){n.B_.forEach((e,t)=>{wA(n,e)})})}function O5(n,e){return S(this,null,function*(){VV(n),EA(n)?(n.K_.O_(e),IA(n)):n.K_.set("Unknown")})}function V5(n,e,t){return S(this,null,function*(){if(n.K_.set("Online"),e instanceof My&&e.state===2&&e.cause)try{yield function(i,s){return S(this,null,function*(){let o=s.cause;for(let u of s.targetIds)i.B_.has(u)&&(yield i.remoteSyncer.rejectListen(u,o),i.B_.delete(u),i.U_.removeTarget(u))})}(n,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield JO(n,r)}else if(e instanceof xc?n.U_.$e(e):e instanceof Ry?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(_e.min()))try{let r=yield PV(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let u=s.U_.it(o);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let f=s.B_.get(d);f&&s.B_.set(d,f.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,d)=>{let f=s.B_.get(c);if(!f)return;s.B_.set(c,f.withResumeToken(cn.EMPTY_BYTE_STRING,f.snapshotVersion)),OV(s,c);let g=new rf(f.target,c,d,f.sequenceNumber);wA(s,g)}),s.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),yield JO(n,r)}})}function JO(n,e,t){return S(this,null,function*(){if(!Gc(e))throw e;n.k_.add(1),yield cf(n),n.K_.set("Offline"),t||(t=()=>PV(n.localStore)),n.asyncQueue.enqueueRetryable(()=>S(this,null,function*(){Q("RemoteStore","Retrying IndexedDB access"),yield t(),n.k_.delete(1),yield t_(n)}))})}function XO(n,e){return S(this,null,function*(){let t=Ve(n);t.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");let r=lf(t);t.k_.add(3),yield cf(t),r&&t.K_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),yield t_(t)})}function F5(n,e){return S(this,null,function*(){let t=Ve(n);e?(t.k_.delete(2),yield t_(t)):e||(t.k_.add(2),yield cf(t),t.K_.set("Unknown"))})}function Hc(n){return n.W_||(n.W_=function(t,r,i){let s=Ve(t);return s.b_(),new UC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Ro:N5.bind(null,n),mo:k5.bind(null,n),po:O5.bind(null,n),R_:V5.bind(null,n)}),n.q_.push(e=>S(this,null,function*(){e?(n.W_.__(),EA(n)?IA(n):n.K_.set("Unknown")):(yield n.W_.stop(),VV(n))}))),n.W_}var GC=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,u=new n(e,t,o,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function FV(n,e){if(rs("AsyncQueue",`${e}: ${n}`),Gc(n))return new ce(H.UNAVAILABLE,`${e}: ${n}`);throw n}var jy=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||de.comparator(t.key,r.key):(t,r)=>de.comparator(t.key,r.key),this.keyedMap=qh(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var By=class{constructor(){this.z_=new Tt(de.comparator)}track(e){let t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):ge():this.z_=this.z_.insert(t,e)}j_(){let e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}},$c=class n{constructor(e,t,r,i,s,o,u,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(u=>{o.push({type:0,doc:u})}),new n(e,t,jy.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var HC=class{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}},WC=class{constructor(){this.queries=ZO(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){let i=Ve(t),s=i.queries;i.queries=ZO(),s.forEach((o,u)=>{for(let c of u.J_)c.onError(r)})})(this,new ce(H.ABORTED,"Firestore shutting down"))}};function ZO(){return new os(n=>gV(n),Zy)}function L5(n,e){return S(this,null,function*(){let t=Ve(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new HC,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=yield t.onListen(i,!0);break;case 1:s.H_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let u=FV(o,`Initialization of query '${bc(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,s),s.J_.push(e),e.ea(t.onlineState),s.H_&&e.ta(s.H_)&&TA(t)})}function j5(n,e){return S(this,null,function*(){let t=Ve(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function B5(n,e){let t=Ve(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let u of o.J_)u.ta(i)&&(r=!0);o.H_=i}}r&&TA(t)}function U5(n,e,t){let r=Ve(n),i=r.queries.get(e);if(i)for(let s of i.J_)s.onError(t);r.queries.delete(e)}function TA(n){n.X_.forEach(e=>{e.next()})}var KC,eV;(eV=KC||(KC={})).na="default",eV.Cache="cache";var QC=class{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new $c(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;let r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;let t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=$c.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==KC.Cache}};var Uy=class{constructor(e){this.key=e}},$y=class{constructor(e){this.key=e}},YC=class{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=$e(),this.mutatedKeys=$e(),this.Va=mV(e),this.ma=new jy(this.Va)}get fa(){return this.da}ga(e,t){let r=t?t.pa:new By,i=t?t.ma:this.ma,s=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{let v=i.get(f),D=e_(this.query,g)?g:null,A=!!v&&this.mutatedKeys.has(v.key),R=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations),x=!1;v&&D?v.data.isEqual(D.data)?A!==R&&(r.track({type:3,doc:D}),x=!0):this.ya(v,D)||(r.track({type:2,doc:D}),x=!0,(c&&this.Va(D,c)>0||d&&this.Va(D,d)<0)&&(u=!0)):!v&&D?(r.track({type:0,doc:D}),x=!0):v&&!D&&(r.track({type:1,doc:v}),x=!0,(c||d)&&(u=!0)),x&&(D?(o=o.add(D),s=R?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{ma:o,pa:r,ss:u,mutatedKeys:s}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;let o=e.pa.j_();o.sort((f,g)=>function(D,A){let R=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return R(D)-R(A)}(f.type,g.type)||this.Va(f.doc,g.doc)),this.wa(r),i=i!=null&&i;let u=t&&!i?this.Sa():[],c=this.Ra.size===0&&this.current&&!i?1:0,d=c!==this.Aa;return this.Aa=c,o.length!==0||d?{snapshot:new $c(this.query,e.ma,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:u}:{ba:u}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new By,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];let e=this.Ra;this.Ra=$e(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});let t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new $y(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new Uy(r))}),t}va(e){this.da=e.ds,this.Ra=$e();let t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return $c.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}},JC=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},XC=class{constructor(e){this.key=e,this.Fa=!1}},ZC=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new os(u=>gV(u),Zy),this.Oa=new Map,this.Na=new Set,this.La=new Tt(de.comparator),this.Ba=new Map,this.ka=new of,this.qa={},this.Qa=new Map,this.Ka=sf.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}};function $5(n,e,t=!0){return S(this,null,function*(){let r=$V(n),i,s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=yield LV(r,e,t,!0),i})}function q5(n,e){return S(this,null,function*(){let t=$V(n);yield LV(t,e,!0,!1)})}function LV(n,e,t,r){return S(this,null,function*(){let i=yield R5(n.localStore,li(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),u;return r&&(u=yield z5(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&kV(n.remoteStore,i),u})}function z5(n,e,t,r,i){return S(this,null,function*(){n.Ua=(g,v,D)=>function(R,x,k,j){return S(this,null,function*(){let O=x.view.ga(k);O.ss&&(O=yield YO(R.localStore,x.query,!1).then(({documents:I})=>x.view.ga(I,O)));let U=j&&j.targetChanges.get(x.targetId),X=j&&j.targetMismatches.get(x.targetId)!=null,$=x.view.applyChanges(O,R.isPrimaryClient,U,X);return nV(R,x.targetId,$.ba),$.snapshot})}(n,g,v,D);let s=yield YO(n.localStore,e,!0),o=new YC(e,s.ds),u=o.ga(s.documents),c=nf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(u,n.isPrimaryClient,c);nV(n,t,d.ba);let f=new JC(e,t,o);return n.xa.set(e,f),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),d.snapshot})}function G5(n,e,t){return S(this,null,function*(){let r=Ve(n),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!Zy(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield OC(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&vA(r.remoteStore,i.targetId),eA(r,i.targetId)}).catch(Yy))):(eA(r,i.targetId),yield OC(r.localStore,i.targetId,!0))})}function H5(n,e){return S(this,null,function*(){let t=Ve(n),r=t.xa.get(e),i=t.Oa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),vA(t.remoteStore,r.targetId))})}function jV(n,e){return S(this,null,function*(){let t=Ve(n);try{let r=yield S5(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Ba.get(s);o&&(ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?ft(o.Fa):i.removedDocuments.size>0&&(ft(o.Fa),o.Fa=!1))}),yield UV(t,r,e)}catch(r){yield Yy(r)}})}function tV(n,e,t){let r=Ve(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.xa.forEach((s,o)=>{let u=o.view.ea(e);u.snapshot&&i.push(u.snapshot)}),function(o,u){let c=Ve(o);c.onlineState=u;let d=!1;c.queries.forEach((f,g)=>{for(let v of g.J_)v.ea(u)&&(d=!0)}),d&&TA(c)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function W5(n,e,t){return S(this,null,function*(){let r=Ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Ba.get(e),s=i&&i.key;if(s){let o=new Tt(de.comparator);o=o.insert(s,Vr.newNoDocument(s,_e.min()));let u=$e().add(s),c=new xy(_e.min(),new Map,new Tt(Oe),o,u);yield jV(r,c),r.La=r.La.remove(s),r.Ba.delete(e),DA(r)}else yield OC(r.localStore,e,!1).then(()=>eA(r,e,t)).catch(Yy)})}function eA(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||BV(n,r)})}function BV(n,e){n.Na.delete(e.path.canonicalString());let t=n.La.get(e);t!==null&&(vA(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),DA(n))}function nV(n,e,t){for(let r of t)r instanceof Uy?(n.ka.addReference(r.key,e),K5(n,r)):r instanceof $y?(Q("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||BV(n,r.key)):ge()}function K5(n,e){let t=e.key,r=t.path.canonicalString();n.La.get(t)||n.Na.has(r)||(Q("SyncEngine","New document in limbo: "+t),n.Na.add(r),DA(n))}function DA(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){let e=n.Na.values().next().value;n.Na.delete(e);let t=new de(Ht.fromString(e)),r=n.Ka.next();n.Ba.set(r,new XC(t)),n.La=n.La.insert(t,r),kV(n.remoteStore,new rf(li(_A(t.path)),r,"TargetPurposeLimboResolution",fA.oe))}}function UV(n,e,t){return S(this,null,function*(){let r=Ve(n),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((u,c)=>{o.push(r.Ua(c,e,t).then(d=>{var f;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(f=t?.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){i.push(d);let g=MC.zi(c.targetId,d);s.push(g)}}))}),yield Promise.all(o),r.Ma.R_(i),yield function(c,d){return S(this,null,function*(){let f=Ve(c);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>L.forEach(d,v=>L.forEach(v.Wi,D=>f.persistence.referenceDelegate.addReference(g,v.targetId,D)).next(()=>L.forEach(v.Gi,D=>f.persistence.referenceDelegate.removeReference(g,v.targetId,D)))))}catch(g){if(!Gc(g))throw g;Q("LocalStore","Failed to update sequence numbers: "+g)}for(let g of d){let v=g.targetId;if(!g.fromCache){let D=f.us.get(v),A=D.snapshotVersion,R=D.withLastLimboFreeSnapshotVersion(A);f.us=f.us.insert(v,R)}}})}(r.localStore,s))})}function Q5(n,e){return S(this,null,function*(){let t=Ve(n);if(!t.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());let r=yield MV(t.localStore,e);t.currentUser=e,function(s,o){s.Qa.forEach(u=>{u.forEach(c=>{c.reject(new ce(H.CANCELLED,o))})}),s.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield UV(t,r.Ts)}})}function Y5(n,e){let t=Ve(n),r=t.Ba.get(e);if(r&&r.Fa)return $e().add(r.key);{let i=$e(),s=t.Oa.get(e);if(!s)return i;for(let o of s){let u=t.xa.get(o);i=i.unionWith(u.view.fa)}return i}}function $V(n){let e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=W5.bind(null,e),e.Ma.R_=B5.bind(null,e.eventManager),e.Ma.Wa=U5.bind(null,e.eventManager),e}var qV=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return S(this,null,function*(){this.serializer=NV(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),yield this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)})}Ja(t,r){return null}Ya(t,r){return null}Ha(t){return A5(this.persistence,new NC,t.initialUser,this.serializer)}ja(t){return new ky(RC.ei,this.serializer)}za(t){return new VC}terminate(){return S(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),tA=class extends qV{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){ft(this.persistence.referenceDelegate instanceof Oy);let r=this.persistence.referenceDelegate.garbageCollector;return new yC(r,e.asyncQueue,t)}ja(e){let t=this.cacheSizeBytes!==void 0?tr.withCacheSize(this.cacheSizeBytes):tr.DEFAULT;return new ky(r=>Oy.ei(r,t),this.serializer)}};var J5=(()=>{class n{initialize(t,r){return S(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>tV(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Q5.bind(null,this.syncEngine),yield F5(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new WC}()}createDatastore(t){let r=NV(t.databaseInfo.databaseId),i=function(o){return new jC(o)}(t.databaseInfo);return function(o,u,c,d){return new $C(o,u,c,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,u,c){return new zC(i,s,o,u,c)}(this.localStore,this.datastore,t.asyncQueue,r=>tV(this.syncEngine,r,0),function(){return Fy.p()?new Fy:new FC}())}createSyncEngine(t,r){return function(s,o,u,c,d,f,g){let v=new ZC(s,o,u,c,d,f);return g&&(v.$a=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return S(this,null,function*(){var t,r;yield function(s){return S(this,null,function*(){let o=Ve(s);Q("RemoteStore","RemoteStore shutting down."),o.k_.add(5),yield cf(o),o.Q_.shutdown(),o.K_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var nA=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):rs("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var rA=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=un.UNAUTHENTICATED,this.clientId=Ub.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>S(this,null,function*(){Q("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=FV(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Pb(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>S(this,null,function*(){r.isEqual(i)||(yield MV(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function rV(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield X5(n);Q("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>XO(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>XO(e.remoteStore,i)),n._onlineComponents=e})}function X5(n){return S(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Pb(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===H.FAILED_PRECONDITION||i.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Qh("Error using user provided cache. Falling back to memory cache: "+t),yield Pb(n,new qV)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),yield Pb(n,new tA(void 0));return n._offlineComponents})}function Z5(n){return S(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),yield rV(n,n._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),yield rV(n,new J5))),n._onlineComponents})}function iV(n){return S(this,null,function*(){let e=yield Z5(n),t=e.eventManager;return t.onListen=$5.bind(null,e.syncEngine),t.onUnlisten=G5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=q5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=H5.bind(null,e.syncEngine),t})}function zV(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var sV=new Map;function e3(n,e,t,r){if(e===!0&&r===!0)throw new ce(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function t3(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ge()}function Nb(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=t3(n);throw new ce(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var qy=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}e3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zV((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ce(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},iA=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ob;switch(r.type){case"firstParty":return new Lb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return S(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=sV.get(t);r&&(Q("ComponentProvider","Removing Datastore"),sV.delete(t),r.terminate())}(this),Promise.resolve()}};var zy=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},qc=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},sA=class n extends zy{constructor(e,t,r){super(e,t,_A(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new qc(this.firestore,null,new de(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var Gy=class{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Ly(this,"async_queue_retry"),this.fu=()=>{let r=Mb();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;let t=Mb();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;let t=Mb();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});let t=new Ys;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}wu(){return S(this,null,function*(){if(this.Iu.length!==0){try{yield this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Gc(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}})}yu(e){let t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;let i=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(r);throw rs("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);let i=GC.createAndSchedule(this,e,t,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&ge()}verifyOperationInProgress(){}bu(){return S(this,null,function*(){let e;do e=this.gu,yield e;while(e!==this.gu)})}Du(e){for(let t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){let t=this.du.indexOf(e);this.du.splice(t,1)}};function oV(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var af=class extends iA{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Gy,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return S(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Gy(e),this._firestoreClient=void 0,yield e}})}};function n3(n){if(n._terminated)throw new ce(H.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||r3(n),n._firestoreClient}function r3(n){var e,t,r;let i=n._freezeSettings(),s=function(u,c,d,f){return new zb(u,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,zV(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new rA(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(u){let c=u?._online.build();return{_offline:u?._offline.build(c),_online:c}}(n._componentsProvider))}var oA=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(cn.fromBase64String(e))}catch(t){throw new ce(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Hy=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var aA=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}};var uA=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var i3=new RegExp("[~\\*/\\[\\]]");function s3(n,e,t){if(e.search(i3)>=0)throw aV(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Hy(...e.split("."))._internalPath}catch{throw aV(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function aV(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ce(H.INVALID_ARGUMENT,u+n+c)}var Wy=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qc(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new cA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(GV("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},cA=class extends Wy{data(){return super.data()}};function GV(n,e){return typeof e=="string"?s3(n,e):e instanceof Hy?e._internalPath:e._delegate._internalPath}function o3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ce(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var lA=class{convertValue(e,t="none"){switch(Js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return uf(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>at(o.doubleValue));return new uA(s)}convertGeoPoint(e){return new aA(at(e.latitude),at(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Xy(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Yh(e));default:return null}}convertTimestamp(e){let t=is(e);return new nr(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ht.fromString(e);ft(RV(r));let i=new Ay(r.get(1),r.get(3)),s=new de(r.popFirst(5));return i.isEqual(t)||rs(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var Na=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ky=class extends Wy{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(GV("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Mc=class extends Ky{data(e={}){return super.data(e)}},dA=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Na(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Mc(this._firestore,this._userDataWriter,r.key,r,new Na(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(u=>{let c=new Mc(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Na(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{let c=new Mc(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Na(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,f=-1;return u.type!==0&&(d=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),f=o.indexOf(u.doc.key)),{type:a3(u.type),doc:c,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function a3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}var Qy=class extends lA{constructor(e){super(),this.firestore=e}convertBytes(e){return new oA(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new qc(this.firestore,null,t)}};function HV(n,...e){var t,r,i;n=mO(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||oV(e[o])||(s=e[o],o++);let u={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(oV(e[o])){let g=e[o];e[o]=(t=g.next)===null||t===void 0?void 0:t.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let c,d,f;if(n instanceof qc)d=Nb(n.firestore,af),f=_A(n._key.path),c={next:g=>{e[o]&&e[o](u3(d,n,g))},error:e[o+1],complete:e[o+2]};else{let g=Nb(n,zy);d=Nb(g.firestore,af),f=g._query;let v=new Qy(d);c={next:D=>{e[o]&&e[o](new dA(d,v,g,D))},error:e[o+1],complete:e[o+2]},o3(n._query)}return function(v,D,A,R){let x=new nA(R),k=new QC(D,x,A);return v.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return L5(yield iV(v),k)})),()=>{x.eu(),v.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return j5(yield iV(v),k)}))}}(n3(d),f,u,c)}function u3(n,e,t){let r=t.docs.get(e._key),i=new Qy(n);return new Ky(n,i,e._key,r,new Na(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){zc=i})(TO),Bh(new Ks("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),u=new af(new Vb(r.getProvider("auth-internal")),new Bb(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ce(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ay(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),Ec(SO,"4.7.5",e),Ec(SO,"4.7.5","esm2017")})();var n_=function(){return n_=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},n_.apply(this,arguments)};var c3={includeMetadataChanges:!1};function WV(n,e){return e===void 0&&(e=c3),new ve(function(t){var r=HV(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function KV(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:n_(n_({},r),(t={},t[e.idField]=n.id,t))}function QV(n){return WV(n,{includeMetadataChanges:!0}).pipe(se(function(e){return e.docs}))}function YV(n,e){return e===void 0&&(e={}),QV(n).pipe(se(function(t){return t.map(function(r){return KV(r,e)})}))}var r_=class{constructor(e){return e}};var bA=cE(YV,!0);var CA=cE(Nh,!0);function d3(n,e){if(n&1&&(oe(0,"li")(1,"strong"),me(2,"Type:"),ue(),me(3),_s(4,"br"),oe(5,"strong"),me(6,"Context:"),ue(),me(7),_s(8,"br"),oe(9,"strong"),me(10,"Date:"),ue(),me(11),Kw(12,"date"),ue()),n&2){let t=e.$implicit;lt(3),Ko(" ",t.type," "),lt(4),Ko(" ",t.context," "),lt(4),Ko(" ",Qw(12,3,t.date.toDate(),"medium")," ")}}function h3(n,e){if(n&1&&(oe(0,"div",6)(1,"h2"),me(2,"General Overview"),ue(),oe(3,"p"),me(4),ue(),oe(5,"h3"),me(6,"Agenda"),ue(),oe(7,"ul"),yd(8,d3,13,6,"li",7),ue()()),n&2){let t=Ww();lt(4),Ko("Total Patients: ",t.totalPatients,""),lt(4),gu("ngForOf",t.appointments)}}function f3(n,e){if(n&1&&(oe(0,"tr")(1,"td"),me(2),ue(),oe(3,"td"),me(4),ue(),oe(5,"td"),me(6),ue(),oe(7,"td"),me(8),ue(),oe(9,"td"),me(10),Kw(11,"date"),ue()()),n&2){let t=e.$implicit;lt(2),Wo(t.id),lt(2),Wo(t.name),lt(2),Wo(t.area),lt(2),Wo(t.status),lt(2),Wo(Qw(11,5,t.date.toDate(),"medium"))}}function p3(n,e){if(n&1&&(oe(0,"div",8)(1,"h2"),me(2,"Patients List"),ue(),oe(3,"table")(4,"thead")(5,"tr")(6,"th"),me(7,"ID"),ue(),oe(8,"th"),me(9,"Name"),ue(),oe(10,"th"),me(11,"Area"),ue(),oe(12,"th"),me(13,"Status"),ue(),oe(14,"th"),me(15,"Date"),ue()()(),oe(16,"tbody"),yd(17,f3,12,8,"tr",7),ue()()()),n&2){let t=Ww();lt(17),gu("ngForOf",t.pacients)}}var JV=(()=>{class n{constructor(t){this.firestore=t,this.activeTab="general",this.totalPatients=0,this.appointments=[],this.pacients=[]}ngOnInit(){this.loadPatients(),this.loadAppointments()}setActiveTab(t){this.activeTab=t}loadPatients(){let t=CA(this.firestore,"pacients");bA(t,{idField:"id"}).subscribe(r=>{this.pacients=r,this.totalPatients=r.length})}loadAppointments(){let t=CA(this.firestore,"appointments");bA(t,{idField:"id"}).subscribe(r=>{this.appointments=r})}static{this.\u0275fac=function(r){return new(r||n)(De(r_))}}static{this.\u0275cmp=Kr({type:n,selectors:[["app-dashboard"]],decls:9,vars:6,consts:[[1,"dashboard"],[1,"side-panel"],[3,"click"],[1,"main-content"],["class","general-tab",4,"ngIf"],["class","pacients-tab",4,"ngIf"],[1,"general-tab"],[4,"ngFor","ngForOf"],[1,"pacients-tab"]],template:function(r,i){r&1&&(oe(0,"div",0)(1,"div",1)(2,"button",2),zt("click",function(){return i.setActiveTab("general")}),me(3,"General"),ue(),oe(4,"button",2),zt("click",function(){return i.setActiveTab("pacients")}),me(5,"Pacients"),ue()(),oe(6,"div",3),yd(7,h3,9,2,"div",4)(8,p3,18,1,"div",5),ue()()),r&2&&(lt(2),Ho("active",i.activeTab==="general"),lt(2),Ho("active",i.activeTab==="pacients"),lt(3),gu("ngIf",i.activeTab==="general"),lt(),gu("ngIf",i.activeTab==="pacients"))},dependencies:[pM,gM,mM],styles:[".dashboard[_ngcontent-%COMP%]{display:flex;height:100vh}.dashboard[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]{width:200px;background-color:#00796b;color:#fff;display:flex;flex-direction:column;gap:10px;padding:15px}.dashboard[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;color:#fff;padding:10px;text-align:left;cursor:pointer}.dashboard[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#004d40;font-weight:700}.dashboard[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00574b}.dashboard[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{flex:1;padding:20px}.dashboard[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:15px}.dashboard[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:is(th, td)[_ngcontent-%COMP%]{border:1px solid #ccc;padding:10px;text-align:left}.dashboard[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f5f5f5}"]})}}return n})();var g3=[{path:"",component:_P},{path:"login",component:lO},{path:"dashboard",component:JV}],XV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=jt({type:n})}static{this.\u0275inj=Lt({imports:[oE.forRoot(g3),oE]})}}return n})();var ZV=(()=>{class n{constructor(){this.title="medihelp"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Kr({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){r&1&&_s(0,"router-outlet")},dependencies:[ZI]})}}return n})();var eF={production:!1,firebase:{apiKey:"AIzaSyAzID9DPONp3kZztJrFd-t0cUprQQKoPN4",authDomain:"gluciobot.firebaseapp.com",projectId:"gluciobot",storageBucket:"gluciobot.firebasestorage.app",messagingSenderId:"505352236961",appId:"1:505352236961:web:68c8c70b9afaa2e6c365e0"}};var tF=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=jt({type:n,bootstrap:[ZV]})}static{this.\u0275inj=Lt({imports:[AM,XV,cO,OP.initializeApp(eF.firebase),Lk]})}}return n})();CM().bootstrapModule(tF).catch(n=>console.error(n));
